<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible" />
    <meta content="width=1300, initial-scale=1 user-scalable=yes" name="viewport" />
    <meta content="行者无疆，始于足下——行走，思考，在路上" name="description" />
    <meta content="web development, programming, typeface, typography" name="keywords" />
    <meta content="Xiao Hanyu" name="author" />
    <link href="/apple-touch-icon.png" rel="apple-touch-icon" sizes="180x180" />
    <link href="/favicon-32x32.png" rel="icon" sizes="32x32" type="image/png" />
    <link href="/favicon-16x16.png" rel="icon" sizes="16x16" type="image/png" />
    <link href="/manifest.json" rel="manifest" />
    <link color="#5bbad5" href="/safari-pinned-tab.svg" rel="mask-icon" />
    <meta content="#ffffff" name="theme-color" />
    <title>Announcing oh-my-emacs v0.1</title>
    <link href="/static/dist/semantic-ui/semantic.min.css" rel="stylesheet" type="text/css" />
    <link href="/static/dist/fonts.css/fonts.css" rel="stylesheet" type="text/css" />
    <link href="/static/stylesheet/default.css" rel="stylesheet" type="text/css" />
    <link href="/static/stylesheet/pandoc-code-highlight.css" rel="stylesheet" type="text/css" />
    <script src="/static/dist/jquery/jquery.min.js"></script>
  </head>
  <body lang="cn">
    <div data-quotes-cn="[{&quot;content&quot;:[&quot;天上星，亮晶晶，永灿烂，长安宁。&quot;,&quot;湖边竹，盈盈绿，报平安，多喜乐。&quot;],&quot;author&quot;:&quot;金庸&quot;,&quot;from&quot;:&quot;天龙八部&quot;},{&quot;content&quot;:[&quot;死亡是唯一一座永远亮着的灯塔，不管你向哪里航行，最终都得转向它指引的方向。一切都会逝去，只有死神永生。&quot;],&quot;author&quot;:&quot;刘慈欣&quot;,&quot;from&quot;:&quot;地球往事&quot;},{&quot;content&quot;:[&quot;我终于明白了为什么 Einstein 喜爱看守灯塔的职业，因为那样他可以在自己的心灵中建立一片宁静而自由的天空。&quot;],&quot;author&quot;:&quot;卢昌海&quot;,&quot;from&quot;:&quot;&lt;a href=\&quot;http://www.changhai.org\&quot;&gt;http://www.changhai.org&lt;/a&gt;&quot;},{&quot;content&quot;:[&quot;我宁愿游荡在你身边&quot;,&quot;做七天的野鬼&quot;,&quot;跟随你&quot;,&quot;就算落进最黑暗的地方&quot;,&quot;我的爱&quot;,&quot;也不会让我成为永远的孤魂&quot;],&quot;author&quot;:&quot;李安&quot;,&quot;from&quot;:&quot;卧虎藏龙&quot;},{&quot;content&quot;:[&quot;在中国，任何超脱飞扬的思想都会砰然坠地——现实的引力实在是太沉重了。&quot;],&quot;author&quot;:&quot;刘慈欣&quot;,&quot;from&quot;:&quot;地球往事&quot;},{&quot;content&quot;:[&quot;天下唯庸人无咎无誉。&quot;],&quot;author&quot;:&quot;梁启超&quot;,&quot;from&quot;:&quot;李鸿章传&quot;},{&quot;content&quot;:[&quot;沧海横流，血肉横飞，方显出英雄本色，当年万源保卫战，敌军在不到 30 华里的地面上，使用兵力竞达九十个团，数量十倍于红军，谁能记清当时打了多少次恶仗？每天要牺牲多少人？他却是不多的幸存者之一。而眼前，一切都沉寂了，流逝了。那惊心动魄的枪声，那撕肝裂肺的呐喊，那悲痛欲绝的咒骂和呻吟，那狼藉遍野的残肢断骨和头颅，那千疮百孔仍迎风飘扬的军旗；都沉寂了，流逝了，无影无踪了，犹如做了一场梦……&quot;],&quot;author&quot;:&quot;都梁&quot;,&quot;from&quot;:&quot;亮剑&quot;}]" data-quotes-en="[{&quot;content&quot;:[&quot;Pascal is for building pyramids—imposing, breathtaking, static structures built by armies pushing heavy blocks into place. Lisp is for building organisms—imposing, breathtaking, dynamic structures built by squads fitting fluctuating myriads of simpler organisms into place.&quot;],&quot;author&quot;:&quot;Alan J. Perlis&quot;,&quot;from&quot;:&quot;foreword for &lt;a href=\&quot;http://mitpress.mit.edu/sicp/\&quot;&gt;SICP&lt;/a&gt;&quot;},{&quot;content&quot;:[&quot;When you don&#39;t create things, you become defined by your tastes rather than ability. Your tastes only narrow &amp; exclude people. So create.&quot;],&quot;author&quot;:&quot;why the luck stiff&quot;,&quot;from&quot;:&quot;&lt;a href=\&quot;http://whymirror.github.io/\&quot;&gt;http://whymirror.github.io/&lt;/a&gt;&quot;},{&quot;content&quot;:[&quot;In theory, there is no difference between theory and practice. But, in practice, there is.&quot;],&quot;author&quot;:&quot;Jan L. A. van de Snepscheut&quot;,&quot;from&quot;:&quot;&lt;a href=\&quot;http://en.wikiquote.org/wiki/Jan_L._A._van_de_Snepscheut\&quot;&gt;Wikipedia&lt;/a&gt;&quot;},{&quot;content&quot;:[&quot;The future has already arrived. It is just not evenly distributed yet.&quot;],&quot;author&quot;:&quot;William Gibson&quot;,&quot;from&quot;:&quot;&lt;a href=\&quot;https://en.wikiquote.org/wiki/William_Gibson\&quot;&gt;Wikiquote&lt;/a&gt;&quot;},{&quot;content&quot;:[&quot;There are many ways of trying to understand programs. People often rely too much on one way, which is called \&quot;debugging\&quot; and consists of running a partly-understood program to see if it does what you expected. Another way, which ML advocates, is to install some means of understanding in the very programs themselves.&quot;],&quot;author&quot;:&quot;Robin Milner&quot;,&quot;from&quot;:&quot;foreword for &lt;a href=\&quot;http://www.ccs.neu.edu/home/matthias/BTML/\&quot;&gt;The Little MLer&lt;/a&gt;&quot;}]" id="quotes" style="display: none"></div>
    <div id="content">
      <nav class="ui borderless menu" lang="en">
        <div class="ui container">
          <a class="item" href="/"><img src="/static/image/gravatar-black.svg" /></a><a class="item" href="/archive">Archive</a><a class="item desktop-only" href="/categories">Categories</a><a class="item desktop-only" href="/tags">Tags</a><a class="item" href="/about">About</a>
          <div class="right menu">
            <div class="item desktop-only">
              <form action="https://www.google.com/search" class="ui form" method="get" target="_blank">
                <input name="q" type="hidden" value="site:xiaohanyu.me" />
                <div class="ui transparent left icon input">
                  <input name="q" placeholder="Search..." type="text" /><i class="search icon"></i>
                </div>
              </form>
            </div>
            <a class="item" href="https://github.com/xiaohanyu"><i class="github icon"></i></a><a class="item desktop-only" href="/atom.xml"><i class="feed icon"></i></a>
          </div>
        </div>
      </nav><div class="ui stackable container">
  <div class="ui very padded segment article">
    <article class="ui stackable divided grid"><header class="row article-head">
  <div class="column">
    <h1 class="ui header">
      Announcing oh-my-emacs v0.1
    </h1>
    <div class="ui divider"></div>
  </div>
</header>
<div class="row article-body">
  <section class="twelve wide column"><p>去年偷闲的时候，挖了好多大坑（<a href="http://xiaohanyu.me/posts/2012-06-09-introducing-lisp-development-with-emacs/">这里</a>，<a href="http://xiaohanyu.me/posts/2012-02-15-introducing-mapreduce-with-hadoop/">这里</a>和<a href="http://xiaohanyu.me/posts/2012-02-27-effective-work-with-file-management/">这里</a>）怎奈挖坑容易填坑难……客观原因自然是“认真的写作有如雕刻”云云，主观上嘛，“懒”大概是逃不脱的一个字吧。</p>
<p>Wait，是谁说过，“懒惰是程序员的美德”来着。秉承这种美德，耗了将近两个月的业余时间， 尝试了不下 50 个 el-get package，并且认真读了不下 10 个 package 的 manual，遂成 <a href="https://github.com/xiaohanyu/oh-my-emacs">oh-my-emacs</a>.</p>
<p>一切缘起于两个月前的某一天，我忽然心血来潮，想要整理下那一坨 “just works” 的 <code>.emacd.d</code> 。我几乎尝试了所有 github 上比较流行的 <code>.emacs.d</code> ，但是没有一个满足我的需求。“因为所以，科学道理”，<a href="http://en.wikipedia.org/wiki/Reinventing_the_wheel">Reinventing the wheel</a> 和 <a href="http://en.wikipedia.org/wiki/Not_invented_here">Not invented here</a> 大概是每个程序员必修的一课吧。索性不管那么多了，代码写的不好，又不输房子不输地，坑挖的不好，大不了留着自己用就是。</p>
<p>Oh-my-emacs 着重解决的问题是（引用自 oh-my-emacs 的 README）:</p>
<ul>
<li>Better default settings with various eye candy, powerline, scrollbar, color-theme, fonts, etc.</li>
<li>Adopt <code>el-get</code> as the default package manager for Emacs, instead of the default builtin <code>package.el</code>, say goodbay to <code>./configure; make; make install</code> and explicitly mananully management of <code>load-path</code>. <code>el-get</code> also provides automatic documentation management, customizable user’s recipe support, etc.</li>
<li>Self-adapted, only install necessary packages when it satisfy the prerequisities. You need to install <a href="http://clang.llvm.org/">clang</a> for <a href="https://github.com/brianjcj/auto-complete-clang">auto-complete-clang</a>, for example.</li>
<li>Modular, only load necessary packages as you need.</li>
<li>Literate, each package have comprehensive documentation or even a tiny tutorial with it, together with necessary web links. Say goodbye to old, out-dated emacs lisp code from Google.</li>
<li>Work as expected, completion every where when possible, semantic code completion through <a href="https://github.com/auto-complete/auto-complete">auto-complete</a> with various ac backend, <a href="https://github.com/emacs-helm/helm">helm</a> for minibuffer completion, etc.</li>
<li>Full-blown, oh-my-emacs is not another starter kit, it is hacker kit.</li>
</ul>
<p>这其中，补全、文档、自适应性，是我特别看重的三点。补全自不必说，作为上古大牛也许是不需要补全的，但是对于我这样 21st Century 成长起来、尝试过 Visual Studio 强大补全甜头的程序员来讲，补全是最为迫切的需求。而 Emacs/Vim 作为 General Purpose Editor， 其最大的使用不便就是没有代码的语义补全 (semantic completion)。Emacs 有一个内置的 <a href="http://www.gnu.org/software/emacs/manual/html_node/semantic/index.html#Top">Semantic</a>，来源于 Emacs 社区鼎鼎大名，目标远大的 <a href="http://cedet.sourceforge.net/">CEDET</a>，但是 Semantic 的使用和配置都很复杂（参考 emacser.com 的 <a href="http://emacser.com/cedet.htm">文章</a>），而且很慢，有时会让 Emacs 卡住。 究其原因，我认为 Semantic 的思路是不对的。用性能本就不怎么好的 Elisp 去实现复杂如 C++ 这类语言的 Parser，其本身就是浩大的工作量。正确的思路是，对于不同的语言， 依赖于不同的 backend，然后用 Elisp 写相应补全的 interface。所以我认为， <a href="https://github.com/auto-complete/auto-complete">auto-complete</a> 的思路是正确的。Oh-my-emacs 利用已有的各种 auto-complete 的 backend（如 <a href="https://github.com/purcell/ac-slime">ac-slime</a>, <a href="https://github.com/brianjcj/auto-complete-clang">auto-complete-clang</a> 等）基本上实现了对 C/C++，Python， ELisp/Common Lisp/Clojure的语义补全。</p>
<p>第二点是文档，Emacs 的世界从来不会缺乏选择， <code>M-x el-get-list-packages</code> ，2500 个 package，其中有很多 package 要么是已经过时，要么是年久失修，要么是语焉不详， 看上去一片繁华的 Emacs 世界，实则荆棘密布。如果你没有一点 Elisp 的功底，想开箱即用，那几乎是不可能的。单拿 Python 来说，Emacs 和 Python 社区就有两套不同的 python.el ，这给很多 Python 和 Emacs 的初学者造成了困惑。Google: Python Emacs， 其首页的几套解决方案，采用的是不同的 python.el……你说对于一个好容易学会翻墙，开始习惯用 Google 搜索技术文档的计算机初学者而言，看完这些文章，不晕菜才怪呢。稍微复杂一些的配置，比如 TeX Live，在比如 Common Lisp 的各种实现和 SLIME，想要得到一个比较舒适的环境，不但要配置好 Emacs，还要配置好系统环境，这又是一大难题。 Oh-my-emacs 借助 org-mode <a href="http://orgmode.org/worg/org-contrib/babel/">Babel</a>，采用 Literate 的方式<a href="#fn1" class="footnoteRef" id="fnref1"><sup>1</sup></a>，将文档和代码写在一起， 在文档中尽量给出每个模块所需要的系统环境；对于有多个选择的情况，文档中尽量给出为什么选用 package A 而不是 package B 的理由和权衡过程。有一部分文档甚至可以当作 Tutorial 来看。Literate 方式最大的好处是保持文档和代码的同步，这样，oh-my-emacs 即可以用作是“开箱即用”的 <code>.emacs.d</code> ，也可以当作是手把手的 Emacs 配置<a href="http://xiaohanyu.github.io/oh-my-emacs/">教程</a>（ 统计下来，oh-my-emacs 中文档和代码的 <a href="http://en.wikipedia.org/wiki/Source_lines_of_code">LOC</a> 比例约为 3:1 左右）。另外，操作系统的环境千差万别<a href="#fn2" class="footnoteRef" id="fnref2"><sup>2</sup></a>，因此 oh-my-emacs 基本上在每个相关模块的文档里面都指明了使用这个模块所需的系统环境，这也可以看做是我为了填去年的坑所做的一点努力吧。</p>
<p>第三点是自适应性。这又是一个很宽泛的话题。什么叫自适应性？是支持多个操作系统吗？ 不是的，至少我没有打算让 oh-my-emacs 很好的支持 Windows，一方面是因为 Windows 没有一个好的类似于 apt-get 这种类型的 package manager<a href="#fn3" class="footnoteRef" id="fnref3"><sup>3</sup></a>，oh-my-emacs 依赖的很多底层软件如 SSH，GCC/Clang，TeX Live 等在 Windows 上配置起来都很麻烦，远不如 apt-get/yum/pacman/homebrew 这种一条命令来的方便。我这里讲的自适应性，主要包括：</p>
<ul>
<li>采用 <a href="https://github.com/dimitri/el-get">el-get</a>，自动化管理 <code class="elisp rundoc-block" rundoc-language="elisp">load-path</code>，以及 info 文档等，say goodbay to <code>git submodule</code></li>
<li>如果系统环境不满足某个 package 的要求，就不要安装这个 package，免得装完了不能用。比如 <a href="https://github.com/brianjcj/auto-complete-clang">auto-complete-clang</a> 依赖于 <a href="http://clang.llvm.org/">clang</a>，如果系统中没有安装 clang，那么 oh-my-emacs 在启动的时候就不会安装 auto-complete-clang。反之，如果你意识到这个问题并安装了 clang，那么可要重启 Emacs，auto-complete-clang就应该可用了。</li>
<li>尽量借助工具和代码获取相关配置，而不是在代码中写死。比如，oh-my-emacs 大量使用 Elisp 中的 <code>executable-find</code> ，这需要依赖于操作系统的 package manager 设置好相关的 <code>$PATH</code> ， 这样带来的好处就是 oh-my-emacs 能够无缝的适应很多环境。
<ul>
<li>比如 AUCTeX 需要 PDF 阅读器作为 LaTeX 文档的 Viewer，oh-my-emacs 采取的策略是优先采用 <a href="http://okular.kde.org/">Okular</a>， 其次是 <a href="https://projects.gnome.org/evince/">Evince</a>，如果操作系统上即没有装 Okular 也没有装 Evince，那么 oh-my-emacs 会 fallback 到 <a href="https://launchpad.net/xdg-utils">xdg-open</a>，这样可以用可移植的代码获得最大限度的灵活性和自适应性<a href="#fn4" class="footnoteRef" id="fnref4"><sup>4</sup></a>。</li>
<li>再比如 <a href="http://common-lisp.net/project/slime/">SLIME</a>支持多种 Common Lisp Implementation，oh-my-emacs 采取的策略是同时支持 <a href="http://www.sbcl.org/">SBCL</a>/<a href="http://ccl.clozure.com/">Clozure CL</a>/<a href="http://www.clisp.org/">CLisp</a>，也就是说，只要你安装了 SBCL/Clozure CL/CLisp 其中的一个，oh-my-emacs 的 Common Lisp 设置就应该是可以工作的。</li>
<li>针对 auto-complete-clang， oh-my-emacs 可以利用 <a href="http://www.freedesktop.org/wiki/Software/pkg-config/">pkg-config</a> 检测并设置正确的 <code>ac-clang-flags</code> ，可以对系统中可用的任意 C/C++ lib 提供语义补全。比如，你可以用 <code>M-x ome-pkg-config-enable-clang-flag &quot;QtGui&quot; RET</code> 来获得 QtGui 库的补全支持，效果如下：</li>
</ul></li>
</ul>
<p><a href="/static/image/2013/auto-complete-cpp-qt.jpg"><img src="/static/image/2013/auto-complete-cpp-qt.jpg" /></a></p>
<p>Oh-my-emacs 目前已经包含了对 C/C++/Python/Common Lisp/Clojure 的支持，基本上都提供了较好的语义补全。其他方面，设置了更友好的字体，powerline，color-theme。启用了一些比较好的内置 mode，诸如 recentf/savespace/uniquify。对 LaTeX 编辑提供了完整的支持，默认采用 XeTeX。</p>
<p>Oh-my-emacs 的名字来源于 <a href="https://github.com/robbyrussell/oh-my-zsh">oh-my-zsh</a>，用意嘛，自然是希望能将 oh-my-emacs 打造成 oh-my-zsh 那样。大话止于此，看行动。</p>
<p>最后放张图，更多美照在<a href="https://github.com/xiaohanyu/oh-my-emacs/tree/master/screenshots">这里</a> 。Enjoy emacs, and, your life.</p>
<p><a href="/static/image/2013/org-babel-emacs-lisp.jpg"><img src="/static/image/2013/org-babel-emacs-lisp.jpg" /></a></p>
<section class="footnotes">
<hr />
<ol>
<li id="fn1"><p><a href="http://en.wikipedia.org/wiki/Literate_programming">Literate programming</a> 的概念来源于祖师爷 Donald Knuth。没记错的话，大名鼎鼎的 TeX 早期也是用 literate 的方式写成的。 Org-babel 提供了所谓的 “active code in Org-mode”，还有专门的 Paper 论述 Org-babel 的 workflow。Oh-my-emacs 这方面的灵感主要来自于 <a href="https://github.com/eschulte/emacs24-starter-kit">emacs24-starter-kit</a>。<a href="#fnref1">↩</a></p></li>
<li id="fn2"><p>也许正是如此，Puppet/Chef 这类工具才会大行其道吧。<a href="#fnref2">↩</a></p></li>
<li id="fn3"><p><a href="http://chocolatey.org/">chocolatey</a> 也许是个不错的选择，但是我没有用过。<a href="#fnref3">↩</a></p></li>
<li id="fn4"><p>这个 PDF 阅读器的例子主要是在 Linux 下面测试的，我手头没有 Mac 的环境，so， patches are always welcome。<a href="#fnref4">↩</a></p></li>
</ol>
</section>

    <div class="ui divider"></div>
    <div class="ui small one item menu">
      <a class="item" id="show-disqus-comments" onclick="show_disqus_comments()" title="Fuck GFW, disqus.com has been blocked in China.">Show Disqus Comments</a>
    </div>
    <div id="disqus_thread"></div>
    <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
  </section>
  <aside class="four wide column">
    <div class="ui small header">
      License
    </div>
    <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/"><img class="cc-license" src="/static/image/cc_byncsa.flat.guokr.svg" /></a>
    <div class="ui small header">
      Committed
    </div>
    <date>2013-09-14</date>
    <div class="ui small header">
      Updated
    </div>
    <date>2017-04-14</date>
    <div class="ui small header">
      Category
    </div>
    <div class="ui list">
      <div class="item">
        <a href="/categories#Emacs">
          <div class="ui label">
            Emacs<sup>7</sup>
          </div>
        </a>
      </div>
    </div>
    <div class="ui small header">
      Tags
    </div>
    <div class="ui list">
      <div class="item">
        <a href="/tags#Emacs">
          <div class="ui label">
            Emacs<sup>14</sup>
          </div>
        </a>
      </div>
      <div class="item">
        <a href="/tags#Outdated">
          <div class="ui label">
            Outdated<sup>27</sup>
          </div>
        </a>
      </div>
    </div>
    <div class="ui small header">
      Meta
    </div>
    <p>
      Imported from <a href="http://cnlox.is-programmer.com/posts/40749.html">is-programmer</a>.
    </p>
    <div class="ui small header">
      Links
    </div>
    <div class="ui small two item menu">
      <a class="item" title="OpenStack 开发杂谈" href="/posts/2013-07-08-misc-thoughts-on-openstack-development/">Prev</a><a class="item" title="Announcing ac-geiser v0.1" href="/posts/2013-09-29-announcing-ac-geiser-v0.2/">Next</a>
    </div>
  </aside>
</div>
    </article>
  </div>
</div>
    </div>
    <div id="footer">
      <footer class="ui inverted vertical center aligned footer segment">
        <div class="ui container">
          <p>
            Copyright © 2009–2017 by Xiao Hanyu — Powered by Emacs, Git, Pandoc, Ruby and Nanoc.
          </p>
        </div>
      </footer>
      <script src="/static/dist/semantic-ui/semantic.min.js"></script>
      <script src="/static/javascript/ga.js"></script>
      <script src="/static/javascript/default.js"></script>
    </div>
  </body>
</html>