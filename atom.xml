<?xml version="1.0" encoding="UTF-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <id>http://xiaohanyu.me/</id>
  <title>行者无疆 始于足下</title>
  <updated>2017-04-30T08:11:07Z</updated>
  <link rel="alternate" href="http://xiaohanyu.me/"/>
  <link rel="self" href="http://xiaohanyu.me/atom.xml"/>
  <author>
    <name>Xiao Hanyu</name>
    <uri>http://xiaohanyu.me</uri>
  </author>
  <entry>
    <id>tag:xiaohanyu.me,2017-04-30:/posts/2017-04-30-google-foobar-interview/</id>
    <title type="html">Google foo.bar 面试记</title>
    <published>2017-04-30T08:11:07Z</published>
    <updated>2017-04-30T08:11:07Z</updated>
    <link rel="alternate" href="http://xiaohanyu.me/posts/2017-04-30-google-foobar-interview/"/>
    <content type="html">&lt;h2 id="缘起"&gt;缘起&lt;/h2&gt;
&lt;p&gt;16 年 10 月 27 日，我用 Google 搜索 “Haskell QuickCheck”，没想到 Google 放了一小段网页动画，然后就弹出一句 “You are speaking our language. Up for a challenge?”&lt;/p&gt;
&lt;p&gt;&lt;a href="/static/image/2017/google_foobar_invitation.png"&gt;&lt;img src="/static/image/2017/google_foobar_invitation.png" /&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;我有些不明所以，原以为是浏览器出现了一些莫名其妙的 bug，不过并没有太在意，就点了 “I want to play”，紧接着就进入了一个算法闯关游戏。&lt;/p&gt;
&lt;p&gt;游戏的模式有点类似于传统的 Online Judge，但是又不完全一样；交互界面模仿了 UNIX Shell：你可以通过命令来请求（ &lt;code&gt;request&lt;/code&gt; ）一个新的 Challenge、 提交 （ &lt;code&gt;submit&lt;/code&gt; ）代码、验证（ &lt;code&gt;verify&lt;/code&gt; ）代码正确与否。&lt;/p&gt;
&lt;p&gt;整个 foo.bar 游戏分为 5 个 level，题目的难度随着 level 的增长会逐渐增加。&lt;/p&gt;
&lt;p&gt;我个人经历中，level 1 有 1 道题目，level 2 有 2 道，level 3 有 3 道。level 1 和 level 2 的题目十分简单，每个题目会给 24–48 个小时的做答时间，考的主要是一些基础的编程概念；level 3 会考一些简单的算法，每个题目会给 96 个小时的做答时间；level 4 的题目就比较难了，会考一些不常见的算法。&lt;/p&gt;
&lt;p&gt;&lt;a href="/static/image/2017/google_foobar_page.png"&gt;&lt;img src="/static/image/2017/google_foobar_welcome.png" /&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href="/static/image/2017/google_foobar_code_editor.png"&gt;&lt;img src="/static/image/2017/google_foobar_code_editor.png" /&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href="/static/image/2017/google_foobar_verify.png"&gt;&lt;img src="/static/image/2017/google_foobar_verify.png" /&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href="/static/image/2017/google_foobar_progress.png"&gt;&lt;img src="/static/image/2017/google_foobar_progress.png" /&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;我大概花了 4–6 个小时的时间完成了 level 1–3 的 6 道题目——其中有 30% 的时间花在英文阅读理解上，50% 的时间编码，剩下 20% 的时间 debug 一些 test case。由于 foo.bar 并没有 &lt;a href="https://en.wikipedia.org/wiki/Non-disclosure_agreement"&gt;NDA&lt;/a&gt; 的限制，我这里贴出 level 3 的 3 个题目以及我个人的测试代码， 供读者参考：&lt;/p&gt;
&lt;hr /&gt;
&lt;p&gt;Problem 1 in level 3:&lt;/p&gt;
&lt;pre class="example"&gt;&lt;code&gt;Queue To Do
===========

You&amp;#39;re almost ready to make your move to destroy the LAMBCHOP doomsday device,
but the security checkpoints that guard the underlying systems of the LAMBCHOP
are going to be a problem. You were able to take one down without tripping any
alarms, which is great! Except that as Commander Lambda&amp;#39;s assistant, you&amp;#39;ve
learned that the checkpoints are about to come under automated review, which
means that your sabotage will be discovered and your cover blown - unless you
can trick the automated review system.

To trick the system, you&amp;#39;ll need to write a program to return the same security
checksum that the guards would have after they would have checked all the
workers through. Fortunately, Commander Lambda&amp;#39;s desire for efficiency won&amp;#39;t
allow for hours-long lines, so the checkpoint guards have found ways to quicken
the pass-through rate. Instead of checking each and every worker coming through,
the guards instead go over everyone in line while noting their security IDs,
then allow the line to fill back up. Once they&amp;#39;ve done that they go over the
line again, this time leaving off the last worker. They continue doing this,
leaving off one more worker from the line each time but recording the security
IDs of those they do check, until they skip the entire line, at which point they
XOR the IDs of all the workers they noted into a checksum and then take off for
lunch. Fortunately, the workers&amp;#39; orderly nature causes them to always line up in
numerical order without any gaps.

For example, if the first worker in line has ID 0 and the security checkpoint
line holds three workers, the process would look like this:

0 1 2 /
3 4 / 5
6 / 7 8

where the guards&amp;#39; XOR (^) checksum is 0^1^2^3^4^6 == 2.

Likewise, if the first worker has ID 17 and the checkpoint holds four workers,
the process would look like:

17 18 19 20 /
21 22 23 / 24
25 26 / 27 28
29 / 30 31 32

which produces the checksum 17^18^19^20^21^22^23^25^26^29 == 14.

All worker IDs (including the first worker) are between 0 and 2000000000
inclusive, and the checkpoint line will always be at least 1 worker long.

With this information, write a function answer(start, length) that will cover
for the missing security checkpoint by outputting the same checksum the guards
would normally submit before lunch. You have just enough time to find out the ID
of the first worker to be checked (start) and the length of the line (length)
before the automatic review occurs, so your program must generate the proper
checksum with just those two values.
&lt;/code&gt;&lt;/pre&gt;
&lt;div class="sourceCode"&gt;&lt;pre class="sourceCode python"&gt;&lt;code class="sourceCode python"&gt;&lt;span class="co"&gt;# solution for problem 1 in level 3&lt;/span&gt;
&lt;span class="kw"&gt;def&lt;/span&gt; answer(start, length):
    worker_list &lt;span class="op"&gt;=&lt;/span&gt; [(start &lt;span class="op"&gt;+&lt;/span&gt; (length &lt;span class="op"&gt;-&lt;/span&gt; l) &lt;span class="op"&gt;*&lt;/span&gt; length,
                    start &lt;span class="op"&gt;+&lt;/span&gt; (length &lt;span class="op"&gt;-&lt;/span&gt; l) &lt;span class="op"&gt;*&lt;/span&gt; length &lt;span class="op"&gt;+&lt;/span&gt; l)
                   &lt;span class="cf"&gt;for&lt;/span&gt; l &lt;span class="kw"&gt;in&lt;/span&gt; &lt;span class="bu"&gt;range&lt;/span&gt;(length, &lt;span class="dv"&gt;0&lt;/span&gt;, &lt;span class="op"&gt;-&lt;/span&gt;&lt;span class="dv"&gt;1&lt;/span&gt;)]

    reduced_xor &lt;span class="op"&gt;=&lt;/span&gt; [xor_range(start, end) &lt;span class="cf"&gt;for&lt;/span&gt; start, end &lt;span class="kw"&gt;in&lt;/span&gt; worker_list]

    &lt;span class="cf"&gt;return&lt;/span&gt; &lt;span class="bu"&gt;reduce&lt;/span&gt;(&lt;span class="kw"&gt;lambda&lt;/span&gt; x, y: x &lt;span class="op"&gt;^&lt;/span&gt; y, reduced_xor)

&lt;span class="kw"&gt;def&lt;/span&gt; xor_range(start, end):
    &lt;span class="co"&gt;# inclusive start and exclusive end&lt;/span&gt;
    &lt;span class="cf"&gt;if&lt;/span&gt; (end &lt;span class="op"&gt;-&lt;/span&gt; start) &lt;span class="op"&gt;==&lt;/span&gt; &lt;span class="dv"&gt;0&lt;/span&gt;:
        &lt;span class="cf"&gt;return&lt;/span&gt; &lt;span class="dv"&gt;0&lt;/span&gt;
    &lt;span class="cf"&gt;if&lt;/span&gt; (end &lt;span class="op"&gt;-&lt;/span&gt; start) &lt;span class="op"&gt;==&lt;/span&gt; &lt;span class="dv"&gt;1&lt;/span&gt;:
        &lt;span class="cf"&gt;return&lt;/span&gt; start
    &lt;span class="cf"&gt;if&lt;/span&gt; (end &lt;span class="op"&gt;-&lt;/span&gt; start) &lt;span class="op"&gt;&amp;lt;=&lt;/span&gt; &lt;span class="dv"&gt;4&lt;/span&gt;:
        &lt;span class="cf"&gt;return&lt;/span&gt; &lt;span class="bu"&gt;reduce&lt;/span&gt;(&lt;span class="kw"&gt;lambda&lt;/span&gt; x, y: x &lt;span class="op"&gt;^&lt;/span&gt; y, &lt;span class="bu"&gt;range&lt;/span&gt;(start, end))
    &lt;span class="cf"&gt;else&lt;/span&gt;:
        begin_range &lt;span class="op"&gt;=&lt;/span&gt; (start, start &lt;span class="op"&gt;/&lt;/span&gt; &lt;span class="dv"&gt;4&lt;/span&gt; &lt;span class="op"&gt;*&lt;/span&gt; &lt;span class="dv"&gt;4&lt;/span&gt; &lt;span class="op"&gt;+&lt;/span&gt; &lt;span class="dv"&gt;4&lt;/span&gt;)
        end_range &lt;span class="op"&gt;=&lt;/span&gt; (end &lt;span class="op"&gt;/&lt;/span&gt; &lt;span class="dv"&gt;4&lt;/span&gt; &lt;span class="op"&gt;*&lt;/span&gt; &lt;span class="dv"&gt;4&lt;/span&gt;, end)
        &lt;span class="cf"&gt;return&lt;/span&gt; xor_range(&lt;span class="op"&gt;*&lt;/span&gt;begin_range) &lt;span class="op"&gt;^&lt;/span&gt; xor_range(&lt;span class="op"&gt;*&lt;/span&gt;end_range)

&lt;span class="co"&gt;# print(answer(0, 3))&lt;/span&gt;
&lt;span class="co"&gt;# print(answer(17, 4))&lt;/span&gt;
&lt;span class="co"&gt;# print(answer(17, 250))&lt;/span&gt;
&lt;span class="co"&gt;# print(answer(17, 2500))&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Problem 2 in level 3:&lt;/p&gt;
&lt;pre class="example"&gt;&lt;code&gt;Bomb, Baby!
===========

You&amp;#39;re so close to destroying the LAMBCHOP doomsday device you can taste it! But
in order to do so, you need to deploy special self-replicating bombs designed
for you by the brightest scientists on Bunny Planet. There are two types: Mach
bombs (M) and Facula bombs (F). The bombs, once released into the LAMBCHOP&amp;#39;s
inner workings, will automatically deploy to all the strategic points you&amp;#39;ve
identified and destroy them at the same time.

But there&amp;#39;s a few catches. First, the bombs self-replicate via one of two
distinct processes: Every Mach bomb retrieves a sync unit from a Facula bomb;
for every Mach bomb, a Facula bomb is created; Every Facula bomb spontaneously
creates a Mach bomb.

For example, if you had 3 Mach bombs and 2 Facula bombs, they could either
produce 3 Mach bombs and 5 Facula bombs, or 5 Mach bombs and 2 Facula bombs. The
replication process can be changed each cycle.

Second, you need to ensure that you have exactly the right number of Mach and
Facula bombs to destroy the LAMBCHOP device. Too few, and the device might
survive. Too many, and you might overload the mass capacitors and create a
singularity at the heart of the space station - not good!

And finally, you were only able to smuggle one of each type of bomb - one Mach,
one Facula - aboard the ship when you arrived, so that&amp;#39;s all you have to start
with. (Thus it may be impossible to deploy the bombs to destroy the LAMBCHOP,
but that&amp;#39;s not going to stop you from trying!)

You need to know how many replication cycles (generations) it will take to
generate the correct amount of bombs to destroy the LAMBCHOP. Write a function
answer(M, F) where M and F are the number of Mach and Facula bombs needed.
Return the fewest number of generations (as a string) that need to pass before
you&amp;#39;ll have the exact number of bombs necessary to destroy the LAMBCHOP, or the
string&amp;quot;impossible&amp;quot;if this can&amp;#39;t be done! M and F will be string representations
of positive integers no larger than 10^50. For example, if M = &amp;quot;2&amp;quot; and F = &amp;quot;1&amp;quot;,
one generation would need to pass, so the answer would be &amp;quot;1&amp;quot;. However, if M =
&amp;quot;2&amp;quot; and F = &amp;quot;4&amp;quot;, it would not be possible.

Languages
=========

To provide a Python solution, edit solution.py
To provide a Java solution, edit solution.java

Test cases
==========

Inputs:
    (string) M = &amp;quot;2&amp;quot;
    (string) F = &amp;quot;1&amp;quot;
Output:
    (string) &amp;quot;1&amp;quot;

Inputs:
    (string) M = &amp;quot;4&amp;quot;
    (string) F = &amp;quot;7&amp;quot;
Output:
    (string) &amp;quot;4&amp;quot;

Use verify [file] to test your solution and see how it does. When you are
finished editing your code, use submit [file] to submit your answer. If your
solution passes the test cases, it will be removed from your home folder.
&lt;/code&gt;&lt;/pre&gt;
&lt;div class="sourceCode"&gt;&lt;pre class="sourceCode python"&gt;&lt;code class="sourceCode python"&gt;&lt;span class="co"&gt;# solution for problem 2 in level 3&lt;/span&gt;
&lt;span class="kw"&gt;def&lt;/span&gt; answer(M, F):
    m &lt;span class="op"&gt;=&lt;/span&gt; &lt;span class="bu"&gt;int&lt;/span&gt;(M)
    f &lt;span class="op"&gt;=&lt;/span&gt; &lt;span class="bu"&gt;int&lt;/span&gt;(F)

    &lt;span class="cf"&gt;if&lt;/span&gt; m &lt;span class="op"&gt;*&lt;/span&gt; f &lt;span class="op"&gt;==&lt;/span&gt; &lt;span class="dv"&gt;0&lt;/span&gt;:
        &lt;span class="cf"&gt;return&lt;/span&gt; &lt;span class="st"&gt;&amp;quot;impossible&amp;quot;&lt;/span&gt;

    g &lt;span class="op"&gt;=&lt;/span&gt; gcd(m, f)
    &lt;span class="cf"&gt;if&lt;/span&gt; g &lt;span class="op"&gt;!=&lt;/span&gt; &lt;span class="dv"&gt;1&lt;/span&gt; &lt;span class="kw"&gt;and&lt;/span&gt; (&lt;span class="bu"&gt;abs&lt;/span&gt;(m &lt;span class="op"&gt;-&lt;/span&gt; f) &lt;span class="op"&gt;%&lt;/span&gt; g &lt;span class="op"&gt;==&lt;/span&gt; &lt;span class="dv"&gt;0&lt;/span&gt;):
        &lt;span class="cf"&gt;return&lt;/span&gt; &lt;span class="st"&gt;&amp;quot;impossible&amp;quot;&lt;/span&gt;

    &lt;span class="cf"&gt;return&lt;/span&gt; &lt;span class="bu"&gt;str&lt;/span&gt;(answer_helper(m, f))

&lt;span class="kw"&gt;def&lt;/span&gt; answer_helper(m, f):
    &lt;span class="cf"&gt;if&lt;/span&gt; m &lt;span class="op"&gt;==&lt;/span&gt; &lt;span class="dv"&gt;1&lt;/span&gt;:
        &lt;span class="cf"&gt;return&lt;/span&gt; f &lt;span class="op"&gt;-&lt;/span&gt; &lt;span class="dv"&gt;1&lt;/span&gt;
    &lt;span class="cf"&gt;elif&lt;/span&gt; f &lt;span class="op"&gt;==&lt;/span&gt; &lt;span class="dv"&gt;1&lt;/span&gt;:
        &lt;span class="cf"&gt;return&lt;/span&gt; m &lt;span class="op"&gt;-&lt;/span&gt; &lt;span class="dv"&gt;1&lt;/span&gt;
    &lt;span class="cf"&gt;else&lt;/span&gt;:
        &lt;span class="cf"&gt;if&lt;/span&gt; m &lt;span class="op"&gt;&amp;lt;&lt;/span&gt; f:
            &lt;span class="cf"&gt;return&lt;/span&gt; answer_helper(f, m)
        &lt;span class="cf"&gt;else&lt;/span&gt;:
            &lt;span class="cf"&gt;return&lt;/span&gt; (m &lt;span class="op"&gt;/&lt;/span&gt; f) &lt;span class="op"&gt;+&lt;/span&gt; answer_helper(m &lt;span class="op"&gt;-&lt;/span&gt; m &lt;span class="op"&gt;/&lt;/span&gt; f &lt;span class="op"&gt;*&lt;/span&gt; f, f)

&lt;span class="kw"&gt;def&lt;/span&gt; gcd(x, y):
    &lt;span class="cf"&gt;if&lt;/span&gt; y &lt;span class="op"&gt;==&lt;/span&gt; &lt;span class="dv"&gt;0&lt;/span&gt;:
        &lt;span class="cf"&gt;return&lt;/span&gt; x
    &lt;span class="cf"&gt;else&lt;/span&gt;:
        &lt;span class="cf"&gt;return&lt;/span&gt; gcd(y, x &lt;span class="op"&gt;%&lt;/span&gt; y)

&lt;span class="co"&gt;# print(answer(&amp;quot;1&amp;quot;, &amp;quot;1&amp;quot;))&lt;/span&gt;
&lt;span class="co"&gt;# print(answer(&amp;quot;2&amp;quot;, &amp;quot;1&amp;quot;))&lt;/span&gt;
&lt;span class="co"&gt;# print(answer(&amp;quot;4&amp;quot;, &amp;quot;7&amp;quot;))&lt;/span&gt;
&lt;span class="co"&gt;# print(answer(&amp;quot;9&amp;quot;, &amp;quot;37&amp;quot;))&lt;/span&gt;
&lt;span class="co"&gt;# print(answer(&amp;quot;2&amp;quot;, &amp;quot;38&amp;quot;))&lt;/span&gt;
&lt;span class="co"&gt;# print(answer(&amp;quot;2978183212347123467888&amp;quot;, &amp;quot;8832131497&amp;quot;))&lt;/span&gt;
&lt;span class="co"&gt;# print(answer(&amp;quot;0&amp;quot;, &amp;quot;100&amp;quot;))&lt;/span&gt;
&lt;span class="co"&gt;# print(answer(&amp;quot;9&amp;quot;, &amp;quot;9&amp;quot;))&lt;/span&gt;
&lt;span class="co"&gt;# print(answer(&amp;quot;0&amp;quot;, &amp;quot;0&amp;quot;))&lt;/span&gt;
&lt;span class="co"&gt;# print(answer(&amp;quot;1&amp;quot;, &amp;quot;1&amp;quot;))&lt;/span&gt;
&lt;span class="co"&gt;# print(answer(&amp;quot;2&amp;quot;, &amp;quot;2&amp;quot;))&lt;/span&gt;
&lt;span class="co"&gt;# print(answer(&amp;quot;12&amp;quot;, &amp;quot;9&amp;quot;))&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Problem 3 in level 3:&lt;/p&gt;
&lt;pre class="example"&gt;&lt;code&gt;Fuel Injection Perfection
=========================

Commander Lambda has asked for your help to refine the automatic quantum
antimatter fuel injection system for her LAMBCHOP doomsday device. It&amp;#39;s a great
chance for you to get a closer look at the LAMBCHOP - and maybe sneak in a bit
of sabotage while you&amp;#39;re at it - so you took the job gladly.

Quantum antimatter fuel comes in small pellets, which is convenient since the
many moving parts of the LAMBCHOP each need to be fed fuel one pellet at a time.
However, minions dump pellets in bulk into the fuel intake. You need to figure
out the most efficient way to sort and shift the pellets down to a single pellet
at a time.

The fuel control mechanisms have three operations:

1) Add one fuel pellet
2) Remove one fuel pellet
3) Divide the entire group of fuel pellets by 2 (due to the destructive energy
released when a quantum antimatter pellet is cut in half, the safety controls
will only allow this to happen if there is an even number of pellets)

Write a function called answer(n) which takes a positive integer as a string and
returns the minimum number of operations needed to transform the number of
pellets to 1. The fuel intake control panel can only display a number up to 309
digits long, so there won&amp;#39;t ever be more pellets than you can express in that
many digits.

For example:
answer(4) returns 2: 4 -&amp;gt; 2 -&amp;gt; 1
answer(15) returns 5: 15 -&amp;gt; 16 -&amp;gt; 8 -&amp;gt; 4 -&amp;gt; 2 -&amp;gt; 1

Languages
=========

To provide a Python solution, edit solution.py
To provide a Java solution, edit solution.java

Test cases
==========

Inputs:
    (string) n = &amp;quot;4&amp;quot;
Output:
    (int) 2

Inputs:
    (string) n = &amp;quot;15&amp;quot;
Output:
    (int) 5

Use verify [file] to test your solution and see how it does. When you are
finished editing your code, use submit [file] to submit your answer. If your
solution passes the test cases, it will be removed from your home folder.
&lt;/code&gt;&lt;/pre&gt;
&lt;div class="sourceCode"&gt;&lt;pre class="sourceCode python"&gt;&lt;code class="sourceCode python"&gt;&lt;span class="co"&gt;# solution for problem 3 in level 3&lt;/span&gt;
&lt;span class="kw"&gt;def&lt;/span&gt; answer(n):
    &lt;span class="co"&gt;# your code here&lt;/span&gt;
    n &lt;span class="op"&gt;=&lt;/span&gt; &lt;span class="bu"&gt;int&lt;/span&gt;(n)

    table &lt;span class="op"&gt;=&lt;/span&gt; {&lt;span class="dv"&gt;1&lt;/span&gt;: &lt;span class="dv"&gt;0&lt;/span&gt;, &lt;span class="dv"&gt;2&lt;/span&gt;: &lt;span class="dv"&gt;1&lt;/span&gt;}

    &lt;span class="kw"&gt;def&lt;/span&gt; answer_helper(n):
        &lt;span class="cf"&gt;if&lt;/span&gt; n &lt;span class="kw"&gt;in&lt;/span&gt; table:
            &lt;span class="cf"&gt;return&lt;/span&gt; table[n]

        &lt;span class="cf"&gt;if&lt;/span&gt; n &lt;span class="op"&gt;%&lt;/span&gt; &lt;span class="dv"&gt;2&lt;/span&gt; &lt;span class="op"&gt;!=&lt;/span&gt; &lt;span class="dv"&gt;0&lt;/span&gt;:
            table[n] &lt;span class="op"&gt;=&lt;/span&gt; &lt;span class="bu"&gt;min&lt;/span&gt;(answer_helper((n &lt;span class="op"&gt;+&lt;/span&gt; &lt;span class="dv"&gt;1&lt;/span&gt;) &lt;span class="op"&gt;/&lt;/span&gt; &lt;span class="dv"&gt;2&lt;/span&gt;) &lt;span class="op"&gt;+&lt;/span&gt; &lt;span class="dv"&gt;2&lt;/span&gt;,
                           answer_helper((n &lt;span class="op"&gt;-&lt;/span&gt; &lt;span class="dv"&gt;1&lt;/span&gt;) &lt;span class="op"&gt;/&lt;/span&gt; &lt;span class="dv"&gt;2&lt;/span&gt;) &lt;span class="op"&gt;+&lt;/span&gt; &lt;span class="dv"&gt;2&lt;/span&gt;)
        &lt;span class="cf"&gt;else&lt;/span&gt;:
            table[n] &lt;span class="op"&gt;=&lt;/span&gt; answer_helper(n &lt;span class="op"&gt;/&lt;/span&gt; &lt;span class="dv"&gt;2&lt;/span&gt;) &lt;span class="op"&gt;+&lt;/span&gt; &lt;span class="dv"&gt;1&lt;/span&gt;

        &lt;span class="cf"&gt;return&lt;/span&gt; table[n]

    &lt;span class="cf"&gt;return&lt;/span&gt; answer_helper(n)

&lt;span class="co"&gt;# for n in range(1, 65):&lt;/span&gt;
&lt;span class="co"&gt;#     print(&amp;quot;%s: %s&amp;quot; % (n, answer(n)))&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;hr /&gt;
&lt;p&gt;实际上做完了 level 3，就可以等 Google recruiter 回复了。而 Level 3 中难度最大的一题目，也就是考了一个简单的 &lt;a href="https://en.wikipedia.org/wiki/Dynamic_programming"&gt;DP&lt;/a&gt; 而已——事实上也不需要太复杂的 DP，稍微对 Functional Programming 中常见的 &lt;a href="https://en.wikipedia.org/wiki/Memoization"&gt;Memoization&lt;/a&gt; 手法有个印象，就能搞定了。&lt;/p&gt;
&lt;p&gt;&lt;a href="/static/image/2017/google_foobar_recruiter.png"&gt;&lt;img src="/static/image/2017/google_foobar_recruiter.png" /&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;我做完了 level 3 后，抱着玩一玩的心思，做 level 4 的第一题，直接就栽到了&lt;a href="https://en.wikipedia.org/wiki/Network_flow"&gt;网络流&lt;/a&gt;的大坑里，Google 也知道这类题比较难&lt;a href="#fn1" class="footnoteRef" id="fnref1"&gt;&lt;sup&gt;1&lt;/sup&gt;&lt;/a&gt;，因此给了 168 个小时的做答时间。于是我又翻开了那本尘封已久的《算法导论》，简单扫了下网络流那一章，最后花了几天的时间写了个 &lt;a href="https://en.wikipedia.org/wiki/Ford%25E2%2580%2593Fulkerson_algorithm"&gt;Ford-Fulkerson Algorithm&lt;/a&gt; 的 Python 实现。&lt;/p&gt;
&lt;hr /&gt;
&lt;p&gt;Problem 1 in level 4:&lt;/p&gt;
&lt;pre class="example"&gt;&lt;code&gt;Escape Pods
===========

You&amp;#39;ve blown up the LAMBCHOP doomsday device and broken the bunnies out of
Lambda&amp;#39;s prison - and now you need to escape from the space station as quickly
and as orderly as possible! The bunnies have all gathered in various locations
throughout the station, and need to make their way towards the seemingly endless
amount of escape pods positioned in other parts of the station. You need to get
the numerous bunnies through the various rooms to the escape pods.
Unfortunately, the corridors between the rooms can only fit so many bunnies at a
time. What&amp;#39;s more, many of the corridors were resized to accommodate the
LAMBCHOP, so they vary in how many bunnies can move through them at a time.

Given the starting room numbers of the groups of bunnies, the room numbers of
the escape pods, and how many bunnies can fit through at a time in each
direction of every corridor in between, figure out how many bunnies can safely
make it to the escape pods at a time at peak.

Write a function answer(entrances, exits, path) that takes an array of integers
denoting where the groups of gathered bunnies are, an array of integers denoting
where the escape pods are located, and an array of an array of integers of the
corridors, returning the total number of bunnies that can get through at each
time step as an int. The entrances and exits are disjoint and thus will never
overlap. The path element path[A][B] = C describes that the corridor going from
A to B can fit C bunnies at each time step. There are at most 50 rooms connected
by the corridors and at most 2000000 bunnies that will fit at a time.

For example, if you have:
entrances = [0, 1]
exits = [4, 5]
path = [
  [0, 0, 4, 6, 0, 0],  # Room 0: Bunnies
  [0, 0, 5, 2, 0, 0],  # Room 1: Bunnies
  [0, 0, 0, 0, 4, 4],  # Room 2: Intermediate room
  [0, 0, 0, 0, 6, 6],  # Room 3: Intermediate room
  [0, 0, 0, 0, 0, 0],  # Room 4: Escape pods
  [0, 0, 0, 0, 0, 0],  # Room 5: Escape pods
]

Then in each time step, the following might happen:
0 sends 4/4 bunnies to 2 and 6/6 bunnies to 3
1 sends 4/5 bunnies to 2 and 2/2 bunnies to 3
2 sends 4/4 bunnies to 4 and 4/4 bunnies to 5
3 sends 4/6 bunnies to 4 and 4/6 bunnies to 5

So, in total, 16 bunnies could make it to the escape pods at 4 and 5 at each
time step.  (Note that in this example, room 3 could have sent any variation of
8 bunnies to 4 and 5, such as 2/6 and 6/6, but the final answer remains the
same.)

Languages
=========

To provide a Python solution, edit solution.py
To provide a Java solution, edit solution.java

Test cases
==========

Inputs:
    (int list) entrances = [0]
    (int list) exits = [3]
    (int) path = [[0, 7, 0, 0], [0, 0, 6, 0], [0, 0, 0, 8], [9, 0, 0, 0]]
Output:
    (int) 6

Inputs:
    (int list) entrances = [0, 1]
    (int list) exits = [4, 5]
    (int) path = [[0, 0, 4, 6, 0, 0], [0, 0, 5, 2, 0, 0], [0, 0, 0, 0, 4, 4], [0, 0, 0, 0, 6, 6], [0, 0, 0, 0, 0, 0], [0, 0, 0, 0, 0, 0]]
Output:
    (int) 16

Use verify [file] to test your solution and see how it does. When you are
finished editing your code, use submit [file] to submit your answer. If your
solution passes the test cases, it will be removed from your home folder.
&lt;/code&gt;&lt;/pre&gt;
&lt;div class="sourceCode"&gt;&lt;pre class="sourceCode python"&gt;&lt;code class="sourceCode python"&gt;&lt;span class="im"&gt;import&lt;/span&gt; decimal
inf &lt;span class="op"&gt;=&lt;/span&gt; decimal.Decimal(&lt;span class="st"&gt;&amp;quot;Infinity&amp;quot;&lt;/span&gt;)

&lt;span class="kw"&gt;def&lt;/span&gt; answer(entrances, exits, path):
    transform(entrances, exits, path)
    flow &lt;span class="op"&gt;=&lt;/span&gt; &lt;span class="dv"&gt;0&lt;/span&gt;
    length &lt;span class="op"&gt;=&lt;/span&gt; &lt;span class="bu"&gt;len&lt;/span&gt;(path)
    flows &lt;span class="op"&gt;=&lt;/span&gt; [[&lt;span class="dv"&gt;0&lt;/span&gt; &lt;span class="cf"&gt;for&lt;/span&gt; i &lt;span class="kw"&gt;in&lt;/span&gt; &lt;span class="bu"&gt;range&lt;/span&gt;(length)] &lt;span class="cf"&gt;for&lt;/span&gt; j &lt;span class="kw"&gt;in&lt;/span&gt; &lt;span class="bu"&gt;range&lt;/span&gt;(length)]
    start &lt;span class="op"&gt;=&lt;/span&gt; &lt;span class="dv"&gt;0&lt;/span&gt;
    end &lt;span class="op"&gt;=&lt;/span&gt; length &lt;span class="op"&gt;-&lt;/span&gt; &lt;span class="dv"&gt;1&lt;/span&gt;
    &lt;span class="cf"&gt;while&lt;/span&gt; &lt;span class="va"&gt;True&lt;/span&gt;:
        ap_flow, parents &lt;span class="op"&gt;=&lt;/span&gt; bfs(start, end, path, flows)
        &lt;span class="cf"&gt;if&lt;/span&gt; ap_flow &lt;span class="op"&gt;==&lt;/span&gt; &lt;span class="dv"&gt;0&lt;/span&gt;:
            &lt;span class="cf"&gt;break&lt;/span&gt;
        flow &lt;span class="op"&gt;+=&lt;/span&gt; ap_flow
        v &lt;span class="op"&gt;=&lt;/span&gt; end
        &lt;span class="cf"&gt;while&lt;/span&gt; v &lt;span class="op"&gt;!=&lt;/span&gt; start:
            u &lt;span class="op"&gt;=&lt;/span&gt; parents[v]
            flows[u][v] &lt;span class="op"&gt;+=&lt;/span&gt; ap_flow
            flows[v][u] &lt;span class="op"&gt;-=&lt;/span&gt; ap_flow
            v &lt;span class="op"&gt;=&lt;/span&gt; u
    &lt;span class="cf"&gt;return&lt;/span&gt; flow

&lt;span class="kw"&gt;def&lt;/span&gt; bfs(start, end, path, flows):
    &lt;span class="kw"&gt;global&lt;/span&gt; inf
    length &lt;span class="op"&gt;=&lt;/span&gt; &lt;span class="bu"&gt;len&lt;/span&gt;(path)
    parents &lt;span class="op"&gt;=&lt;/span&gt; [&lt;span class="op"&gt;-&lt;/span&gt;&lt;span class="dv"&gt;1&lt;/span&gt;] &lt;span class="op"&gt;*&lt;/span&gt; length     &lt;span class="co"&gt;# parent table for reverse tracing path&lt;/span&gt;
    parents[start] &lt;span class="op"&gt;=&lt;/span&gt; &lt;span class="op"&gt;-&lt;/span&gt;&lt;span class="dv"&gt;2&lt;/span&gt;         &lt;span class="co"&gt;# differentiate start point from others&lt;/span&gt;

    queue &lt;span class="op"&gt;=&lt;/span&gt; []
    queue.append(start)
    &lt;span class="cf"&gt;while&lt;/span&gt; queue &lt;span class="kw"&gt;and&lt;/span&gt; parents[end] &lt;span class="op"&gt;==&lt;/span&gt; &lt;span class="op"&gt;-&lt;/span&gt;&lt;span class="dv"&gt;1&lt;/span&gt;:
        u &lt;span class="op"&gt;=&lt;/span&gt; queue.pop(&lt;span class="dv"&gt;0&lt;/span&gt;)
        &lt;span class="cf"&gt;for&lt;/span&gt; v &lt;span class="kw"&gt;in&lt;/span&gt; &lt;span class="bu"&gt;range&lt;/span&gt;(length):
            cf &lt;span class="op"&gt;=&lt;/span&gt; path[u][v] &lt;span class="op"&gt;-&lt;/span&gt; flows[u][v]
            &lt;span class="cf"&gt;if&lt;/span&gt; cf &lt;span class="op"&gt;&amp;gt;&lt;/span&gt; &lt;span class="dv"&gt;0&lt;/span&gt; &lt;span class="kw"&gt;and&lt;/span&gt; parents[v] &lt;span class="op"&gt;==&lt;/span&gt; &lt;span class="op"&gt;-&lt;/span&gt;&lt;span class="dv"&gt;1&lt;/span&gt;:
                queue.append(v)
                parents[v] &lt;span class="op"&gt;=&lt;/span&gt; u

    &lt;span class="cf"&gt;if&lt;/span&gt; parents[end] &lt;span class="op"&gt;==&lt;/span&gt; &lt;span class="op"&gt;-&lt;/span&gt;&lt;span class="dv"&gt;1&lt;/span&gt;:      &lt;span class="co"&gt;# if t can not been reached&lt;/span&gt;
        &lt;span class="cf"&gt;return&lt;/span&gt; &lt;span class="dv"&gt;0&lt;/span&gt;, parents

    v &lt;span class="op"&gt;=&lt;/span&gt; end
    delta &lt;span class="op"&gt;=&lt;/span&gt; inf
    &lt;span class="cf"&gt;while&lt;/span&gt; v &lt;span class="op"&gt;!=&lt;/span&gt; start:
        u &lt;span class="op"&gt;=&lt;/span&gt; parents[v]
        cf &lt;span class="op"&gt;=&lt;/span&gt; path[u][v] &lt;span class="op"&gt;-&lt;/span&gt; flows[u][v]
        delta &lt;span class="op"&gt;=&lt;/span&gt; &lt;span class="bu"&gt;min&lt;/span&gt;(delta, cf)
        v &lt;span class="op"&gt;=&lt;/span&gt; u

    &lt;span class="cf"&gt;return&lt;/span&gt; delta, parents

&lt;span class="kw"&gt;def&lt;/span&gt; transform(entrances, exits, path):
    &lt;span class="co"&gt;# transform multi-source, multi-sink flow network to single-source,&lt;/span&gt;
    &lt;span class="co"&gt;# single-sink flow network&lt;/span&gt;
    &lt;span class="kw"&gt;global&lt;/span&gt; inf
    length &lt;span class="op"&gt;=&lt;/span&gt; &lt;span class="bu"&gt;len&lt;/span&gt;(path)
    entrances &lt;span class="op"&gt;=&lt;/span&gt; [i &lt;span class="op"&gt;+&lt;/span&gt; &lt;span class="dv"&gt;1&lt;/span&gt; &lt;span class="cf"&gt;for&lt;/span&gt; i &lt;span class="kw"&gt;in&lt;/span&gt; entrances]
    exits &lt;span class="op"&gt;=&lt;/span&gt; [i &lt;span class="op"&gt;+&lt;/span&gt; &lt;span class="dv"&gt;1&lt;/span&gt; &lt;span class="cf"&gt;for&lt;/span&gt; i &lt;span class="kw"&gt;in&lt;/span&gt; exits]
    &lt;span class="cf"&gt;for&lt;/span&gt; row &lt;span class="kw"&gt;in&lt;/span&gt; path:
        row.insert(&lt;span class="dv"&gt;0&lt;/span&gt;, &lt;span class="dv"&gt;0&lt;/span&gt;)
        row.append(&lt;span class="dv"&gt;0&lt;/span&gt;)
    start_row &lt;span class="op"&gt;=&lt;/span&gt; [&lt;span class="dv"&gt;0&lt;/span&gt;] &lt;span class="op"&gt;*&lt;/span&gt; (length &lt;span class="op"&gt;+&lt;/span&gt; &lt;span class="dv"&gt;2&lt;/span&gt;)
    &lt;span class="cf"&gt;for&lt;/span&gt; i &lt;span class="kw"&gt;in&lt;/span&gt; entrances:
        start_row[i] &lt;span class="op"&gt;=&lt;/span&gt; inf
    path.insert(&lt;span class="dv"&gt;0&lt;/span&gt;, start_row)
    end_row &lt;span class="op"&gt;=&lt;/span&gt; [&lt;span class="dv"&gt;0&lt;/span&gt;] &lt;span class="op"&gt;*&lt;/span&gt; (length &lt;span class="op"&gt;+&lt;/span&gt; &lt;span class="dv"&gt;2&lt;/span&gt;)
    &lt;span class="cf"&gt;for&lt;/span&gt; i &lt;span class="kw"&gt;in&lt;/span&gt; exits:
        path[i][&lt;span class="op"&gt;-&lt;/span&gt;&lt;span class="dv"&gt;1&lt;/span&gt;] &lt;span class="op"&gt;=&lt;/span&gt; inf
    path.append(end_row)
    &lt;span class="cf"&gt;return&lt;/span&gt; entrances, exits, path&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;hr /&gt;
&lt;p&gt;测试通过后做第 8 道题目，到这里我一眼扫完题目，已经连题目要考什么算法都看不出来了，加上也没有再多的时间来继续“玩”这个游戏，索性就放弃了。&lt;/p&gt;
&lt;hr /&gt;
&lt;p&gt;Problem 2 in level 4:&lt;/p&gt;
&lt;pre class="example"&gt;&lt;code&gt;Running with Bunnies
====================

You and your rescued bunny prisoners need to get out of this collapsing death
trap of a space station - and fast! Unfortunately, some of the bunnies have been
weakened by their long imprisonment and can&amp;#39;t run very fast. Their friends are
trying to help them, but this escape would go a lot faster if you also pitched
in. The defensive bulkhead doors have begun to close, and if you don&amp;#39;t make it
through in time, you&amp;#39;ll be trapped! You need to grab as many bunnies as you can
and get through the bulkheads before they close.

The time it takes to move from your starting point to all of the bunnies and to
the bulkhead will be given to you in a square matrix of integers. Each row will
tell you the time it takes to get to the start, first bunny, second bunny, ...,
last bunny, and the bulkhead in that order. The order of the rows follows the
same pattern (start, each bunny, bulkhead). The bunnies can jump into your arms,
so picking them up is instantaneous, and arriving at the bulkhead at the same
time as it seals still allows for a successful, if dramatic, escape. (Don&amp;#39;t
worry, any bunnies you don&amp;#39;t pick up will be able to escape with you since they
no longer have to carry the ones you did pick up.) You can revisit different
spots if you wish, and moving to the bulkhead doesn&amp;#39;t mean you have to
immediately leave - you can move to and from the bulkhead to pick up additional
bunnies if time permits.

In addition to spending time traveling between bunnies, some paths interact with
the space station&amp;#39;s security checkpoints and add time back to the clock. Adding
time to the clock will delay the closing of the bulkhead doors, and if the time
goes back up to 0 or a positive number after the doors have already closed, it
triggers the bulkhead to reopen. Therefore, it might be possible to walk in a
circle and keep gaining time: that is, each time a path is traversed, the same
amount of time is used or added.

Write a function of the form answer(times, time_limit) to calculate the most
bunnies you can pick up and which bunnies they are, while still escaping through
the bulkhead before the doors close for good. If there are multiple sets of
bunnies of the same size, return the set of bunnies with the lowest prisoner IDs
(as indexes) in sorted order. The bunnies are represented as a sorted list by
prisoner ID, with the first bunny being 0. There are at most 5 bunnies, and
time_limit is a non-negative integer that is at most 999.

For instance, in the case of
[
  [0, 2, 2, 2, -1],  # 0 = Start
  [9, 0, 2, 2, -1],  # 1 = Bunny 0
  [9, 3, 0, 2, -1],  # 2 = Bunny 1
  [9, 3, 2, 0, -1],  # 3 = Bunny 2
  [9, 3, 2, 2,  0],  # 4 = Bulkhead
]

and a time limit of 1, the five inner array rows designate the starting point,
bunny 0, bunny 1, bunny 2, and the bulkhead door exit respectively. You could
take the path:

Start End Delta Time Status
    -   0     -    1 Bulkhead initially open
    0   4    -1    2
    4   2     2    0
    2   4    -1    1
    4   3     2   -1 Bulkhead closes
    3   4    -1    0 Bulkhead reopens; you and the bunnies exit

With this solution, you would pick up bunnies 1 and 2. This is the best
combination for this space station hallway, so the answer is [1, 2].

Languages
=========

To provide a Python solution, edit solution.py
To provide a Java solution, edit solution.java

Test cases
==========

Inputs:
    (int) times = [[0, 1, 1, 1, 1], [1, 0, 1, 1, 1], [1, 1, 0, 1, 1], [1, 1, 1, 0, 1], [1, 1, 1, 1, 0]]
    (int) time_limit = 3
Output:
    (int list) [0, 1]

Inputs:
    (int) times = [[0, 2, 2, 2, -1], [9, 0, 2, 2, -1], [9, 3, 0, 2, -1], [9, 3, 2, 0, -1], [9, 3, 2, 2, 0]]
    (int) time_limit = 1
Output:
    (int list) [1, 2]

Use verify [file] to test your solution and see how it does. When you are
finished editing your code, use submit [file] to submit your answer. If your
solution passes the test cases, it will be removed from your home folder.
&lt;/code&gt;&lt;/pre&gt;
&lt;hr /&gt;
&lt;h2 id="recruiter-电话面试"&gt;Recruiter 电话面试&lt;/h2&gt;
&lt;p&gt;做完 level 3 之后，我就忙我的事情去了，虽然我那时并没有找份全职工作的计划，但是对 Google recruiter 的回复还是有些小期待的。果不其然，11 月 8 日，收到了 Google recruiter 的邮件：&lt;/p&gt;
&lt;p&gt;&lt;a href="/static/image/2017/google_foobar_recruiter_first_email.jpg"&gt;&lt;img src="/static/image/2017/google_foobar_recruiter_first_email.jpg" /&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;于是花了一天的时间，更新了下简历，回复了邮件。接下来 Google recruiter 问了下个人倾向于什么岗位，可选 SRE 或者 SWE，我的答复是 SRE。&lt;/p&gt;
&lt;p&gt;然后在 11 月 24 日收到了 Google recruiter 的电话，全程英文聊了约半个小时：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;一是了解个人情况&lt;/li&gt;
&lt;li&gt;二是告知了 SRE 岗位 Head Count 十分紧张，需要等 17 年才可能有“坑”&lt;/li&gt;
&lt;li&gt;三是问了我 20 多个照本宣科的关于计算机基础知识的题目&lt;/li&gt;
&lt;li&gt;最后告诉我说即便是 google foo.bar 通过了，还要有两轮电话面试……&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;而我在网上查到的资料是，有人通过了 foobar 之后，Google 直接就给了 onsite：&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Google’s recruiting process is well documented online, and from this point my experience was pretty typical. The only difference is that I didn’t need to go through a technical phone screen since I had already demonstrated some proficiency with coding through the foo.bar exercises.&lt;/p&gt;
&lt;p&gt;— &lt;a href="https://thehustle.co/the-secret-google-interview-that-landed-me-a-job" class="uri"&gt;https://thehustle.co/the-secret-google-interview-that-landed-me-a-job&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;我个人推想是，相较于“本土”求职者，海外求职者一次 onsite 的成本比较高，因为 onsite 要谨慎一些。&lt;/p&gt;
&lt;p&gt;电话聊完之后，recruiter 发送了一个 self-rating form 给我，让你自助式地评估下自己的技术水准，形式如下：&lt;/p&gt;
&lt;p&gt;&lt;a href="/static/image/2017/google_foobar_self_rating_form.png"&gt;&lt;img src="/static/image/2017/google_foobar_self_rating_form.png" /&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;与此同时，recruiter 还发送了一份长达 6 页的非常详尽的求职面试指南文档《Guide to Getting an SRE job with Google》，内容包含了岗位需求、面试要求、考查题目范围、样例面试题目等等。&lt;/p&gt;
&lt;p&gt;&lt;a href="/static/image/2017/google_foobar_sre_guide.png"&gt;&lt;img src="/static/image/2017/google_foobar_sre_guide.png" /&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;还有一个非常贴心的细节是，Google 安排面试时，会特别问你有没有一些身体上的 disability，是否需要一些特别的协助，诸如“documents in an alternate format, a sign language interpreter, or specialized equipment.”等等&lt;/p&gt;
&lt;p&gt;&lt;a href="/static/image/2017/google_foobar_celebrate_difference.jpg"&gt;&lt;img src="/static/image/2017/google_foobar_celebrate_difference.jpg" /&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;我看到这封邮件时真的是有些感动——相较于我以前经历过的国内公司的各种面试，这种对比实在是太过强烈——这也让我开始理解，Google 能在竞争如此激烈的互联网领域长期保持领先， 不是没有原因的——一个公司对面试者展现出足够的尊重，换来的必然也是面试者对面试的重视。相对而言，这种相互之间的尊重其实也很大程度上降低了双方的成本，一举两得。&lt;/p&gt;
&lt;h2 id="第一轮技术电话面试"&gt;第一轮技术电话面试&lt;/h2&gt;
&lt;p&gt;12 月 9 日，来自 Google Sydney 的第一轮电面。限于 NDA，这里我不能透露具体题目的内容。面试约一个小时，全程英文，问了三个题目，包括一个大数估算题、一个操作系统概念题、一个算法题。Google 邮件中有一个 Google Docs 的链接用来共享屏幕写代码的，但是实际上面试中并没有用到，可能是面试官不喜欢吧。&lt;/p&gt;
&lt;p&gt;Anyway，这轮面试表现还不错，特别是第二道题目的表现远超面试官的预期，面试官说这道题我的表现是他面过的所有求职者中最棒的，因此面试快结束的时候面试官告诉我说他这一轮会刷掉相当多的人，过了他这一轮后一定要多去“study, study, study, practice, practice, practice”——事后想想，应该就是去多刷刷 LeetCode 吧……&lt;/p&gt;
&lt;h2 id="第二轮技术电话面试"&gt;第二轮技术电话面试&lt;/h2&gt;
&lt;p&gt;1 月 13 日，来自 Google Sydney 的第二轮电面，仍然是全程英文。面试约一个小时，考了 Bash/Python/C 的知识。这次又没有用上 Google Docs 链接，所有题目都是面试官“口述”的……最后的 C 语言题目还涉及到了位运算的一些考点，我听了第一遍完全没听明白，反复了 5 分钟之后，其中充斥着诸如 “Pardon”、“Left bracket”、“Oh, I’m sorry”、 “Ampersand”、“Question mark”、“Exclamation mark” 之类的单词，最后总算搞明白了题意，不难，很快给出了答复。&lt;/p&gt;
&lt;p&gt;这轮面试我自我感觉题目都不难，都是很基础的知识，但是英文听说能力要求非常高。好在我自己英文能力还可以，虽然开始时会有些紧张，但只要说顺了，后面的听说就都很顺畅， 毫无滞碍。我没有去特别考过 TOFEL 和 GRE，也没有特别训练过，想来应该还是自己多年坚持英文读写实践的积攒下的功底。&lt;/p&gt;
&lt;h2 id="sydney-onsite"&gt;Sydney onsite&lt;/h2&gt;
&lt;p&gt;1 月 16 日收到了 Google recruiter 的邮件，告知电话面试通过，可以去 Sydney office onsite 了。考虑到 2 月要过个春节长假，加上办签证需要一些时间，以及自己也需要一些时间从日常工作状态切换到面试找工作状态，所以和 Google recruiter 联系，暂时把 onsite 的时间约到了 3 月初。&lt;/p&gt;
&lt;p&gt;&lt;a href="/static/image/2017/google_foobar_onsite_email.png"&gt;&lt;img src="/static/image/2017/google_foobar_onsite_email.png" /&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Google 的 onsite 流程安排得非常完备：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Google 会报销往返机票、3 天的 4 星级酒店、签证费用，以及每天 50 AUD 的餐费补助&lt;/li&gt;
&lt;li&gt;会有专门的第三方，负责和你联系行程安排、预订机票酒店&lt;/li&gt;
&lt;li&gt;onsite 结束之后，会有专门的第三方，来根据你的 invoice，来报销（reimburse）你的餐费&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;还有一个非常有意思的细节，Google Sydney 专门做了一个导航&lt;a href="https://sites.google.com/site/sydneyofficedirections/"&gt;页面&lt;/a&gt;，告诉你从机场到 office 的交通方式和路线。虽然这些都不是什么太重要的事情，但是 Google 的招聘在细节方面做得真的是非常棒，远超我的预期。&lt;/p&gt;
&lt;p&gt;我原本是打算安排一个月的时间认真准备下 onsite 面试的，但事与愿违。一来我当时原本就没有找一份全职工作的计划，Google foo.bar 这个游戏也一直是抱着玩玩的态度，但是 Google 的招聘体验实在是太好，同时也想到如果能去 Google SRE 体验下 Google 的基础设施，于我而言也是不错的职业选择，因此就玩到了 onsite；二来我个人平时非常忙，有很多自己的事情，拿出一个月的时间来“刷题”，于我而言时间成本太大了；三来是过了个春节；四是春节后我随手在豆瓣上写的一篇&lt;a href="https://www.douban.com/note/606247970/"&gt;文章&lt;/a&gt;引起了广泛的关注，各种交流回复又耗掉了我大量的时间。所以到最后，我大概只剩下 10 天左右的时间，来“全职”准备这个 onsite 面试。我也没做别的事情，就是读了读《算法导论》和刘新宇先生的新书《&lt;a href="https://book.douban.com/subject/26931430/"&gt;算法新解&lt;/a&gt;》，并提交了一些 &lt;a href="https://github.com/liuxinyu95/AlgoXY/commits?author=xiaohanyu"&gt;Patch&lt;/a&gt;——而最重要的传说中的 LeetCode，我一道题也没有刷……这可能是导致最终面试失败的重要原因之一吧。&lt;/p&gt;
&lt;p&gt;3 月 11 日从杭州出发飞 Sydney，航程 10+ 小时，算起来自己还是第一次坐这么长时间的航班。 12 日上午到 Sydney，见了见朋友，在 Darling Harbour 和悉尼歌剧院周边逛了逛，晚上宿 Darling Harbour 旁边的酒店，睡得很不错。&lt;/p&gt;
&lt;p&gt;3 月 12 日早起步行去 Google Sydney office，领了访客证之后被 recruiter 带着去会议室。面试之前还是有些紧张——可能是自己一个人在家工作久了，出去交流，而且还是全英文， 因此心率有些高。去了趟洗手间，洗了把脸挠挠头平静了下心情，就“上战场”了。&lt;/p&gt;
&lt;p&gt;好在第一轮面试的第一道题不难，我听完了就有了思路，因此有了一个还不错的开端，这之后加起来总共 5 轮面试，都没有出现过于紧张的情况。面试完后自评感觉还是不错的，觉得应该是有 offer 了。&lt;/p&gt;
&lt;p&gt;说下具体的 onsite 面试流程吧。限于 NDA，我这里并不能透露具体的题目内容，只会说明下考查的大概范围。Google 的 onsite 面试共有 5 轮，每轮 45 分钟，一般会从上午 10 点开始，上午 2–3 轮，然后 recruiter 会带你去 Google 那天下闻名的食堂吃个午饭， 让你休整下放松下心情，饭后回到会议室再面 2–3 轮。&lt;/p&gt;
&lt;p&gt;SRE 岗 5 轮面试大致考查如下方向：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Coding &amp;amp; Algorithm&lt;/li&gt;
&lt;li&gt;System Design&lt;/li&gt;
&lt;li&gt;Troubleshooting&lt;/li&gt;
&lt;li&gt;Networking&lt;/li&gt;
&lt;li&gt;Linux/UNIX system&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;其中，Coding &amp;amp; Algorithm 方面，编程语言不限，选择自己擅长的就好（我个人推荐用 Python，写起来比 C++/Java 要快很多）；Linux/UNIX system 方面，文件系统、内存、系统调用、进程调度方面都有可能考，而且几乎没有办法准备，也没有办法刷题，靠的是平时的积累；SRE 岗还会考一些 Shell Script 方面的细节问题；Networking 方面考的不多， 需要你对 Web Application 的常见网络架构有一个基础的理解，经典的题目有“从浏览器输入一个 URL 到页面渲染完成，其中发生了什么？”、“DNS 的基本原理”等等； Troubleshooting考查的是现实工作场景中如何 debug 的能力；System design 会考查在 45 分钟之内从无到有写一个具有良好 API 接口、满足基础性能要求的一个 library/class 层面上的小程序。&lt;/p&gt;
&lt;p&gt;这里还有一些让我印象十分深刻的细节：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;会议室的桌子上有一个小的电子设备，上面会显示你当前的 onsite 进度，诸如当前面试官是谁，下一轮是谁，每轮面试开始和结束的时间等等。&lt;/li&gt;
&lt;li&gt;面试者有一个电脑，上面会预先打开并设置好 5 个浏览器的 Tab，每个 Tab 都是一个 Google Docs 文档，分别对应 5 轮 onsite 面试。&lt;/li&gt;
&lt;li&gt;与此同时，面试者的电脑屏幕会同步投射到会议室里的两块液晶屏上，这样面试官和面试者既可以在自己电脑屏幕，也可以在液晶屏上，看到写代码的流程。&lt;/li&gt;
&lt;li&gt;基本上，Google 的面试官会把面试时间和节奏控制得非常好，而且不会迟到；在此轮面试结束前的 5 分钟，下一轮面试的面试官就在会议室外面等待了。&lt;/li&gt;
&lt;li&gt;Google 会保证面试者在 onsite 期间，在任何一个时间点都有人陪伴——这可能是为了保密要求——Google 的 office 是禁止拍照的。我在 onsite 午饭后，我的面试官因为一些临时事件要迟到几分钟，因此 recruiter 在把我送到会议室就马上就找来了另一位工程师陪我闲聊了一段时间。&lt;/li&gt;
&lt;li&gt;每一轮面试结束，面试官都会把你在 Google Docs 上写下的东西备份下来，用来做后续的评估。&lt;/li&gt;
&lt;li&gt;除了 Google Docs，会议室里还有两个白板，可以用来写代码，也可以用来画图讨论。&lt;/li&gt;
&lt;li&gt;我经历的 5 轮面试 6 个面试官中，有一半看上去像 35 岁以上的&lt;a href="#fn2" class="footnoteRef" id="fnref2"&gt;&lt;sup&gt;2&lt;/sup&gt;&lt;/a&gt;。&lt;/li&gt;
&lt;li&gt;有一个面试官看了我的简历，说：“Ah, you’re a Chinese, then you can speak more languages than me. I’m a native English speaker and I can only speak English.”&lt;/li&gt;
&lt;li&gt;有一轮面试是两个面试官，其中一个面试官主导面试，另一个面试官在旁边记录一些东西——我猜有可能是见习面试官在学习该如何面试吧。同样是这轮面试，我在 Google Docs 上写代码，由于是写 Python，会有“缩进”的问题，面试官一边提醒我说“Don’t care about indentation”，同时又在 Google Docs 里帮我设置了写代码用的等宽字体。&lt;/li&gt;
&lt;li&gt;所有的饮料都是免费的，:-)&lt;/li&gt;
&lt;li&gt;午饭自助餐也是免费的，果汁是大厨现榨的，:-)&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;就 onsite 面试整体的考查思路来看，大体上还是需要面试者尽可能地主动，不断地去 push 面试官给出一些 hint 或者正确与否的 feedback，在这个基础上尽可能地去优化解决方案——这个优化可能上算法复杂度上的优化，可能是 test case 的覆盖，可能是架构上的优化等等吧。我自我感觉，onsite 面试中，比较忌讳长时间的“冷场”，你可以跟面试官请求一两分钟来思考，但是过了这一两分钟，无论有什么样的思考，一定要说出来，让面试官看到你的思考过程，而不是思考十几分钟，最后给出一个答案——这个答案很可能是错的。&lt;/p&gt;
&lt;p&gt;这样的面试风格和考查思路也让面试者的体力和脑力消耗非常大——一是需要精力和脑力高度集中，这种状态维持下来是非常累的；二是 onsite 面试，无论是写代码、还是手头可能的软硬件设备，以及周边的环境，都和平时的工作状态差异太大，这就让临场发挥和心理素质成为一个非常重要的决定面试结果的因素；三是人在解决问题时，多数都是一个人静心思考， 而 onsite 面试则是需要在有限的时间有限的资源限制下并且还要在外部不断 push 的同时解决一个可能未知的问题，有时会难免紧张；特别是碰到没有思路的题目卡壳之后，状态会变得非常差。&lt;/p&gt;
&lt;p&gt;我的 onsite 面试从上午 10 点开始，一直持续到下午 15:00，除了中间和 recruiter 一起吃了顿午饭休整了半小时外，中途没有任何休息。面试结束走出 Google office 的时候， 感觉人有些晃晃忽忽的，于是就在路边长椅休息了 30 分钟，晒晒太阳。我当时自评感觉还是蛮不错的——有一道算法题，给出了 brute force 的代码后也给出了最优解决方案的思路， 但是限于时间并没有给出最终的优化版的代码，这个应该是比较大的瑕疵；还有个小瑕疵是， Troubleshooting 题，由于以前没有碰到过类似的题目的解答思路，在前面绕了很长时间， 给出了很多“正确但无用”的大段阐述。相比较而言，别的题目都是面试官主动问面试者问题， 而面试者需要给出答案；但是 Troubleshooting 更多的是需要面试者去问面试官问题，面试官给出每个问题的答案，面试者通过这些信息，逐渐缩小 Troubleshooting 的目标，最终定位到问题所在。我一开始完全没有理解到 Troubleshooting 正确的解题思路和交流方式，一直傻傻地等着面试官问我问题，而面试官也在一直等着我问他问题，这样他好给出答案，推进 Troubleshooting 的过程，就这样耽误了很长时间。等到我后来明白了应对 Troubleshooting 题目正确的交流方式怎么一回事时，时间已然所剩不多了，所以到最后这个题也没有答得特别好。我后来和一个同样面试过 Google 的朋友前辈探讨了下这个问题， 他说“我所经历的面试，都是要竭力揣测和理解面试官的心思，他想考什么知识点。而我面试别人的的时候总是在竭力理解对方想说什么，生怕错过对方的闪光点”。&lt;/p&gt;
&lt;p&gt;剩下其余别的题目，我自评都没有太大的问题，所以我想如果 Google 不是标准太严苛并且不刻意卡人的话，我应该是通过 onsite 了。不过很可惜，几周之后还是收到了 Google 的拒信：&lt;/p&gt;
&lt;p&gt;&lt;a href="/static/image/2017/google_foobar_rejection.png"&gt;&lt;img src="/static/image/2017/google_foobar_rejection.png" /&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;拒信里所说的 Troubleshooting 和 Algorithm 方面的问题，我是有所预料的，但是“you didn’t make much progress in the system design” 实在是让我有些莫名其妙，我最终也没想起来 system design 哪里出了差错。不过木已成舟，我倒并没有特别在意这个结果， 相较于很多公司面试后杳无音信的“默拒”，Google 的这个 “constructive feedback”已经算是不错的了。还有，再怎么说，蹭了机票酒店在澳洲玩了一圈，怎么着也不是个亏本的买卖，对吧？&lt;/p&gt;
&lt;h2 id="总结"&gt;总结&lt;/h2&gt;
&lt;p&gt;1 轮 foo.bar，2.5 轮电话面试，5 轮 onsite 面试，持续 4 个月，总体耗时 3–4 周， 尽管没有拿到 offer，但这依然是一段很有意思的经历，引发了我很多思考。&lt;/p&gt;
&lt;p&gt;整个应聘的流程，至少接触了 4 位 recruiter，8 个面试官，2 个第三方服务者，算上人力的时间成本，加上 onsite 的机票酒店餐饮签证成本，最后再考虑下 onsite 的通过率， 我估计 Google 要招聘到一个合格的员工，成本至少是在十万人民币级别的。可见顶尖的人才是相当昂贵的，这还仅仅只是招聘成本。&lt;/p&gt;
&lt;p&gt;话说回来，于我而言，自信一点地说，虽然 Google 这加起来 8.5 轮的技术面试考查足够广泛，但是这依然只覆盖到了我所有计算机知识储备的 1/10 左右。在前端 CSS/JavaScript、Functional Programming (Lisp/Scheme)、Web Development (Django/Flask/HTTP/RESTful)，Automation Tools (Ansible/Jenkins/CI)、 Emacs/Vim/Git、LaTeX/TikZ 等等我日常工作中广泛使用的技术或工具，Google 的面试都没有考查。&lt;/p&gt;
&lt;p&gt;所以如何准确地评估一个人的技术能力，是招聘中的最大难题。就现在的 IT 技术招聘体制而言，大多数公司采用的无非就是在一定的时间和资源限制下，解决一些面试官心中有明确标准答案的 puzzles——但是这种选拔真得能很好的反应一个面试者在实际工作中的能力么&lt;a href="#fn3" class="footnoteRef" id="fnref3"&gt;&lt;sup&gt;3&lt;/sup&gt;&lt;/a&gt;？ 无妨举几个例子。&lt;/p&gt;
&lt;p&gt;&lt;a href="https://brew.sh/"&gt;Homebrew&lt;/a&gt; 是 macOS 上应用最广泛的包管理器，用 Ruby 实现，截止到 2017 年 4 月，在 Github 上有 7000+ 个 star、13000+ 个 commit、540+ 个 contributor。其作者 &lt;a href="https://github.com/mxcl"&gt;Max Howell&lt;/a&gt; 去 Google 面试时，因为一道基础的 Invert Binary Tree 的算法 puzzle 没有答好而被拒，事后 Max Howell 在 Twitter 上说：&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Google: 90% of our engineers use the software you wrote (Homebrew), but you can’t invert a binary tree on a whiteboard so fuck off.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;这个事情在&lt;a href="https://www.zhihu.com/question/31202353"&gt;知乎&lt;/a&gt;、&lt;a href="https://www.quora.com/Whats-the-logic-behind-Google-rejecting-Max-Howell-the-author-of-Homebrew-for-not-being-able-to-invert-a-binary-tree"&gt;Quora&lt;/a&gt;、&lt;a href="https://news.ycombinator.com/item?id=9695102"&gt;HackerNews&lt;/a&gt; 以及很多社区引起了相当广泛的讨论。&lt;/p&gt;
&lt;p&gt;&lt;a href="http://david.heinemeierhansson.com/"&gt;DHH&lt;/a&gt;，&lt;a href="http://rubyonrails.org/"&gt;Rails&lt;/a&gt; 的作者，发 Twitter 说：&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Hello, my name is David. I would fail to write bubble sort on a whiteboard. I look code up on the internet all the time. I don’t do riddles.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;相关讨论：&lt;a href="https://news.ycombinator.com/item?id=13739329"&gt;HackerNews&lt;/a&gt;。&lt;/p&gt;
&lt;p&gt;Quora 上还有一个非常有意思的讨论：&lt;a href="https://www.quora.com/Can-every-CS-professor-pass-Googles-interview"&gt;Can every CS professor pass Google’s interview?&lt;/a&gt;，推荐看看，很有意思。有一个 UIUC 的 PhD 是这样说的：&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;No, as far as software engineering positions are concerned.&lt;/p&gt;
&lt;p&gt;Interviewing Google-style, coding on whiteboards, and other skills and knowledge needed for software engineering positions are learned skills. Professors generally do not gain these skills during the course of their jobs.&lt;/p&gt;
&lt;p&gt;I would be willing to bet several thousand dollars that at least half of my CS professors at UIUC would fail the normal Google software engineer interview process, especially the older ones. Most of them would never pursue such a position in any case.&lt;/p&gt;
&lt;p&gt;— &lt;a href="https://www.quora.com/Can-every-CS-professor-pass-Googles-interview/answer/Shane-Ryoo" class="uri"&gt;https://www.quora.com/Can-every-CS-professor-pass-Googles-interview/answer/Shane-Ryoo&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;而事实上，这几年关于 &lt;a href="https://medium.com/@evnowandforever/f-you-i-quit-hiring-is-broken-bb8f3a48d324"&gt;Hiring Is Broken&lt;/a&gt; 的&lt;a href="https://news.ycombinator.com/item?id=11579757"&gt;讨论&lt;/a&gt;不绝于耳，以至于 Github 有人专门建立了一个项目，就叫 &lt;a href="https://github.com/poteto/hiring-without-whiteboards"&gt;hiring-without-whiteboards&lt;/a&gt;。这个项目列出了几百家不采用白板写代码面试方式的公司——我粗略看了下，这些公司更多的时采用更接近于真实工作方式的通过 Take-home project + onsite discuss 的方式来进行招聘。&lt;/p&gt;
&lt;p&gt;所以 Hiring 到底是不是 Broken，这个问题归根结底是怎样在一定的资源限制下（包括时间、金钱等等）快速评估一个人的技术能力。事实上最好的评估一个人的技术能力的办法， 就是和他一起工作一段时间，但是这个成本，无论是时间成本还是金钱成本，无论是对个人还是公司，都太高了。而我也越来越有种感觉，就是流水线化标准的 Phone Screening + Onsite Interview，恐怕也会越来越不再适应新时代的发展了。&lt;/p&gt;
&lt;p&gt;Hiring 会走向何方？我认为未鹏几年前的的文章《&lt;a href="http://mindhacks.cn/2011/11/04/how-to-interview-a-person-for-two-years/"&gt;怎样花两年时间去面试一个人&lt;/a&gt;》提供了一个很好的思路。&lt;/p&gt;
&lt;p&gt;此记。&lt;/p&gt;
&lt;section class="footnotes"&gt;
&lt;hr /&gt;
&lt;ol&gt;
&lt;li id="fn1"&gt;&lt;p&gt;事实上，对于非专业的算法选手，网络流算法的在实际应用中是相当少见的，&lt;a href="https://www.zhihu.com/question/54539746/answer/141266553"&gt;这里&lt;/a&gt;有现任搜狗公司 CEO 王小川先生参加 96 年 IOI 比赛时的一个小故事。&lt;a href="#fnref1"&gt;↩&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;
&lt;li id="fn2"&gt;&lt;p&gt;所以有些诸如“编程是个青春饭，只能干到 35 岁”的说法，应该是个伪命题吧，:-)&lt;a href="#fnref2"&gt;↩&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;
&lt;li id="fn3"&gt;&lt;p&gt;知乎上有一些很有价值的讨论，参考&lt;a href="https://www.zhihu.com/question/48743482"&gt;这里&lt;/a&gt;和&lt;a href="https://www.zhihu.com/question/56065457"&gt;这里&lt;/a&gt;。&lt;a href="#fnref3"&gt;↩&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;/section&gt;
</content>
  </entry>
  <entry>
    <id>tag:xiaohanyu.me,2017-04-25:/posts/2017-04-26-notes-about-migrating-data/</id>
    <title type="html">Blog 数据迁移草记</title>
    <published>2017-04-25T16:11:07Z</published>
    <updated>2014-04-28T16:31:07Z</updated>
    <link rel="alternate" href="http://xiaohanyu.me/posts/2017-04-26-notes-about-migrating-data/"/>
    <content type="html">&lt;p&gt;我发现我以前的 &lt;a href="http://cnlox.is-programmer.com/"&gt;Blog&lt;/a&gt; 还是有挺多访问流量的，以前写的文章虽然有一半是流水帐，但毕竟还是记录了自己的成长，因此还是有点“敝帚自珍”的。is-programmer 最近也不是太稳定， 说不定哪天就挂了，因此我又花了快两周的时间，把原有 Blog 上的 126 篇文章全部迁移了过来。这里草记下数据迁移过程，仅做备忘。&lt;/p&gt;
&lt;p&gt;一般而言，&lt;a href="https://en.wikipedia.org/wiki/User-generated_content"&gt;UGC&lt;/a&gt; 平台只有在关闭的时候才会提供一个数据导出的选项，默认情况下，一般都不会提供这个选项，否则用户迁移起来太容易，对一个 UGC 产品来说可不是什么太好的事情。&lt;/p&gt;
&lt;p&gt;因此要拿到我原有的 126 篇文章的数据，比较土的办法就是一篇一篇地 Copy &amp;amp; Paste，稍微高级一些的方法就是写个小爬虫，把数据爬下来，再做处理。&lt;/p&gt;
&lt;p&gt;首先是拿到 126 篇文章的的一些基础数据：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;标题&lt;/li&gt;
&lt;li&gt;URL&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;方式是通过 Wget 和 Bash 的 &lt;code class="sourceCode bash" rundoc-language="sh"&gt;&lt;span class="kw"&gt;for&lt;/span&gt;&lt;/code&gt; 循环：&lt;/p&gt;
&lt;div class="sourceCode"&gt;&lt;pre class="sourceCode bash"&gt;&lt;code class="sourceCode bash"&gt;$ &lt;span class="kw"&gt;for&lt;/span&gt; &lt;span class="ex"&gt;i&lt;/span&gt; in &lt;span class="kw"&gt;`&lt;/span&gt;&lt;span class="fu"&gt;seq&lt;/span&gt; 1 26&lt;span class="kw"&gt;`;&lt;/span&gt; &lt;span class="kw"&gt;do&lt;/span&gt; &lt;span class="fu"&gt;wget&lt;/span&gt; -c http://cnlox.is-programmer.com/\?page\=&lt;span class="va"&gt;$i&lt;/span&gt; -O &lt;span class="va"&gt;$i&lt;/span&gt;.html&lt;span class="kw"&gt;;&lt;/span&gt; &lt;span class="kw"&gt;done&lt;/span&gt;

$ &lt;span class="fu"&gt;ls&lt;/span&gt;
&lt;span class="ex"&gt;1.html&lt;/span&gt;    11.html   13.html   15.html   17.html   19.html   20.html   22.html   24.html   26.html   4.html    6.html    8.html
&lt;span class="ex"&gt;10.html&lt;/span&gt;   12.html   14.html   16.html   18.html   2.html    21.html   23.html   25.html   3.html    5.html    7.html    9.html

$ &lt;span class="kw"&gt;for&lt;/span&gt; &lt;span class="ex"&gt;i&lt;/span&gt; in &lt;span class="kw"&gt;`&lt;/span&gt;&lt;span class="fu"&gt;seq&lt;/span&gt; 1 26&lt;span class="kw"&gt;`;&lt;/span&gt; &lt;span class="kw"&gt;do&lt;/span&gt; &lt;span class="fu"&gt;grep&lt;/span&gt; link_to_post &lt;span class="va"&gt;$i&lt;/span&gt;.html&lt;span class="kw"&gt;;&lt;/span&gt; &lt;span class="kw"&gt;done&lt;/span&gt; &lt;span class="op"&gt;&amp;gt;&lt;/span&gt; &lt;span class="ex"&gt;urls.html&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;这样我们拿到了一个 &lt;code&gt;urls.html&lt;/code&gt;&lt;/p&gt;
&lt;div class="sourceCode"&gt;&lt;pre class="sourceCode html"&gt;&lt;code class="sourceCode html"&gt;&lt;span class="kw"&gt;&amp;lt;h2&lt;/span&gt;&lt;span class="ot"&gt; class=&lt;/span&gt;&lt;span class="st"&gt;&amp;quot;link_to_post&amp;quot;&lt;/span&gt;&lt;span class="kw"&gt;&amp;gt;&amp;lt;a&lt;/span&gt;&lt;span class="ot"&gt; href=&lt;/span&gt;&lt;span class="st"&gt;&amp;quot;http://cnlox.is-programmer.com/posts/44972.html&amp;quot;&lt;/span&gt;&lt;span class="kw"&gt;&amp;gt;&lt;/span&gt;Goodbye and Thanks to is-programmer&lt;span class="kw"&gt;&amp;lt;/a&amp;gt;&amp;lt;/h2&amp;gt;&lt;/span&gt;
&lt;span class="kw"&gt;&amp;lt;h2&lt;/span&gt;&lt;span class="ot"&gt; class=&lt;/span&gt;&lt;span class="st"&gt;&amp;quot;link_to_post&amp;quot;&lt;/span&gt;&lt;span class="kw"&gt;&amp;gt;&amp;lt;a&lt;/span&gt;&lt;span class="ot"&gt; href=&lt;/span&gt;&lt;span class="st"&gt;&amp;quot;http://cnlox.is-programmer.com/posts/43206.html&amp;quot;&lt;/span&gt;&lt;span class="kw"&gt;&amp;gt;&lt;/span&gt;2013, 青春绝版&lt;span class="kw"&gt;&amp;lt;/a&amp;gt;&amp;lt;/h2&amp;gt;&lt;/span&gt;
&lt;span class="kw"&gt;&amp;lt;h2&lt;/span&gt;&lt;span class="ot"&gt; class=&lt;/span&gt;&lt;span class="st"&gt;&amp;quot;link_to_post&amp;quot;&lt;/span&gt;&lt;span class="kw"&gt;&amp;gt;&amp;lt;a&lt;/span&gt;&lt;span class="ot"&gt; href=&lt;/span&gt;&lt;span class="st"&gt;&amp;quot;http://cnlox.is-programmer.com/posts/42237.html&amp;quot;&lt;/span&gt;&lt;span class="kw"&gt;&amp;gt;&lt;/span&gt;Announcing oh-my-emacs v0.3&lt;span class="kw"&gt;&amp;lt;/a&amp;gt;&amp;lt;/h2&amp;gt;&lt;/span&gt;
&lt;span class="kw"&gt;&amp;lt;h2&lt;/span&gt;&lt;span class="ot"&gt; class=&lt;/span&gt;&lt;span class="st"&gt;&amp;quot;link_to_post&amp;quot;&lt;/span&gt;&lt;span class="kw"&gt;&amp;gt;&amp;lt;a&lt;/span&gt;&lt;span class="ot"&gt; href=&lt;/span&gt;&lt;span class="st"&gt;&amp;quot;http://cnlox.is-programmer.com/posts/40912.html&amp;quot;&lt;/span&gt;&lt;span class="kw"&gt;&amp;gt;&lt;/span&gt; Announcing ac-geiser v0.1&lt;span class="kw"&gt;&amp;lt;/a&amp;gt;&amp;lt;/h2&amp;gt;&lt;/span&gt;
&lt;span class="kw"&gt;&amp;lt;h2&lt;/span&gt;&lt;span class="ot"&gt; class=&lt;/span&gt;&lt;span class="st"&gt;&amp;quot;link_to_post&amp;quot;&lt;/span&gt;&lt;span class="kw"&gt;&amp;gt;&amp;lt;a&lt;/span&gt;&lt;span class="ot"&gt; href=&lt;/span&gt;&lt;span class="st"&gt;&amp;quot;http://cnlox.is-programmer.com/posts/40749.html&amp;quot;&lt;/span&gt;&lt;span class="kw"&gt;&amp;gt;&lt;/span&gt;Announcing oh-my-emacs v0.1&lt;span class="kw"&gt;&amp;lt;/a&amp;gt;&amp;lt;/h2&amp;gt;&lt;/span&gt;
&lt;span class="kw"&gt;&amp;lt;h2&lt;/span&gt;&lt;span class="ot"&gt; class=&lt;/span&gt;&lt;span class="st"&gt;&amp;quot;link_to_post&amp;quot;&lt;/span&gt;&lt;span class="kw"&gt;&amp;gt;&amp;lt;a&lt;/span&gt;&lt;span class="ot"&gt; href=&lt;/span&gt;&lt;span class="st"&gt;&amp;quot;http://cnlox.is-programmer.com/posts/39883.html&amp;quot;&lt;/span&gt;&lt;span class="kw"&gt;&amp;gt;&lt;/span&gt;OpenStack开发杂谈&lt;span class="kw"&gt;&amp;lt;/a&amp;gt;&amp;lt;/h2&amp;gt;&lt;/span&gt;
&lt;span class="kw"&gt;&amp;lt;h2&lt;/span&gt;&lt;span class="ot"&gt; class=&lt;/span&gt;&lt;span class="st"&gt;&amp;quot;link_to_post&amp;quot;&lt;/span&gt;&lt;span class="kw"&gt;&amp;gt;&amp;lt;a&lt;/span&gt;&lt;span class="ot"&gt; href=&lt;/span&gt;&lt;span class="st"&gt;&amp;quot;http://cnlox.is-programmer.com/posts/37506.html&amp;quot;&lt;/span&gt;&lt;span class="kw"&gt;&amp;gt;&lt;/span&gt;轻松一刻：电影条形码转换脚本&lt;span class="kw"&gt;&amp;lt;/a&amp;gt;&amp;lt;/h2&amp;gt;&lt;/span&gt;
&lt;span class="kw"&gt;&amp;lt;h2&lt;/span&gt;&lt;span class="ot"&gt; class=&lt;/span&gt;&lt;span class="st"&gt;&amp;quot;link_to_post&amp;quot;&lt;/span&gt;&lt;span class="kw"&gt;&amp;gt;&amp;lt;a&lt;/span&gt;&lt;span class="ot"&gt; href=&lt;/span&gt;&lt;span class="st"&gt;&amp;quot;http://cnlox.is-programmer.com/posts/37288.html&amp;quot;&lt;/span&gt;&lt;span class="kw"&gt;&amp;gt;&lt;/span&gt;慎言多思&lt;span class="kw"&gt;&amp;lt;/a&amp;gt;&amp;lt;/h2&amp;gt;&lt;/span&gt;
&lt;span class="kw"&gt;&amp;lt;h2&lt;/span&gt;&lt;span class="ot"&gt; class=&lt;/span&gt;&lt;span class="st"&gt;&amp;quot;link_to_post&amp;quot;&lt;/span&gt;&lt;span class="kw"&gt;&amp;gt;&amp;lt;a&lt;/span&gt;&lt;span class="ot"&gt; href=&lt;/span&gt;&lt;span class="st"&gt;&amp;quot;http://cnlox.is-programmer.com/posts/37276.html&amp;quot;&lt;/span&gt;&lt;span class="kw"&gt;&amp;gt;&lt;/span&gt;李彦宏的“罪己诏”&lt;span class="kw"&gt;&amp;lt;/a&amp;gt;&amp;lt;/h2&amp;gt;&lt;/span&gt;
&lt;span class="kw"&gt;&amp;lt;h2&lt;/span&gt;&lt;span class="ot"&gt; class=&lt;/span&gt;&lt;span class="st"&gt;&amp;quot;link_to_post&amp;quot;&lt;/span&gt;&lt;span class="kw"&gt;&amp;gt;&amp;lt;a&lt;/span&gt;&lt;span class="ot"&gt; href=&lt;/span&gt;&lt;span class="st"&gt;&amp;quot;http://cnlox.is-programmer.com/posts/37030.html&amp;quot;&lt;/span&gt;&lt;span class="kw"&gt;&amp;gt;&lt;/span&gt;2012，静水深流&amp;lt;/a&amp;gt;&lt;span class="kw"&gt;&amp;lt;/h2&amp;gt;&lt;/span&gt;
&lt;span class="kw"&gt;&amp;lt;h2&lt;/span&gt;&lt;span class="ot"&gt; class=&lt;/span&gt;&lt;span class="st"&gt;&amp;quot;link_to_post&amp;quot;&lt;/span&gt;&lt;span class="kw"&gt;&amp;gt;&amp;lt;a&lt;/span&gt;&lt;span class="ot"&gt; href=&lt;/span&gt;&lt;span class="st"&gt;&amp;quot;http://cnlox.is-programmer.com/posts/37022.html&amp;quot;&lt;/span&gt;&lt;span class="kw"&gt;&amp;gt;&lt;/span&gt;陪床记&lt;span class="kw"&gt;&amp;lt;/a&amp;gt;&amp;lt;/h2&amp;gt;&lt;/span&gt;
&lt;span class="kw"&gt;&amp;lt;h2&lt;/span&gt;&lt;span class="ot"&gt; class=&lt;/span&gt;&lt;span class="st"&gt;&amp;quot;link_to_post&amp;quot;&lt;/span&gt;&lt;span class="kw"&gt;&amp;gt;&amp;lt;a&lt;/span&gt;&lt;span class="ot"&gt; href=&lt;/span&gt;&lt;span class="st"&gt;&amp;quot;http://cnlox.is-programmer.com/posts/35867.html&amp;quot;&lt;/span&gt;&lt;span class="kw"&gt;&amp;gt;&lt;/span&gt;Emacs as a Python IDE&lt;span class="kw"&gt;&amp;lt;/a&amp;gt;&amp;lt;/h2&amp;gt;&lt;/span&gt;
&lt;span class="kw"&gt;&amp;lt;h2&lt;/span&gt;&lt;span class="ot"&gt; class=&lt;/span&gt;&lt;span class="st"&gt;&amp;quot;link_to_post&amp;quot;&lt;/span&gt;&lt;span class="kw"&gt;&amp;gt;&amp;lt;a&lt;/span&gt;&lt;span class="ot"&gt; href=&lt;/span&gt;&lt;span class="st"&gt;&amp;quot;http://cnlox.is-programmer.com/posts/35680.html&amp;quot;&lt;/span&gt;&lt;span class="kw"&gt;&amp;gt;&lt;/span&gt;读行记：孤单是一个人的狂欢&lt;span class="kw"&gt;&amp;lt;/a&amp;gt;&amp;lt;/h2&amp;gt;&lt;/span&gt;
&lt;span class="kw"&gt;&amp;lt;h2&lt;/span&gt;&lt;span class="ot"&gt; class=&lt;/span&gt;&lt;span class="st"&gt;&amp;quot;link_to_post&amp;quot;&lt;/span&gt;&lt;span class="kw"&gt;&amp;gt;&amp;lt;a&lt;/span&gt;&lt;span class="ot"&gt; href=&lt;/span&gt;&lt;span class="st"&gt;&amp;quot;http://cnlox.is-programmer.com/posts/34489.html&amp;quot;&lt;/span&gt;&lt;span class="kw"&gt;&amp;gt;&lt;/span&gt;偷得浮生半年闲&lt;span class="kw"&gt;&amp;lt;/a&amp;gt;&amp;lt;/h2&amp;gt;&lt;/span&gt;
&lt;span class="co"&gt;&amp;lt;!-- ... --&amp;gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;我通过 &lt;a href="http://vim.wikia.com/wiki/Macros"&gt;Vim Macro&lt;/a&gt;，把这个文件的内容变成 &lt;a href="http://yaml.org/"&gt;YAML&lt;/a&gt; 格式，并加入一个额外的 &lt;code&gt;english_title&lt;/code&gt; 字段，这个字段会变成新的文章的 &lt;a href="https://en.wikipedia.org/wiki/URL"&gt;URL Path&lt;/a&gt; 的一部分：&lt;/p&gt;
&lt;div class="sourceCode"&gt;&lt;pre class="sourceCode yaml"&gt;&lt;code class="sourceCode yaml"&gt;&lt;span class="co"&gt;# url_list.yaml&lt;/span&gt;
&lt;span class="kw"&gt;-&lt;/span&gt; &lt;span class="fu"&gt;url:&lt;/span&gt;&lt;span class="at"&gt; http://cnlox.is-programmer.com/posts/44972.html&lt;/span&gt;
  &lt;span class="fu"&gt;title:&lt;/span&gt;&lt;span class="at"&gt; Goodbye and Thanks to is-programmer.com&lt;/span&gt;
  &lt;span class="fu"&gt;english-title:&lt;/span&gt;&lt;span class="at"&gt; goodbye-and-thanks-to-is-programmer&lt;/span&gt;
&lt;span class="kw"&gt;-&lt;/span&gt; &lt;span class="fu"&gt;url:&lt;/span&gt;&lt;span class="at"&gt; http://cnlox.is-programmer.com/posts/43206.html&lt;/span&gt;
  &lt;span class="fu"&gt;title:&lt;/span&gt;&lt;span class="at"&gt; 2013, 青春绝版&lt;/span&gt;
  &lt;span class="fu"&gt;english-title:&lt;/span&gt;&lt;span class="at"&gt; 2013-summary&lt;/span&gt;
&lt;span class="kw"&gt;-&lt;/span&gt; &lt;span class="fu"&gt;url:&lt;/span&gt;&lt;span class="at"&gt; http://cnlox.is-programmer.com/posts/42237.html&lt;/span&gt;
  &lt;span class="fu"&gt;title:&lt;/span&gt;&lt;span class="at"&gt; Announcing oh-my-emacs v0.3&lt;/span&gt;
  &lt;span class="fu"&gt;english-title:&lt;/span&gt;&lt;span class="at"&gt; announcing-oh-my-emacs-v0.3&lt;/span&gt;
&lt;span class="kw"&gt;-&lt;/span&gt; &lt;span class="fu"&gt;url:&lt;/span&gt;&lt;span class="at"&gt; http://cnlox.is-programmer.com/posts/40912.html&lt;/span&gt;
  &lt;span class="fu"&gt;title:&lt;/span&gt;&lt;span class="at"&gt; Announcing ac-geiser v0.1&lt;/span&gt;
  &lt;span class="fu"&gt;english-title:&lt;/span&gt;&lt;span class="at"&gt; announcing-ac-geiser-v0.2&lt;/span&gt;
&lt;span class="kw"&gt;-&lt;/span&gt; &lt;span class="fu"&gt;url:&lt;/span&gt;&lt;span class="at"&gt; http://cnlox.is-programmer.com/posts/40749.html&lt;/span&gt;
  &lt;span class="fu"&gt;title:&lt;/span&gt;&lt;span class="at"&gt; Announcing oh-my-emacs v0.1&lt;/span&gt;
  &lt;span class="fu"&gt;english-title:&lt;/span&gt;&lt;span class="at"&gt; announcing-oh-my-emacs-v0.2&lt;/span&gt;
&lt;span class="kw"&gt;-&lt;/span&gt; &lt;span class="fu"&gt;url:&lt;/span&gt;&lt;span class="at"&gt; http://cnlox.is-programmer.com/posts/39883.html&lt;/span&gt;
  &lt;span class="fu"&gt;title:&lt;/span&gt;&lt;span class="at"&gt; OpenStack开发杂谈&lt;/span&gt;
  &lt;span class="fu"&gt;english-title:&lt;/span&gt;&lt;span class="at"&gt; misc-thoughts-on-openstack-development&lt;/span&gt;
&lt;span class="kw"&gt;-&lt;/span&gt; &lt;span class="fu"&gt;url:&lt;/span&gt;&lt;span class="at"&gt; http://cnlox.is-programmer.com/posts/37506.html&lt;/span&gt;
  &lt;span class="fu"&gt;title:&lt;/span&gt;&lt;span class="at"&gt; 轻松一刻：电影条形码转换脚本&lt;/span&gt;
  &lt;span class="fu"&gt;english-title:&lt;/span&gt;&lt;span class="at"&gt; just-for-fun-moviebarcode-shell-script&lt;/span&gt;
&lt;span class="kw"&gt;-&lt;/span&gt; &lt;span class="fu"&gt;url:&lt;/span&gt;&lt;span class="at"&gt; http://cnlox.is-programmer.com/posts/37288.html&lt;/span&gt;
  &lt;span class="fu"&gt;title:&lt;/span&gt;&lt;span class="at"&gt; 慎言多思&lt;/span&gt;
  &lt;span class="fu"&gt;english-title:&lt;/span&gt;&lt;span class="at"&gt; fewer-words-more-thoughts&lt;/span&gt;
&lt;span class="kw"&gt;-&lt;/span&gt; &lt;span class="fu"&gt;url:&lt;/span&gt;&lt;span class="at"&gt; http://cnlox.is-programmer.com/posts/37276.html&lt;/span&gt;
  &lt;span class="fu"&gt;title:&lt;/span&gt;&lt;span class="at"&gt; 李彦宏的“罪己诏”&lt;/span&gt;
  &lt;span class="fu"&gt;english-title:&lt;/span&gt;&lt;span class="at"&gt; thoughts-on-baidu&lt;/span&gt;
&lt;span class="kw"&gt;-&lt;/span&gt; &lt;span class="fu"&gt;url:&lt;/span&gt;&lt;span class="at"&gt; http://cnlox.is-programmer.com/posts/37030.html&lt;/span&gt;
  &lt;span class="fu"&gt;title:&lt;/span&gt;&lt;span class="at"&gt; 2012，静水深流&lt;/span&gt;
  &lt;span class="fu"&gt;english-title:&lt;/span&gt;&lt;span class="at"&gt; 2012-summary&lt;/span&gt;
&lt;span class="kw"&gt;-&lt;/span&gt; &lt;span class="fu"&gt;url:&lt;/span&gt;&lt;span class="at"&gt; http://cnlox.is-programmer.com/posts/37022.html&lt;/span&gt;
  &lt;span class="fu"&gt;title:&lt;/span&gt;&lt;span class="at"&gt; 陪床记&lt;/span&gt;
  &lt;span class="fu"&gt;english-title:&lt;/span&gt;&lt;span class="at"&gt; for-my-father&lt;/span&gt;
&lt;span class="co"&gt;# ...&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;我原有的 Blog 文章，每一篇都会有一些 tag，但是这些 tag 的拼写有很多是错误的，因此我又将所有的 tag 爬取下来并 fix，也是保存成 YAML 格式以方便程序读取：&lt;/p&gt;
&lt;div class="sourceCode"&gt;&lt;pre class="sourceCode yaml"&gt;&lt;code class="sourceCode yaml"&gt;&lt;span class="co"&gt;# tags_fix.yaml&lt;/span&gt;
&lt;span class="fu"&gt;amarok:&lt;/span&gt;&lt;span class="at"&gt; Amarok&lt;/span&gt;
&lt;span class="fu"&gt;animal:&lt;/span&gt;&lt;span class="at"&gt; Animal&lt;/span&gt;
&lt;span class="fu"&gt;apache:&lt;/span&gt;&lt;span class="at"&gt; Apache&lt;/span&gt;
&lt;span class="fu"&gt;api:&lt;/span&gt;&lt;span class="at"&gt; API&lt;/span&gt;
&lt;span class="fu"&gt;archlinux:&lt;/span&gt;&lt;span class="at"&gt; Arch Linux&lt;/span&gt;
&lt;span class="fu"&gt;assembly:&lt;/span&gt;&lt;span class="at"&gt; Assembly&lt;/span&gt;
&lt;span class="fu"&gt;auctex:&lt;/span&gt;&lt;span class="at"&gt; AUCTeX&lt;/span&gt;
&lt;span class="fu"&gt;avl:&lt;/span&gt;&lt;span class="at"&gt; AVL&lt;/span&gt;
&lt;span class="fu"&gt;baidu:&lt;/span&gt;&lt;span class="at"&gt; Baidu&lt;/span&gt;
&lt;span class="fu"&gt;budai:&lt;/span&gt;&lt;span class="at"&gt; Budai&lt;/span&gt;
c&lt;span class="co"&gt;#: C#&lt;/span&gt;
&lt;span class="fu"&gt;c++:&lt;/span&gt;&lt;span class="at"&gt; C++&lt;/span&gt;
&lt;span class="fu"&gt;cc98:&lt;/span&gt;&lt;span class="at"&gt; CC98&lt;/span&gt;
&lt;span class="fu"&gt;ccl:&lt;/span&gt;&lt;span class="at"&gt; CCL&lt;/span&gt;
&lt;span class="fu"&gt;cdlatex:&lt;/span&gt;&lt;span class="at"&gt; CDLaTeX&lt;/span&gt;
&lt;span class="fu"&gt;cmake:&lt;/span&gt;&lt;span class="at"&gt; CMAKE&lt;/span&gt;
&lt;span class="fu"&gt;cocoa:&lt;/span&gt;&lt;span class="at"&gt; Cocoa&lt;/span&gt;
&lt;span class="fu"&gt;colinux:&lt;/span&gt;&lt;span class="at"&gt; coLinux&lt;/span&gt;
&lt;span class="fu"&gt;compiler:&lt;/span&gt;&lt;span class="at"&gt; Compiler&lt;/span&gt;
&lt;span class="fu"&gt;conky:&lt;/span&gt;&lt;span class="at"&gt; conky&lt;/span&gt;
&lt;span class="co"&gt;# ...&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;基础工作做好之后，接下来就是写程序，根据 &lt;code&gt;url_list.yaml&lt;/code&gt; 来对每一篇文章进行批量化的处理：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;抓取文章内容&lt;/li&gt;
&lt;li&gt;分析文章的 metadata，包括：
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;title&lt;/code&gt; – 文章标题&lt;/li&gt;
&lt;li&gt;&lt;code&gt;created_at&lt;/code&gt; – 创建时间&lt;/li&gt;
&lt;li&gt;&lt;code&gt;tags&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;category&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;原文章的 URL&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;li&gt;用 &lt;a href="http://pandoc.org/"&gt;Pandoc&lt;/a&gt; 将抓取下的 HTML 转换成 Org-mode 格式&lt;a href="#fn1" class="footnoteRef" id="fnref1"&gt;&lt;sup&gt;1&lt;/sup&gt;&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;确定迁移后的文章的 URL&lt;/li&gt;
&lt;li&gt;修正 Tag&lt;/li&gt;
&lt;li&gt;保存文件&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;所以 is-programmer 抓取下来的文章，最后会被保存成一个 &lt;code&gt;YYYY-MM-DD-some-title.org&lt;/code&gt; 文件和 &lt;code&gt;YYYY-MM-DD-some-title.yaml&lt;/code&gt; 文件，以符合 &lt;a href="https://nanoc.ws"&gt;Nanoc&lt;/a&gt; 的要求&lt;a href="#fn2" class="footnoteRef" id="fnref2"&gt;&lt;sup&gt;2&lt;/sup&gt;&lt;/a&gt;。&lt;/p&gt;
&lt;p&gt;保存后的 YAML 文件大约如下：&lt;/p&gt;
&lt;div class="sourceCode"&gt;&lt;pre class="sourceCode yaml"&gt;&lt;code class="sourceCode yaml"&gt;&lt;span class="ot"&gt;---&lt;/span&gt;
&lt;span class="fu"&gt;title:&lt;/span&gt;&lt;span class="at"&gt; &lt;/span&gt;&lt;span class="st"&gt;&amp;quot;计算机是懒人的科学&amp;quot;&lt;/span&gt;
&lt;span class="fu"&gt;created_at:&lt;/span&gt;&lt;span class="at"&gt; 2009-06-04T05:41:13+08:00&lt;/span&gt;
&lt;span class="fu"&gt;updated_at:&lt;/span&gt;&lt;span class="at"&gt; 2017-04-26T17:31:07+08:00&lt;/span&gt;
&lt;span class="fu"&gt;kind:&lt;/span&gt;&lt;span class="at"&gt; article&lt;/span&gt;
&lt;span class="fu"&gt;category:&lt;/span&gt;&lt;span class="at"&gt; Linux&lt;/span&gt;
&lt;span class="fu"&gt;tags:&lt;/span&gt;
&lt;span class="kw"&gt;-&lt;/span&gt; Ubuntu
&lt;span class="kw"&gt;-&lt;/span&gt; LaTeX
&lt;span class="kw"&gt;-&lt;/span&gt; Emacs
&lt;span class="kw"&gt;-&lt;/span&gt; Firefox
&lt;span class="kw"&gt;-&lt;/span&gt; Outdated
&lt;span class="fu"&gt;meta:&lt;/span&gt;
  &lt;span class="fu"&gt;html:&lt;/span&gt;&lt;span class="at"&gt; Imported from &amp;lt;a href=&amp;quot;http://cnlox.is-programmer.com/posts/8790.html&amp;quot;&amp;gt;is-programmer&amp;lt;/a&amp;gt;.&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;程序是用 Ruby 写的，主要还是用了 Ruby 中内建的 &lt;a href="https://ruby-doc.org/core-2.3.0/Regexp.html"&gt;Regexp&lt;/a&gt;。正则表达式是非常强大和方便的工具，但是每种语言、工具的实现都在一些细节处有一些细小的差别，所以实际应用时， 耐心的调试和文档查询工作是少不了的。&lt;/p&gt;
&lt;p&gt;程序清单如下&lt;a href="#fn3" class="footnoteRef" id="fnref3"&gt;&lt;sup&gt;3&lt;/sup&gt;&lt;/a&gt;：&lt;/p&gt;
&lt;div class="sourceCode"&gt;&lt;pre class="sourceCode ruby"&gt;&lt;code class="sourceCode ruby"&gt;&lt;span class="co"&gt;# spider.rb&lt;/span&gt;
require &lt;span class="st"&gt;&amp;#39;yaml&amp;#39;&lt;/span&gt;
require &lt;span class="st"&gt;&amp;#39;net/http&amp;#39;&lt;/span&gt;

list = &lt;span class="dt"&gt;YAML&lt;/span&gt;::load(&lt;span class="dt"&gt;File&lt;/span&gt;.open(&lt;span class="st"&gt;&amp;#39;url_list.yaml&amp;#39;&lt;/span&gt;).read)
tags_fix = &lt;span class="dt"&gt;YAML&lt;/span&gt;::load(&lt;span class="dt"&gt;File&lt;/span&gt;.open(&lt;span class="st"&gt;&amp;#39;tags_fix.yaml&amp;#39;&lt;/span&gt;).read)

list.each &lt;span class="kw"&gt;do&lt;/span&gt; |item|
  uri = &lt;span class="dt"&gt;URI&lt;/span&gt;(item[&lt;span class="st"&gt;&amp;#39;url&amp;#39;&lt;/span&gt;])
  html = &lt;span class="dt"&gt;Net&lt;/span&gt;::&lt;span class="dt"&gt;HTTP&lt;/span&gt;.get(uri)
  tags_re = &lt;span class="ot"&gt;/&amp;lt;a href=&amp;quot;\/tag\/[\S]*&amp;quot;&amp;gt;([\S]*)&amp;lt;\/a&amp;gt;/&lt;/span&gt;
  tags = html.scan(tags_re).flatten

  category_re = &lt;span class="ot"&gt;/&amp;lt;div id=&amp;quot;article_header&amp;quot;&amp;gt;.*&amp;lt;a href=&amp;quot;\/categories\/[\d]*\/posts&amp;quot;&amp;gt;([\S]*)&amp;lt;\/a&amp;gt;.*&amp;lt;\/div&amp;gt;/m&lt;/span&gt;
  category = html.scan(category_re).flatten[&lt;span class="dv"&gt;0&lt;/span&gt;]

  date_re = &lt;span class="ot"&gt;/posted.*@ (.* \+0800)/&lt;/span&gt;
  created_at = &lt;span class="dt"&gt;DateTime&lt;/span&gt;.parse(html.scan(date_re).flatten[&lt;span class="dv"&gt;0&lt;/span&gt;])
  updated_at = &lt;span class="dt"&gt;DateTime&lt;/span&gt;.now

  title = item[&lt;span class="st"&gt;&amp;#39;title&amp;#39;&lt;/span&gt;]

  yaml = &amp;lt;&amp;lt;&lt;span class="kw"&gt;YAML&lt;/span&gt;
&lt;span class="ot"&gt;---&lt;/span&gt;
&lt;span class="ot"&gt;title: &amp;quot;#{&lt;/span&gt;item[&lt;span class="st"&gt;&amp;quot;title&amp;quot;&lt;/span&gt;]&lt;span class="ot"&gt;}&amp;quot;&lt;/span&gt;
&lt;span class="ot"&gt;created_at: #{&lt;/span&gt;created_at.to_s&lt;span class="ot"&gt;}&lt;/span&gt;
&lt;span class="ot"&gt;updated_at: #{&lt;/span&gt;updated_at.to_s&lt;span class="ot"&gt;}&lt;/span&gt;
&lt;span class="ot"&gt;kind: article&lt;/span&gt;
&lt;span class="ot"&gt;category: #{&lt;/span&gt;category&lt;span class="ot"&gt;}&lt;/span&gt;
&lt;span class="ot"&gt;tags:&lt;/span&gt;
&lt;span class="ot"&gt;YAML&lt;/span&gt;

&lt;span class="ot"&gt;  tags.each do |tag|&lt;/span&gt;
&lt;span class="ot"&gt;    yaml += &amp;quot;- #{&lt;/span&gt;tags_fix[tag].force_encoding(&lt;span class="dt"&gt;Encoding&lt;/span&gt;::&lt;span class="dt"&gt;UTF_8&lt;/span&gt;)&lt;span class="ot"&gt;}\n&amp;quot;&lt;/span&gt;
&lt;span class="ot"&gt;  end&lt;/span&gt;

&lt;span class="ot"&gt;  yaml += &amp;lt;&amp;lt;YAML&lt;/span&gt;
&lt;span class="ot"&gt;meta:&lt;/span&gt;
&lt;span class="ot"&gt;  html: Imported from &amp;lt;a href=&amp;quot;#{&lt;/span&gt;item[&lt;span class="st"&gt;&amp;#39;url&amp;#39;&lt;/span&gt;]&lt;span class="ot"&gt;}&amp;quot;&amp;gt;is-programmer&amp;lt;/a&amp;gt;.&lt;/span&gt;
&lt;span class="ot"&gt;YAML&lt;/span&gt;

&lt;span class="ot"&gt;  yaml_file = &amp;quot;posts/&amp;quot; + created_at.strftime(&amp;#39;%Y-%m-%d&amp;#39;) + &amp;quot;-&amp;quot; + item[&amp;quot;english-title&amp;quot;] + &amp;quot;.yaml&amp;quot;&lt;/span&gt;

&lt;span class="ot"&gt;  File.open(yaml_file, &amp;#39;w&amp;#39;) do |f|&lt;/span&gt;
&lt;span class="ot"&gt;    f.write(yaml)&lt;/span&gt;
&lt;span class="ot"&gt;  end&lt;/span&gt;

&lt;span class="ot"&gt;  org_file = &amp;quot;posts/&amp;quot; + created_at.strftime(&amp;#39;%Y-%m-%d&amp;#39;) + &amp;quot;-&amp;quot; + item[&amp;quot;english-title&amp;quot;] + &amp;quot;.org&amp;quot;&lt;/span&gt;
&lt;span class="ot"&gt;  article_content_re = /&amp;lt;div id=.article_content.&amp;gt;(.*)&amp;lt;\/div&amp;gt;.*&amp;lt;div id=.article_bar.&amp;gt;/m&lt;/span&gt;
&lt;span class="ot"&gt;  article_content = html.scan(article_content_re).flatten[0]&lt;/span&gt;

&lt;span class="ot"&gt;  File.open(&amp;#39;/tmp/test.html&amp;#39;, &amp;#39;w&amp;#39;) do |f|&lt;/span&gt;
&lt;span class="ot"&gt;    f.write(article_content)&lt;/span&gt;
&lt;span class="ot"&gt;  end&lt;/span&gt;

&lt;span class="ot"&gt;  `pandoc /tmp/test.html -o #{&lt;/span&gt;org_file&lt;span class="ot"&gt;}`&lt;/span&gt;
&lt;span class="ot"&gt;end&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;再之后，可以通过一些初级的正则替换，来完成一些最基本的文本修正工作。我这里最主要是通过 Ruby 的 Regexp，给文章中的中英文混排的英文单词两边加入了一个合适的半角空格。Ruby 的 Regexp 可以通过 &lt;code&gt;/(\p{Han})/&lt;/code&gt; 来直接匹配汉字，实在是非常方便。 程序清单如下：&lt;/p&gt;
&lt;div class="sourceCode"&gt;&lt;pre class="sourceCode ruby"&gt;&lt;code class="sourceCode ruby"&gt;&lt;span class="co"&gt;# article_fix.rb&lt;/span&gt;
require &lt;span class="st"&gt;&amp;#39;yaml&amp;#39;&lt;/span&gt;

&lt;span class="kw"&gt;def&lt;/span&gt; fix_english_word(content)
  alpha_re = &lt;span class="ot"&gt;/(\p{Han})([[:ascii:]]+?)(\p{Han})/&lt;/span&gt;
  word_fix = &lt;span class="dt"&gt;YAML&lt;/span&gt;::load(&lt;span class="dt"&gt;File&lt;/span&gt;.open(&lt;span class="st"&gt;&amp;#39;tags_fix.yaml&amp;#39;&lt;/span&gt;).read)
  new_word_fix = {}
  word_fix.each_pair &lt;span class="kw"&gt;do&lt;/span&gt; |key, value|
    new_word_fix[key.downcase] = value
  &lt;span class="kw"&gt;end&lt;/span&gt;

  content.gsub(alpha_re) &lt;span class="kw"&gt;do&lt;/span&gt;
    &lt;span class="kw"&gt;if&lt;/span&gt; new_word_fix.has_key?(&lt;span class="dt"&gt;$2&lt;/span&gt;.downcase)
      fix_word = new_word_fix[&lt;span class="dt"&gt;$2&lt;/span&gt;.downcase]
    &lt;span class="kw"&gt;else&lt;/span&gt;
      fix_word = &lt;span class="dt"&gt;$2&lt;/span&gt;
    &lt;span class="kw"&gt;end&lt;/span&gt;
    &lt;span class="dt"&gt;$1&lt;/span&gt; + &lt;span class="ch"&gt;&amp;#39; &amp;#39;&lt;/span&gt; + fix_word +  &lt;span class="ch"&gt;&amp;#39; &amp;#39;&lt;/span&gt; + &lt;span class="dt"&gt;$3&lt;/span&gt;
  &lt;span class="kw"&gt;end&lt;/span&gt;
&lt;span class="kw"&gt;end&lt;/span&gt;

&lt;span class="kw"&gt;def&lt;/span&gt; fix_english_word_with_punct(content)
  alpha_re = &lt;span class="ot"&gt;/(\p{Han})([[:ascii:]]+?)(\p{Punct})/&lt;/span&gt;
  word_fix = &lt;span class="dt"&gt;YAML&lt;/span&gt;::load(&lt;span class="dt"&gt;File&lt;/span&gt;.open(&lt;span class="st"&gt;&amp;#39;tags_fix.yaml&amp;#39;&lt;/span&gt;).read)
  new_word_fix = {}
  word_fix.each_pair &lt;span class="kw"&gt;do&lt;/span&gt; |key, value|
    new_word_fix[key.downcase] = value
  &lt;span class="kw"&gt;end&lt;/span&gt;

  content.gsub(alpha_re) &lt;span class="kw"&gt;do&lt;/span&gt;
    &lt;span class="kw"&gt;if&lt;/span&gt; new_word_fix.has_key?(&lt;span class="dt"&gt;$2&lt;/span&gt;.downcase)
      fix_word = new_word_fix[&lt;span class="dt"&gt;$2&lt;/span&gt;.downcase]
    &lt;span class="kw"&gt;else&lt;/span&gt;
      fix_word = &lt;span class="dt"&gt;$2&lt;/span&gt;
    &lt;span class="kw"&gt;end&lt;/span&gt;
    &lt;span class="dt"&gt;$1&lt;/span&gt; + &lt;span class="ch"&gt;&amp;#39; &amp;#39;&lt;/span&gt; + fix_word +  &lt;span class="dt"&gt;$3&lt;/span&gt;
  &lt;span class="kw"&gt;end&lt;/span&gt;
&lt;span class="kw"&gt;end&lt;/span&gt;

&lt;span class="kw"&gt;def&lt;/span&gt; fix_bullet_point(content)
  content.gsub(&lt;span class="ot"&gt;/^-\s+/&lt;/span&gt;, &lt;span class="st"&gt;&amp;#39;- &amp;#39;&lt;/span&gt;)
&lt;span class="kw"&gt;end&lt;/span&gt;

&lt;span class="kw"&gt;def&lt;/span&gt; fix_org_properties(content)
  content.gsub(&lt;span class="ot"&gt;/.*PROPERTIES.*\n\s+:CUSTOM_ID:.*\n.*END.*\n\n/&lt;/span&gt;, &lt;span class="st"&gt;&amp;#39;&amp;#39;&lt;/span&gt;)
&lt;span class="kw"&gt;end&lt;/span&gt;

&lt;span class="kw"&gt;def&lt;/span&gt; fix_org_section_title(content)
  content.gsub(&lt;span class="ot"&gt;/(^\*{1,4})\s*.*\[.*\]\[(.*)\]\]/&lt;/span&gt;, &lt;span class="st"&gt;&amp;#39;\1 \2&amp;#39;&lt;/span&gt;)
&lt;span class="kw"&gt;end&lt;/span&gt;

&lt;span class="kw"&gt;def&lt;/span&gt; fix_source_code(content)
  content.gsub(&lt;span class="st"&gt;&amp;#39;BEGIN_EXAMPLE&amp;#39;&lt;/span&gt;, &lt;span class="st"&gt;&amp;#39;BEGIN_SRC&amp;#39;&lt;/span&gt;).
    gsub(&lt;span class="st"&gt;&amp;#39;END_EXAMPLE&amp;#39;&lt;/span&gt;, &lt;span class="st"&gt;&amp;#39;END_SRC&amp;#39;&lt;/span&gt;).
    gsub(&lt;span class="ch"&gt;&amp;#39; &amp;#39;&lt;/span&gt;, &lt;span class="ch"&gt;&amp;#39; &amp;#39;&lt;/span&gt;)
&lt;span class="kw"&gt;end&lt;/span&gt;

&lt;span class="kw"&gt;def&lt;/span&gt; main(file)
  content = &lt;span class="st"&gt;&amp;#39;&amp;#39;&lt;/span&gt;
  &lt;span class="dt"&gt;File&lt;/span&gt;.open(file) &lt;span class="kw"&gt;do&lt;/span&gt; |f|
    content = f.read
  &lt;span class="kw"&gt;end&lt;/span&gt;

  content =
    fix_english_word_with_punct(
      fix_english_word(
        fix_bullet_point(
          fix_org_properties(
            fix_org_section_title(
              fix_source_code(content)
            )
          )
        )
      )
    )

  &lt;span class="dt"&gt;File&lt;/span&gt;.open(file, &lt;span class="ch"&gt;&amp;#39;w&amp;#39;&lt;/span&gt;) &lt;span class="kw"&gt;do&lt;/span&gt; |f|
    f.write(content)
  &lt;span class="kw"&gt;end&lt;/span&gt;
&lt;span class="kw"&gt;end&lt;/span&gt;

&lt;span class="kw"&gt;if&lt;/span&gt; &lt;span class="dv"&gt;__FILE__&lt;/span&gt; == &lt;span class="dt"&gt;$0&lt;/span&gt;
  main(&lt;span class="dt"&gt;ARGV&lt;/span&gt;[&lt;span class="dv"&gt;0&lt;/span&gt;])
&lt;span class="kw"&gt;end&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;再之后就是十分枯燥的工作了，我主要是按照这份文案排版&lt;a href="http://ppresume.com/notes/guide-zh.html"&gt;方案&lt;/a&gt;来修正很多的文字错误，前后大概花了有 10 天的时间：&lt;/p&gt;
&lt;p&gt;&lt;a href="/static/image/2017/type_fix.png"&gt;&lt;img src="/static/image/2017/type_fix.png" /&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;加上调试程序，总共大约是花了两周的时间，于现在的我而言，是相当大的时间成本，这也是我迟迟没有动手做这个事的原因。不过好在下了决心后，快刀斩乱麻，坚持下也就完成了。&lt;/p&gt;
&lt;p&gt;修订文章的过程中，又从头到尾回顾了下自己过去七八年的工作生活经历，文章中很多唠叨的琐事，若不是当时动笔叨扰一下，已然完全记不得了；还有些观点年少轻狂，现在再读也会哑然无言，略感羞愧，不过这毕竟是曾经的自己，因此除了一些必要的文法修正，内容依然保持原样。&lt;/p&gt;
&lt;p&gt;当我写下第一篇&lt;a href="http://xiaohanyu.me/posts/2009-06-04-computer-science-for-lazy-guys/"&gt;文章&lt;/a&gt;时，我还只是个 20 岁出头的少年，刚刚挂了很多课，刚刚一只脚踏入计算机学习的大门；现如今当我有了足够的能力可以自己从前端到后端建立一个中小型网站写出还可以的文章之时，已近而立。这些年做了很多的选择，相对的，人生也少了很多选择——或者说是迷茫吧。而随着这种迷茫的消逝相伴而来的，是人生的选择面在逐渐减小。小十年的青春韶华，只落下几篇文章几万文字，想来不免要感慨——人生于世，大概就如那大河之水，或早或晚都要归于大海吧。&lt;/p&gt;
&lt;section class="footnotes"&gt;
&lt;hr /&gt;
&lt;ol&gt;
&lt;li id="fn1"&gt;&lt;p&gt;实际上也可以转换成 Markdown 或者其它任何方便编辑的文本标记格式，我个人是更喜欢使用 Org-mode。&lt;a href="#fnref1"&gt;↩&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;
&lt;li id="fn2"&gt;&lt;p&gt;这个站点从创建之初就采用了 Nanoc，体验非常棒，具体可以参考我以前写的两篇&lt;a href="http://xiaohanyu.me/posts/2014-05-04-build-static-site-with-nanoc-1/"&gt;文&lt;/a&gt;&lt;a href="http://xiaohanyu.me/posts/2014-07-25-build-static-site-with-nanoc-2/"&gt;章&lt;/a&gt;。&lt;a href="#fnref2"&gt;↩&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;
&lt;li id="fn3"&gt;&lt;p&gt;Pandoc 的代码语法高亮，对 Ruby 的 &lt;a href="https://ruby-doc.org/core-2.3.0/doc/syntax/literals_rdoc.html#label-Here+Documents"&gt;heredoc&lt;/a&gt; 解析好像是有 bug。&lt;a href="#fnref3"&gt;↩&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;/section&gt;
</content>
  </entry>
  <entry>
    <id>tag:xiaohanyu.me,2016-09-08:/posts/2016-09-08-ppresume-a-new-start/</id>
    <title type="html">PPResume，新的起点</title>
    <published>2016-09-08T15:29:37Z</published>
    <updated>2017-04-29T08:08:52Z</updated>
    <link rel="alternate" href="http://xiaohanyu.me/posts/2016-09-08-ppresume-a-new-start/"/>
    <content type="html">&lt;h2 id="缘起"&gt;缘起&lt;/h2&gt;
&lt;p&gt;转瞬间，从事自由职业达三年之久。&lt;/p&gt;
&lt;p&gt;这个时间甚至超过了我在商业公司“服役”的时长。&lt;/p&gt;
&lt;p&gt;完全是计划之外。&lt;/p&gt;
&lt;p&gt;三年间睡了 80% 的自然醒，做了 15% 的饭，熬了 5% 的夜；平均每年任性两次说走就走的旅行；做了各种各样但实际上都不怎么样的项目，服务了北京、长沙、香港、加拿大等各地的客户；读了几百本书看了几百部电影；唯一不变的，应该就是那永远空空如也的钱包了。&lt;/p&gt;
&lt;p&gt;看上去还不错？也许吧。但自由职业的最大弊端在于，你的认真你的态度客户看不到，甚至根本就不想去看。单元测试？代码风格检查？更好的文档？规范的 Git Commit？别逗了……事实是，这些东西很好，但是，nobody cares。客户想要的，更多的是物美价廉。&lt;/p&gt;
&lt;p&gt;职业生涯终归不能在散碎的项目中消磨殆尽。&lt;/p&gt;
&lt;p&gt;我能做什么？我擅长做什么？我喜欢做什么？什么样的事情是我能做且有可能做好但是别人不能做或者想做也有可能做不好的事呢？What’s the difference between the world with and without you?&lt;/p&gt;
&lt;p&gt;我不是一个优秀的后端工程师，因为我从未有机会直面过大规模的生产系统；我也不是一个合格的前端工程师，你现在看到的还算干净整洁的页面是我花了无数时间一点一点 Google 打磨出来的；我也不是一个设计师，虽然上个月才买了套正版的 Adobe CC，来补习一些设计基础。&lt;/p&gt;
&lt;p&gt;“你可以去搞大数据人工智能呀！”&lt;/p&gt;
&lt;p&gt;“别逗了，我已经十年没有碰过数学了好不好！”&lt;/p&gt;
&lt;p&gt;或许，我真正的长处在于整合。我当下的技术水准可以覆盖一个中小型网站前后端 80% 的需求；我深入理解开源软件的理念，对以 Github 为中心的开源软件工作流程有着深刻的理解；我擅长自动化，可以使用已有工具甚至重新发明一套工具来自动化手头的工作；我懂一些字体排印方面的知识，也许更准确的说法是，我是工程师中最懂字体排印的，设计师中写程序写得最好的；我可以写出不错的文案，多年来坚持的阅读思考与不间断的写作，让我有了缜密的思维和将事情条分缕析清晰阐述的能力。&lt;/p&gt;
&lt;p&gt;三年的自由职业生涯最大的好处在于，让我有了充足的时间在方方面面强化自己的能力。所以我终于有时间也有能力，一个人写代码、做设计、写文案，唯愿在自己的全盘掌控下能做出一个还不错的产品吧。&lt;/p&gt;
&lt;h2 id="选择"&gt;选择&lt;/h2&gt;
&lt;p&gt;温饱之后是什么？小康。小康之后呢？是更宽敞的房子？更智能的家电？更遥远的旅行？&lt;/p&gt;
&lt;p&gt;二十年前，我们对产品的要求是：基本可用。&lt;/p&gt;
&lt;p&gt;二十年后，我们对产品的要求是：做到极致。&lt;/p&gt;
&lt;p&gt;一代人的时间，我们的消费观已经从追求功能上的可用，逐渐转变成了追求品质上的卓越。&lt;/p&gt;
&lt;p&gt;所以 Apple 能够在智能手机市场上一骑绝尘、雄霸天下；所以绿城可以在杭城锦绣之地木秀于林、树大根深。&lt;/p&gt;
&lt;p&gt;在这样的潮流下，“什么样的事情是我能做且有可能做好但是别人不能做或者想做也有可能做不好的事呢？”&lt;/p&gt;
&lt;p&gt;上下求索多年，最终的答案是：数字出版。&lt;/p&gt;
&lt;p&gt;这是一个非常小众的行业。因为小众，所以不需要资本运作，这就意味着我不用花太多的时间去担心资本运作问题，唯一的投入就是我的时间成本。&lt;/p&gt;
&lt;p&gt;这是一个需要深耕的行业。小众并不意味着简单，在“看上去简单”的土地上深耕，也有可能耕种出不错的收成。&lt;/p&gt;
&lt;p&gt;这是一个需要匠人的行业。数字出版的核心是什么？是精益求精的品质追求，是匠人打磨的一丝不苟。&lt;/p&gt;
&lt;p&gt;友问，如果 BAT 或是任何一个资本雄厚的团队参与进来，你能有多大赢面？&lt;/p&gt;
&lt;p&gt;我答，一个产品最后做成什么形态，基本上只取决于创始人的品味偏好。互联网上充斥满屏的排版混乱的文章，何尝不是一个新的产品种子成长的土壤？&lt;/p&gt;
&lt;p&gt;未来几年，我会专注于数字出版服务，致力于让我们目之所视、赖以生存的数字空间，变得更好。&lt;/p&gt;
&lt;h2 id="ppresume"&gt;PPResume&lt;/h2&gt;
&lt;p&gt;PPResume，Pretty Print Resume, Pretty Print World。是我在数字出版领域内的第一款产品&lt;/p&gt;
&lt;p&gt;PPResume 提供专业的简历定制服务，以市面上罕见的极高品质的排版质量，助力各应届毕业生、职场人士开启新的人生篇章。&lt;/p&gt;
&lt;p&gt;“极高品质的排版质量”？是的，你一定会有这个疑问。所以我写了一份《&lt;a href="http://ppresume.com/notes/guide.html"&gt;中英文简历撰写排版指南&lt;/a&gt;》，用来解答你的疑问。&lt;/p&gt;
&lt;p&gt;“本指南将系统地阐述中英文简历撰写与排版的要点，并在排版方面有所侧重，力求帮助读者做出一份形神兼备的简历。针对特定议题，本指南首先会阐述是什么（What），接下来论述为什么（Why），最后说明怎样做（How）。”&lt;/p&gt;
&lt;p&gt;这份文案发布以后，收到了极好的&lt;a href="https://www.v2ex.com/t/303896"&gt;反馈&lt;/a&gt;，我甚至收到了来自陌生人的一笔捐款。还有很我相识的朋友和不相识的网友给我提交 typo fix，并且我还成功地卖出了几份 PDF，实现了 PPResume 的第一笔收入。这些鼓励也让我相信，用诚意做好的产品，会有人认可，会有人买单。&lt;/p&gt;
&lt;p&gt;&lt;a href="/static/image/ppresume/ppresume-v2ex-comments.png"&gt;&lt;img src="/static/image/ppresume/ppresume-v2ex-comments.png" /&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;整份《&lt;a href="http://ppresume.com/notes/guide.html"&gt;中英文简历撰写排版指南&lt;/a&gt;》大约有两万字，读起来“也许”会蛮累的吧……所以我又写了一份《&lt;a href="http://ppresume.com/notes/cheatsheet.html"&gt;中英文简历撰写排版指南-备忘单&lt;/a&gt;》，提炼出只有 4 页的大纲，并提供离线 PDF 格式下载，这样读者需要撰写简历的时候可以有一份简洁明晰的参考。&lt;/p&gt;
&lt;p&gt;如果你觉得我的文案写得不错，欢迎打赏购买 &lt;a href="https://item.taobao.com/item.htm?spm=a1z10.1-c.w10836671-12595401221.2.BjL3qM&amp;amp;id=538120928825"&gt;PDF&lt;/a&gt; 版本，来支持我继续开发 PPResume。附上 PDF 目录及样张，希望喜欢。&lt;/p&gt;
&lt;p&gt;&lt;a href="/static/image/ppresume/ppresume-guide-1.jpg"&gt;&lt;img src="/static/image/ppresume/ppresume-guide-1.jpg" /&gt;&lt;/a&gt; &lt;a href="/static/image/ppresume/ppresume-guide-2.jpg"&gt;&lt;img src="/static/image/ppresume/ppresume-guide-2.jpg" /&gt;&lt;/a&gt; &lt;a href="/static/image/ppresume/ppresume-guide-3.jpg"&gt;&lt;img src="/static/image/ppresume/ppresume-guide-3.jpg" /&gt;&lt;/a&gt; &lt;a href="/static/image/ppresume/ppresume-guide-4.jpg"&gt;&lt;img src="/static/image/ppresume/ppresume-guide-4.jpg" /&gt;&lt;/a&gt; &lt;a href="/static/image/ppresume/ppresume-guide-9.jpg"&gt;&lt;img src="/static/image/ppresume/ppresume-guide-9.jpg" /&gt;&lt;/a&gt; &lt;a href="/static/image/ppresume/ppresume-guide-26.jpg"&gt;&lt;img src="/static/image/ppresume/ppresume-guide-26.jpg" /&gt;&lt;/a&gt; &lt;a href="/static/image/ppresume/ppresume-guide-27.jpg"&gt;&lt;img src="/static/image/ppresume/ppresume-guide-27.jpg" /&gt;&lt;/a&gt;&lt;/p&gt;
</content>
  </entry>
  <entry>
    <id>tag:xiaohanyu.me,2016-04-20:/posts/2016-04-20-2015-summary/</id>
    <title type="html">2015，徘徊</title>
    <published>2016-04-20T10:26:17Z</published>
    <updated>2017-04-29T08:08:52Z</updated>
    <link rel="alternate" href="http://xiaohanyu.me/posts/2016-04-20-2015-summary/"/>
    <content type="html">&lt;h2 id="序"&gt;序&lt;/h2&gt;
&lt;p&gt;2015 是在徘徊中缓步前行的一年。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="http://xiaohanyu.me/posts/2012-01-01-2011-summary/"&gt;再见，2011&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="http://xiaohanyu.me/posts/2013-01-11-2012-summary/"&gt;2012，静水深流&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="http://xiaohanyu.me/posts/2014-03-03-2013-summary/"&gt;2013，青春绝版&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="http://xiaohanyu.me/posts/2015-04-10-2014-summary/"&gt;2014，漫步&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;这一年技术上进步有限，收入上更是微薄，唯一值得一提的，也许是自己未来的路在渐渐明晰——接私活赚小钱逍遥一时并非长久之计，去企业找工作按部就班亦非心之所向，远程自由独立开发看上去自由潇洒，实则是一条小众且孤独的路，特别是在接近三十而立的年龄，看着自己的同龄人要么已经 PHD 毕业 Paper 在手，要么已经在大小企业里晋升技术专家，心里难免会有一丝恐慌。&lt;/p&gt;
&lt;p&gt;我能做什么？我擅长做什么？我喜欢做什么？什么样的事情是我能做且有可能做好但是别人不能做或者想做也有可能做不好的事呢？What’s the difference between the world with and without you?&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;When you don’t create things, you become defined by your tastes rather than ability. Your tastes only narrow &amp;amp; exclude people. So create.&lt;/p&gt;
&lt;p&gt;— why the luck stiff «http://whymirror.github.io/»&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2 id="工作"&gt;工作&lt;/h2&gt;
&lt;p&gt;工作上其实没有什么好写的——因为根本就没有工作嘛😁。Anyway，偶尔还是会打打短工，赚些口粮钱。年初曾短暂在一个创业团队做了一些工作，不过春节前退出了。7 月份临时帮北京的朋友写了些 ansible 部署程序，赚了些旅费。9 月底由朋友介绍，接了一个香港客户的私活，内容是用 &lt;a href="http://www.django-rest-framework.org/"&gt;Django REST framework&lt;/a&gt; 写后端 API server。10 月份又接了个加拿大华人客户的活，主要是写前端、后端 API Server，外加用 &lt;a href="https://nodebb.org/"&gt;NodeBB&lt;/a&gt; 搭建一个论坛，一直忙到 12 月才算做完。算下来零零散散加起来也就赚了 80k RMB——真的只是口粮钱……。&lt;/p&gt;
&lt;p&gt;不知不觉已经远程工作两年多了。两年中，1/3 的时间工作赚钱，1/3 的时间阅读学习，1/3 的时间打把撒欢——随心所欲创造一些玩具而已。&lt;/p&gt;
&lt;p&gt;远程自由独立工作，顾名思义，远程，说的是无固定的办公场所；自由，说的是无固定的工作时间、合作伙伴；独立，说的是多数时间要靠个人单打独斗——对我而言，就是一个人要写后端、前端、设计 Logo、写文案、配置服务器域名等等。&lt;/p&gt;
&lt;p&gt;总体上讲，远程自由独立开发这种工作方式适用范围有限，选择这条路要慎之又慎。就我个人经验：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;远程自由独立工作并不能给你带来更高的收入。相反，我这两年的收入相对而言是很低的。和我同届的同学，很多已经在企业内成为技术骨干，月薪 30k+ ，而我还是过着打一枪换一炮的游击生活，时薪不过 150-200 RMB 而已，这还不算你在企业内工作的各种季度和年度奖金，平时的各种福利和标配的五险一金等。&lt;/li&gt;
&lt;li&gt;远程自由独立工作对个人自制力有极高的要求。没有了工作时间和场所的限制，个人很容易陷入无止境的社交刷屏中，从而浪费大量的宝贵时间。这种浪费又会造成白天工作效率低下，晚上心存愧疚难以入睡的窘境，进而作息混乱，引发一系列的严重问题。&lt;/li&gt;
&lt;li&gt;远程自由独立工作会降低个人的社交能力。从去年起我开始察觉到自己表达能力的下降，包括但不限于在公共场合发言时会有紧张感、讨厌打电话以及面对面的交流。虽然我并不喜好社交，但是必要的社交对于一个人正常的生活和心理健康还是不可或缺的。&lt;/li&gt;
&lt;li&gt;远程自由独立工作会影响你找工作时的议价能力。简单的讲，企业会给自己的员工定级定薪，而这种定级定薪在市场上也会有一定的认可度，显而易见，越是知名企业，其定级定薪得到的市场认可度就会越高。所以一般在跳槽时，在原单位薪水的基础上上浮 20-50% ，就算比较正常的市场价了。但是断续的远程自由工作就不是这样了，一来没有人来为你定级定薪，二来断续的工作对职业发展的连续性也是个很大的负面影响。这就会导致远程自由工作者在重新找工作时，议价能力其实是远低于在大企业连续工作几年后跳槽的工作者的。&lt;/li&gt;
&lt;li&gt;远程自由独立工作会影响你在技术深度上的积累。很多工作技术需要在特定的环境下才能实践成长，比如高并发、大流量、海量数据、安全等领域，需要在特定的企业工作环境中才会有相应的机会得到历练，个人开发者很难构建这样的环境，因此也很难在这方面得到历练。&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;话虽如此，在未来可预期的一段时间内，我还是会采用这种工作方式。这是因为：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;我想一个人掌控全局，努力做出高标准的产品服务，追求细节上的吹毛求疵和品质上的精雕细琢。&lt;/li&gt;
&lt;li&gt;我需要大量自由的时间，来斟酌构思产品的方方面面，来完善打磨做产品需要的各种技能。&lt;/li&gt;
&lt;li&gt;云计算的发展让互联网的基础设施日趋完善，使得一个人完成一款高品质产品成为一种可能。&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;远程自由独立工作注定是一条小众且孤独的路，也唯有如此，才能看到别人看不到的风景吧。&lt;/p&gt;
&lt;h2 id="学习"&gt;学习&lt;/h2&gt;
&lt;p&gt;学习上，总得来讲，15 年学了很多东西，但是都没有深入下去。&lt;/p&gt;
&lt;h3 id="mathematica"&gt;Mathematica&lt;/h3&gt;
&lt;p&gt;3 月份花了 250 刀买了套正版的 &lt;a href="http://www.wolfram.com/mathematica/pricing/industry-individuals.php?desktop"&gt;Mathematica&lt;/a&gt;，4 月份花了一整月的时间啃完了 «&lt;a href="http://www.amazon.com/MATHEMATICA-Book-Version-4/dp/0521643147/ref=sr_1_1?ie=UTF8&amp;amp;qid=1461160543&amp;amp;sr=8-1&amp;amp;keywords=the+mathematica+book"&gt;The Mathematica Book&lt;/a&gt;»，算是了了多年来的一个夙愿。&lt;/p&gt;
&lt;p&gt;在我接触过的所有软件中，我最喜欢的两款，除了 &lt;a href="http://www.gnu.org/software/emacs/"&gt;Emacs&lt;/a&gt; ，就是 Mathematica 了。就设计而言，Mathematica 本身从 &lt;a href="http://maxima.sourceforge.net/"&gt;Maxima&lt;/a&gt; 身上获取了很多灵感，其语言设计也印有深刻的 Lisp 的 S-exp 的印记。Mathematica 语言设计的几个核心如下：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;统一的类 S-exp 的底层数据结构表示&lt;/li&gt;
&lt;li&gt;symbolic computation&lt;/li&gt;
&lt;li&gt;pattern matching&lt;/li&gt;
&lt;li&gt;rule-based tranformation&lt;/li&gt;
&lt;li&gt;lots of functional programming ideas&lt;/li&gt;
&lt;li&gt;literate programming, use notebook as an uniform interface.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;至于我为什么会心血来潮去学 Mathematica，很简单，just for fun。&lt;/p&gt;
&lt;h3 id="typography"&gt;Typography&lt;/h3&gt;
&lt;p&gt;15 年花了大量的时间精力系统地学习 Typography。这些工作包括&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;阅读&lt;a href="https://zh.wikipedia.org/zh-cn/%25E5%25B0%258F%25E6%259E%2597%25E7%25AB%25A0"&gt;小林章&lt;/a&gt;先生的«&lt;a href="https://book.douban.com/subject/25836269/"&gt;西文字体&lt;/a&gt;»，&lt;/li&gt;
&lt;li&gt;阅读 &lt;a href="http://www.typeisbeautiful.com/"&gt;Type is Beautiful&lt;/a&gt; 博客&lt;/li&gt;
&lt;li&gt;浏览新近起草的«&lt;a href="https://www.w3.org/TR/clreq/"&gt;W3C 中文排版需求&lt;/a&gt;»&lt;/li&gt;
&lt;li&gt;了解方正字体的&lt;a href="http://www.foundertype.com/index/release_info.html"&gt;商业授权&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;阅读«&lt;a href="http://www.amazon.com/Fonts-Encodings-Yannis-Haralambous/dp/0596102429/ref=sr_1_1?ie=UTF8&amp;amp;qid=1461162568&amp;amp;sr=8-1&amp;amp;keywords=font+and+encodings"&gt;Font &amp;amp; Encodings&lt;/a&gt;»，由于书籍比较晦涩而暂停&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Typography 是一个非常非常小众的领域，即便是在专业的前端和设计师圈内，关于 Typography 的讨论也非常少。系统地学习 Typography 让我明白，即便是生活中的司空见惯、习以为常，其背后也往往蕴藏着非常的讲究。一叶飘落而知秋，细微之处见真章——Typography 就是这样的一门学问，我很喜欢。&lt;/p&gt;
&lt;h3 id="frontend"&gt;Frontend&lt;/h3&gt;
&lt;p&gt;15 年自己开始着手打造一款产品，前端的技术短板就成了必须要解决的问题。尽管以前我用 &lt;a href="http://getbootstrap.com"&gt;Bootstrap&lt;/a&gt; 写过一些网站，但是我个人并不是很喜欢 Bootstrap 的写法。在寻找替代品的过程中，我发现了 &lt;a href="http://semantic-ui.com/"&gt;Semantic-UI&lt;/a&gt; 并很快被其语义化的写法吸引。我在 Semantic-UI 上投入了一些时间并尝试做了两三个网站，体验很棒。&lt;/p&gt;
&lt;p&gt;当然，熟练使用框架只能作为深入学习前端的第一步。了解基本的设计法则，理解 CSS 的核心概念，外加对细节品质的把控，都是 Web 前端必不可少的功课。为此，我还花了几周的时间纵览 &lt;a href="https://hackdesign.org"&gt;HACKDESIGN&lt;/a&gt; 的文档链接，加强了自己使用 Chrome Developer Tools 调试前端页面的能力。&lt;/p&gt;
&lt;p&gt;JavaScript 方面，15 年学习了 &lt;a href="http://vuejs.org/"&gt;Vue.js&lt;/a&gt; ，了解了下 &lt;a href="https://en.wikipedia.org/wiki/Model%25E2%2580%2593view%25E2%2580%2593viewmodel"&gt;MVVM&lt;/a&gt; 的理念。Vue.js 很棒，小巧灵活又不乏工程实践，学习曲线也适中，用来短平快地做一些前端应用很方便。我还花了一些时间系统地学习了下 &lt;a href="https://webpack.github.io/"&gt;webpack&lt;/a&gt;，了解了一些前端工程化方面的最新进展。&lt;/p&gt;
&lt;h3 id="docker"&gt;Docker&lt;/h3&gt;
&lt;p&gt;在给客户做项目的过程中，我顺手学习了下 &lt;a href="http://docker.io/"&gt;docker&lt;/a&gt;，并尝试用 &lt;a href="https://docs.docker.com/compose/"&gt;docker-compose&lt;/a&gt; 部署，结合 &lt;a href="https://github.com/jwilder/nginx-proxy"&gt;nginx-proxy&lt;/a&gt; 做简单的服务发现，用来部署个人项目着实很方便。&lt;/p&gt;
&lt;p&gt;不过在国内使用 docker 无法回避的一个难题就是国内糟糕的网络基础设施。糟糕的网络让 &lt;code&gt;docker pull&lt;/code&gt; 非常慢，同时， &lt;code&gt;docker build&lt;/code&gt; 过程中可能依赖的 &lt;a href="https://www.npmjs.com/"&gt;npm&lt;/a&gt;，&lt;a href="http://rubygems.org/"&gt;rubygems&lt;/a&gt; 等各种语言的 package 安装，也会由于网络问题导致超时错误，进而导致整个 &lt;code&gt;docker build&lt;/code&gt; 失败。这会让人非常的沮丧无助。&lt;a href="https://www.daocloud.io/"&gt;DaoCloud&lt;/a&gt; 提供的镜像服务也许可以缓解 &lt;code&gt;docker pull&lt;/code&gt; 的问题。&lt;/p&gt;
&lt;p&gt;我个人方面，花了 250 RMB 买了一套 &lt;a href="http://store.vmware.com/store/vmware/zh_CN/home"&gt;VMware Fusion Pro&lt;/a&gt; ，制作了一个包含多个 docker image 的虚拟机镜像，并利用 &lt;a href="https://www.vmware.com/support/ws5/doc/ws_clone_overview.html"&gt;linked clone&lt;/a&gt; 功能快速完成多套不同开发环境的构建。&lt;/p&gt;
&lt;h3 id="reading"&gt;Reading&lt;/h3&gt;
&lt;p&gt;除了工程实践，阅读上还是有些许积累的，依惯例，推荐部分书籍如下：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;«&lt;a href="https://book.douban.com/subject/25902942/"&gt;文明之光&lt;/a&gt;» 吴军博士的首部跨界之作，文笔内容俱佳&lt;/li&gt;
&lt;li&gt;«&lt;a href="https://book.douban.com/subject/24284785/"&gt;金融 e 时代&lt;/a&gt;» 从技术演进的视角梳理了金融界的变革&lt;/li&gt;
&lt;li&gt;«&lt;a href="https://book.douban.com/subject/25742211/"&gt;上帝掷骰子吗?&lt;/a&gt;» 武侠小说般的量子力学科普&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id="健身"&gt;健身&lt;/h2&gt;
&lt;p&gt;从 14 年初开始被肩颈背痛困扰，因此 14 年 7 月回杭之后办的第一件事就是阅读了大量复健资料并制定复健计划。15 年 2 月退出全职工作后，即在杭州市民中心花费 2000 RMB 办了张游泳健身年卡。总体上讲，15 年的锻炼坚持的不错，3–7 月份以健身为主，8–11 月份以游泳为主，全年平均下来每周约去锻炼 3-4 次。身体反馈上，肩颈已经基本恢复正常，腰背的疼痛也有很大缓解。&lt;/p&gt;
&lt;p&gt;比较意外的是在 11 月份发生了一次由&lt;a href="https://zh.wikipedia.org/wiki/%25E6%25A8%25AA%25E7%25BA%25B9%25E8%2582%258C%25E6%25BA%25B6%25E8%25A7%25A3%25E7%2597%2587"&gt;横纹肌溶解&lt;/a&gt;导致的急性肾损伤，肌酐 200，为此跑了几次医院，药石若干，外加卧床休息一周，总算是有惊无险。另，11 月份还自费 1300 RMB 去爱康国宾做了次全面体检，结论是十分健康，无大碍。&lt;/p&gt;
&lt;p&gt;依我的经验，25 岁以后人的精力体力会逐渐下降，而健康的身体充沛的精力对于高效的工作学习几乎是不可或缺的。我认为，在健康方面的投资要未雨绸缪。病去如抽丝，我在京三年，不注意锻炼，久坐成疾，在杭两年虽坚持锻炼，穷尽心力，身体也还没有恢复如初。或许，久坐不动导致的肩背问题就是需要持之以恒的锻炼健身方可恢复吧。&lt;/p&gt;
&lt;h2 id="旅行"&gt;旅行&lt;/h2&gt;
&lt;p&gt;15 年 5 月和妞一起去了趟韩国济州岛，8 月陪家人在广州深圳香港转了一圈，10 月和妞沿浙江福建海岸线自驾约一千公里，算起来共耗时约 20 天，花销约 20k RMB 左右。除此之外，6 月德清莫干山庚村，9 月陪阿黎在桐庐，12 月独行南京紫金山中山陵，均是单日行程，在此不细表。&lt;/p&gt;
&lt;h3 id="济州岛"&gt;济州岛&lt;/h3&gt;
&lt;p&gt;济州之行其实在计划之外。4 月份妞由于工作原因，高强度工作了整一个月，到 5 月份身心俱疲，因此就想找个地方散散心。粗略搜索，发现济州岛免签，机票也非常便宜，就当机立断订了机票酒店。早起，高铁到上海虹桥，在虹桥转了两圈才发现机票是从浦东出发，并且已经误机——妞大概是工作太累心智有些散，导致旅途安排失误。无奈加钱重新订了晚上出发的机票，趁空闲，参观了一个梵高的展览。&lt;/p&gt;
&lt;p&gt;济州几日总体非常顺利，虽偶有薄雾，但多数时间阳光漫洒。韩国人讲英文的很少，但借助 Wi-Fi、Google Maps 和岛上发达的公交系统，也几乎不会出现迷路的情况。偶尔碰上一两个英文讲得不错的，会让人着实开心一阵。岛上的公交系统让人印象深刻，即便是在偏僻的乡下，公交站牌也会完整的显示下一辆公交的到达时间，公交准点率也非常高。&lt;/p&gt;
&lt;p&gt;前面几天我们主要是游览海岸线附近的村镇和景点，最后一天我们决定深入岛中心——去爬汉拿山。天气不错，往返 20 公里，火山岩路和木板路交替，耗时约 9 个小时，还是有些挑战性的。登顶汉拿山，旅途也随之结束。下山，公交，登机，浦东机场摆渡，大巴到上海南站，两个小时卧铺回杭，天已微亮矣。&lt;/p&gt;
&lt;p&gt;&lt;a href="/static/image/2015/jizhoudao.jpg"&gt;&lt;img src="/static/image/2015/jizhoudao.jpg" /&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href="/static/image/2015/jizhoudao-haiyangguang.jpg"&gt;&lt;img src="/static/image/2015/jizhoudao-haiyangguang.jpg" /&gt;&lt;/a&gt;&lt;/p&gt;
&lt;h3 id="广州深圳香港"&gt;广州深圳香港&lt;/h3&gt;
&lt;p&gt;12 年弟弟刚上高中之时，入学成绩在一所地级中学排名是 Bottom 30% ，在我的悉心指导下，15 年弟弟最终的高考成绩在河北省是 Top 1%。14 年底我曾经承诺，如果弟弟成绩能保持不错，我会争取帮忙申请到香港读书——是的，我做到了，我的弟弟在我全权代理申请的帮助下，外加不错的高考成绩和运气，被香港理工大学录取了。这件事算得上我毕业后取得的最大成就——做事难，改变一个人的命运更难。&lt;/p&gt;
&lt;p&gt;也正是有此契机，8 月中下旬，我带上父母弟弟，全家四人，在广州深圳香港转了一大圈，加上 14 年曾经带父母在上海杭州转过一圈，至此，我已经带父母在北上广深杭——中国的一线城市转过，算是了了念想多年的一个心愿。&lt;/p&gt;
&lt;p&gt;广州三日，我租了辆标致 2008，游览了中山大学、广州塔、沙面使馆区、越秀公园，广州博物馆，在长隆动物园园内自驾，近距离接触了野生动物，车窗边触手可及的驼鸟让全家人兴奋不已。&lt;/p&gt;
&lt;p&gt;深圳两日，换了一辆便宜的本田飞度，驱车沿惠深沿海公路去西冲沙滩，路旁港口繁忙的集装箱码头让全家人大开眼界。在西冲，我带着全家人第一次下海游泳，大家兴奋坏了，直接导致全家人中度晒伤，全身发红，即便是旅途结束回到家中，最终也是休养了一周蜕了一层皮才完全康复。&lt;/p&gt;
&lt;p&gt;香港两日，太平山，蜡像馆，星光大道，维港夜色，匆匆旅途终作别。&lt;/p&gt;
&lt;p&gt;&lt;a href="/static/image/2015/guangzhou-shenzhen-xianggang.jpg"&gt;&lt;img src="/static/image/2015/guangzhou-shenzhen-xianggang.jpg" /&gt;&lt;/a&gt;&lt;/p&gt;
&lt;h3 id="浙闽自驾"&gt;浙闽自驾&lt;/h3&gt;
&lt;p&gt;10 月国庆，和妞一起，沿浙闽两省海岸线，经宁波象山、温州洞头、福建霞浦三地，耗时 5 天，行程 1000 km，花费约 3000 RMB。令人印象最为深刻的当属福建霞浦的大片滩途和海上城市。&lt;/p&gt;
&lt;p&gt;&lt;a href="/static/image/2015/ningbo-wenzhou-xiapu.jpg"&gt;&lt;img src="/static/image/2015/ningbo-wenzhou-xiapu.jpg" /&gt;&lt;/a&gt;&lt;/p&gt;
&lt;h2 id="经济"&gt;经济&lt;/h2&gt;
&lt;p&gt;经济上其实也没啥可总结的，两个字，月光。&lt;/p&gt;
&lt;p&gt;除了打短工进项 80k RMB，支出如下：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;硬件：
&lt;ul&gt;
&lt;li&gt;年初购置 rmbp 高配定制，13k RMB&lt;/li&gt;
&lt;li&gt;购置 iPhone 6S 128G，6200 RMB&lt;/li&gt;
&lt;li&gt;购置山业 MA059 立式无线鼠标及配套，600 RMB&lt;/li&gt;
&lt;li&gt;购置 Toshiba 2TB 移动硬盘，600 RMB&lt;/li&gt;
&lt;li&gt;海淘 Bose Soundlink Mini II 音箱，1300 RMB&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;li&gt;软件：
&lt;ul&gt;
&lt;li&gt;正版 Mathematica 10 Home Edition: 250 USD&lt;/li&gt;
&lt;li&gt;正版 VMware Fusion Pro: 250 RMB&lt;/li&gt;
&lt;li&gt;正版 Windows 7：500 RMB&lt;/li&gt;
&lt;li&gt;&lt;a href="https://www.alfredapp.com/powerpack/"&gt;Alfred Powerpack&lt;/a&gt;: 17 Euro&lt;/li&gt;
&lt;li&gt;&lt;a href="https://kapeli.com/dash"&gt;Dash&lt;/a&gt;: 30 USD&lt;/li&gt;
&lt;li&gt;App Store 杂项：约有 100 RMB&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;li&gt;协助弟弟申请：4000 RMB&lt;/li&gt;
&lt;li&gt;捐款合计约 1500RMB&lt;/li&gt;
&lt;li&gt;旅行支出约 20k RMB&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;总得来讲，就我个人而言，基本上也只能做到收支平衡。还是要感谢妞的支持，能让我这么长时间不误正业，作为回报，我承担了 90% 的家务和 95% 的铲屎工作。&lt;/p&gt;
&lt;p&gt;Last but not least，我们买房了。显然，像我这种不误正业的人是无法凑足首付的。要感谢父母的大力支持，以及妞对杭州土地市场洞若观火的深刻理解。背了房贷，也许以后工作赚钱上会更靠谱一些吧😇。&lt;/p&gt;
&lt;h2 id="家庭"&gt;家庭&lt;/h2&gt;
&lt;p&gt;和妞有分工，没矛盾，一片和谐。&lt;/p&gt;
&lt;p&gt;帮助弟弟学习英文，备考，选校，申请，赴港，头功一件，善莫大焉。&lt;/p&gt;
&lt;p&gt;带父母出行，辛苦安排，了却心愿。&lt;/p&gt;
&lt;p&gt;美中不足，是父亲离港返家后，和母亲闹离婚、分财产，让我万分寒心，大发雷霆，不管不顾，把父亲臭骂了一痛。年近三十还要处理父母关系的麻烦事，实在是让我心烦。唉，唯徒叹奈何矣。&lt;/p&gt;
&lt;h2 id="社交"&gt;社交&lt;/h2&gt;
&lt;p&gt;15 年个人社交非常有限，所识所见，多为老友。如前所述，远程工作会让人的社交能力有所下降，这是次要原因，主要原因还是我本人对日常社交提不起兴趣，相反，我倒是很享受一个人的状态，即便是每天只能对着两只猫说说闲话。&lt;/p&gt;
&lt;p&gt;3、4 月曾经应一位浙大老师之邀，组织过 4 次读书会，成员除了我和浙大老师，还有我的大学室友、前公司一位同事、一们杭州某中学的数学老师、一位杭州某中学的语言老师，和一们浙大的博士。前面几次读书会主要是我在分享互联网相关。但是由于大家背景各异，工作繁忙，时间很难安排，加上我和浙大老师关于中国互联网审查上的一些观点冲突，读书会在办了 4 期之后就停止了，很遗憾。&lt;/p&gt;
&lt;p&gt;7 月份曾接受了浙大校友会活动的一个采访，分享了下大学期间社团户外的一些经历和反思。长江后浪，朝气蓬勃，不免感怀。&lt;/p&gt;
&lt;h2 id="尾"&gt;尾&lt;/h2&gt;
&lt;p&gt;就以一首歌来结束我的 2015，和，这一篇迟到这么久的年终总结吧。&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;当你老了头发白了&lt;/p&gt;
&lt;p&gt;睡意昏沉&lt;/p&gt;
&lt;p&gt;当你老了走不动了&lt;/p&gt;
&lt;p&gt;炉火旁打盹回忆青春&lt;/p&gt;
&lt;p&gt;多少人曾爱你青春欢唱的时辰&lt;/p&gt;
&lt;p&gt;爱慕你的美丽假意或真心&lt;/p&gt;
&lt;p&gt;只有一个人还爱你虔诚的灵魂&lt;/p&gt;
&lt;p&gt;爱你苍老的脸上的皱纹&lt;/p&gt;
&lt;p&gt;当你老了眼眉低垂&lt;/p&gt;
&lt;p&gt;灯火昏黄不定&lt;/p&gt;
&lt;p&gt;风吹过来你的消息&lt;/p&gt;
&lt;p&gt;这就是我心里的歌&lt;/p&gt;
&lt;p&gt;多少人曾爱你青春欢唱的时辰&lt;/p&gt;
&lt;p&gt;爱慕你的美丽假意或真心&lt;/p&gt;
&lt;p&gt;只有一个人还爱你虔诚的灵魂&lt;/p&gt;
&lt;p&gt;爱你苍老的脸上的皱纹&lt;/p&gt;
&lt;p&gt;当你老了眼眉低垂&lt;/p&gt;
&lt;p&gt;灯火昏黄不定&lt;/p&gt;
&lt;p&gt;当我老了我真希望&lt;/p&gt;
&lt;p&gt;这首歌是唱给你的&lt;/p&gt;
&lt;p&gt;— 莫文蔚 «当你老了»&lt;/p&gt;
&lt;/blockquote&gt;
</content>
  </entry>
  <entry>
    <id>tag:xiaohanyu.me,2015-04-10:/posts/2015-04-10-2014-summary/</id>
    <title type="html">2014，漫步</title>
    <published>2015-04-10T15:29:37Z</published>
    <updated>2017-04-29T08:08:52Z</updated>
    <link rel="alternate" href="http://xiaohanyu.me/posts/2015-04-10-2014-summary/"/>
    <content type="html">&lt;p&gt;“亡羊补牢，未为迟也”，15 年已然过了三分之一，而我才开始憋 14 年的年终总结，想来必是颓废日久，点墨已尽的缘故。Anyway, better late than never。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="http://xiaohanyu.me/posts/2012-01-01-2011-summary/"&gt;再见，2011&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="http://xiaohanyu.me/posts/2013-01-11-2012-summary/"&gt;2012，静水深流&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="http://xiaohanyu.me/posts/2014-03-03-2013-summary/"&gt;2013，青春绝版&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;自 11 年毕业后开始养成写年终总结的习惯。时过四载，本人依旧无功无业，闲散江湖。所赖家妻不弃，下嫁与我，如此，14 年才总算没有白过。&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;很多事来不及思考&lt;/p&gt;
&lt;p&gt;就这样自然发生了&lt;/p&gt;
&lt;p&gt;在丰富多彩的路上&lt;/p&gt;
&lt;p&gt;注定经历风雨&lt;/p&gt;
&lt;p&gt;让它自然地来吧&lt;/p&gt;
&lt;p&gt;让它悄然地去吧&lt;/p&gt;
&lt;p&gt;就这样微笑地看着自己&lt;/p&gt;
&lt;p&gt;漫步在这人生里&lt;/p&gt;
&lt;p&gt;yeah 当往事悄然走远&lt;/p&gt;
&lt;p&gt;只留下清澈的心&lt;/p&gt;
&lt;p&gt;yeah 让我们相互温暖&lt;/p&gt;
&lt;p&gt;漫步在这阳光里&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;这一年我 26 周岁，自 16 岁离家求学至今，已逾十载。&lt;/p&gt;
&lt;h2 id="结婚"&gt;结婚&lt;/h2&gt;
&lt;p&gt;这一年我结婚了。是的，如果说这一年我还算有些功业，那就是“把婚给结了吧”。结婚于我于妞，其实是件俗气难当，耗时耗财的苦差事。前几年每次我父母提到婚礼的事情，都会被我一口否决。我知道父亲的心思，一是墨守成规，二是臭显摆，三么，则是想通过我们的婚礼将以前随出去的份子钱“赚”回来。怎么说咱也是受过几年高等教育，读过几本圣贤书，有理想有追求有品味的三好有为青年，21 世纪新好男人，对于这种千篇一律的所谓“婚礼”实在是不胜其烦。&lt;/p&gt;
&lt;p&gt;但是自从 13 年父亲车祸以后，他变得越发娇气，情绪反复波动，因此为了让他开心一些，在婚礼这件事上，我做了让步，而这就是我全年苦难的开始。究其原因，一是文化代沟，二是地域差异。文化代沟让我们在礼节协调上费了无数口舌，而地域差异则让我们在行程安排上耗了大把心力。&lt;/p&gt;
&lt;p&gt;我记得 14 年 2 月 14 日，情人节，一个雾霾阴布的下午，妞拉着我去北京国家会议中心挤婚博会，疲累不堪。&lt;/p&gt;
&lt;p&gt;我记得北京有个婚纱摄影基地叫温榆河，然后我们路过那里时发现其就是一条蚊子漫天的臭水沟，连杭州城内随便一条小河都比不过。&lt;/p&gt;
&lt;p&gt;我记得我们为了拍一套不错的婚纱，讲价、下单、包车，拍摄、选片，修图，前后折腾了有十个来回。&lt;/p&gt;
&lt;p&gt;我记得我们为了买几套合身的礼服，探店、量身，裁剪，定做，返工，寄送，前后又折腾了十个来回。&lt;/p&gt;
&lt;p&gt;我记得我们耗费重金买的戒指项链，到头来也不过是个摆设，长期锁在柜子里，只有回家见亲时方才穿戴。&lt;/p&gt;
&lt;p&gt;我记得 4 月份，我们带着几乎从没出过远门没坐过飞机高铁的父母，不远千里来浙拜亲。母亲好心，竟带了 30kg 的土特产一路随行，北京-&amp;gt;上海-&amp;gt;杭州-&amp;gt;台州，作为队伍里唯一的壮年劳力，我在车站弓着屁股推着箱子，亦乐亦苦？我记得在杭州地铁站，父亲踌躇良久，但就是搞不清楚出站时该把地铁票插回到哪里，弄得我哭笑不得，亦乐亦苦？我记得临行之前，他们在家里吵天闹地，要我取消行程，退订机票，我在北大未名湖畔，泪水夺框，心绪难平，亦乐亦苦？我记得行程将尽，晚餐小聚，发小作陪，父亲酒至，再起口角，惹得我心痛难当，脸面无光，破口大骂，歇斯底里，亦乐亦苦？&lt;/p&gt;
&lt;p&gt;我记得 10 月份，我们又带着妞的父母外公阿姨表弟一干人等，不远千里来冀回亲。外公年老，辛苦一生，从未去过北京拜过伟大领袖毛主席。我和妞起早贪黑，披星戴月，带着外公父母，天安门、故宫、天坛、长城、北大，不厌其烦，不胜其累，亦乐亦苦？&lt;/p&gt;
&lt;p&gt;长尊父母，谓之奈何也。&lt;/p&gt;
&lt;p&gt;我记得在婚礼当日，我们站在门口迎客，却迎来断续不绝的乞丐打着竹板过来跟我们讨喜钱——原来他们也算定吉日黄道，喜事多金。&lt;/p&gt;
&lt;p&gt;亦乐亦苦？&lt;/p&gt;
&lt;p&gt;婚礼之于我们，更多是为了满足父母虚荣演一场戏罢了。现实不允许我们造一个日光倾城的大梦，我们所能做的，只是在两代亲朋、两块地域、两种风俗之间辛苦周旋，不求华丽出彩，但求顺利过关。没有新马泰蜜月旅行，没有大房子装修一新，送走所有亲朋后，我们回到杭州，回到自己租住的十几平米的小房子里，休整一天，然后她去上班，我也去上班。&lt;/p&gt;
&lt;p&gt;&lt;a href="/static/image/2014/xibeixing-dajiaoya.jpg"&gt;&lt;img src="/static/image/2014/xibeixing-dajiaoya.jpg" /&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href="http://oh-my-love.xiaohanyu.me/"&gt;所谓相行，即是人生&lt;/a&gt;。&lt;/p&gt;
&lt;h2 id="工作"&gt;工作&lt;/h2&gt;
&lt;p&gt;这一年，工作上依然是散漫无边，除了仰仗朋友介绍一些私活赚了点养家糊口的钱，几乎毫无建树。年底曾短暂加入一个创业团队负责人员招聘技术选型等初期工作，但是最终一败涂地，悻悻退出。工作几年来，我一直努力在 DevOps, Web Framework, Programming Languages 方面广泛涉猎，力求融汇兼通——尚不敢妄想“贯通”一词。一方面，我并不想过早地把自己的职业规划限定于一个狭窄的领域内，另一方面，我常常能在广泛的阅读和跨领域的思考中迸发出很多灵感，这带给我很多的快乐。&lt;/p&gt;
&lt;p&gt;就我个人而言，我发现自己很难在某一方面成为顶尖，比如编程，我根本就不是一个顶尖的算法工程师或系统工程师；比如设计，我恐怕也只是刚刚入了前端开发的门；再如写作，我写的东西无非是自我记录日常反省，尚无他长。我的专长可能在于，我可以将这几方面融合，并以工程师的耐心配以变通，调教出一些还不错的成果。&lt;/p&gt;
&lt;p&gt;说到底， &lt;strong&gt;手艺人，耐心和变通乃生身立命之本。&lt;/strong&gt;&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;“You literally ought to be asking yourself all the time what is the most important thing in the world I could be working on right now, and if you are not working on that why aren’t you?”&lt;/p&gt;
&lt;p&gt;— &lt;a href="https://en.wikipedia.org/wiki/Taren_Stinebrickner-Kauffman"&gt;Taren Stinebrickner-Kauffman&lt;/a&gt; describing her partner, &lt;a href="https://en.wikipedia.org/wiki/Aaron_Swartz"&gt;Aaron Swartz&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;专业方面，这一年在 Clojure/Haskell/Ruby/JavaScript 方面均有所涉猎，但是所研甚浅，并且尚无机会加以实践，因此所得有限；前半年花了很多时间在系统性地学习前端开发和字体设计的一些基础知识，最终总算能用 Bootstrap 做出还算过得去的网站（比如本博客）；后半年曾花了很长时间思考实践 HTTP RESTful API 的设计以及前后端的对接实现，这方面倒是颇有心得。Open Source 方面，我依旧在很好地维护着 &lt;a href="https://github.com/xiaohanyu/oh-my-emacs"&gt;oh-my-emacs&lt;/a&gt; ，目前 oh-my-emacs 已经是世界上最好的 dotemacs 项目之一，并在全球范围内逐渐形成了自己的用户群。有几次我去 Github 上处理 issues，却发现 oh-my-emacs 用户之间已经讨论完毕并给出了很好的解决方案，我所能做的就是将用户的讨论提炼精简，写在 oh-my-emacs 里面。可见即便是一个原理很简单的项目，将其做到极致，或许也会有莫大的价值。&lt;/p&gt;
&lt;h2 id="阅读"&gt;阅读&lt;/h2&gt;
&lt;p&gt;这一年读书很少，很多技术书只读到一半就读不下去了，究其原因，是自己的基础不足，想深入却碰到了自己的瓶颈。在前面几年的学习中，我更多关注的是工具框架方面的知识，而对基础原理方面的知识关注有限。我想，一项工具一门框架的学习可能只需要几周，但是一门理论基础往往需要几年的坚持。因此在新的一年，我会将更多的时间投入到基础理论的学习中去。顺便，还是推荐下 14 年读过并觉得不错的书籍吧：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;《&lt;a href="http://book.douban.com/subject/6518605/"&gt;地球往事&lt;/a&gt;》： 有人说，读完三体，再抬头看星空，感觉就不一样了，嗯，是这样的&lt;/li&gt;
&lt;li&gt;《&lt;a href="http://book.douban.com/subject/20507206/"&gt;众病之王&lt;/a&gt;》： “永生带来的是死亡”，非常精彩的关于癌症的科普书&lt;/li&gt;
&lt;li&gt;《&lt;a href="http://book.douban.com/subject/1076685/"&gt;李鸿章传&lt;/a&gt;》： “天下唯庸人无咎无誉”，任公笔力磅薄，目光如炬，世间奇才&lt;/li&gt;
&lt;li&gt;《&lt;a href="http://book.douban.com/subject/7067916/"&gt;施瓦辛格健身全书&lt;/a&gt;》： “行走的解剖模型”，极好的健身教程&lt;/li&gt;
&lt;li&gt;《&lt;a href="http://book.douban.com/subject/25717097/"&gt;囚徒健身&lt;/a&gt;》： 也是极好的健身书，适合不方便去健身房的朋友&lt;/li&gt;
&lt;li&gt;《&lt;a href="http://book.douban.com/subject/3554091/"&gt;钱途&lt;/a&gt;》： 极好的关于风险投资行业的科普扫盲书&lt;/li&gt;
&lt;li&gt;《&lt;a href="http://book.douban.com/subject/20507578/"&gt;The Healthy Programmer&lt;/a&gt;》： 程序员健康指南书&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id="一路向西"&gt;一路向西&lt;/h2&gt;
&lt;p&gt;这一年年中，我和妞两个人，手里攥着 16 张火车票，千山万水，从太原、平遥，到延安、西安，到张掖、敦煌，一路向西，转了好大一圈。&lt;/p&gt;
&lt;p&gt;&lt;a href="/static/image/2014/xibeixing-binggou.jpg"&gt;&lt;img src="/static/image/2014/xibeixing-binggou.jpg" /&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href="/static/image/2014/xibeixing-jiayuguan.jpg"&gt;&lt;img src="/static/image/2014/xibeixing-jiayuguan.jpg" /&gt;&lt;/a&gt;&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;毕业季&lt;/p&gt;
&lt;p&gt;他们终将离开呆了三年的北京&lt;/p&gt;
&lt;p&gt;“去趟大西北吧”&lt;/p&gt;
&lt;p&gt;“好哇”&lt;/p&gt;
&lt;p&gt;一周后&lt;/p&gt;
&lt;p&gt;手握十六张火车票&lt;/p&gt;
&lt;p&gt;他们再次踏上征途&lt;/p&gt;
&lt;p&gt;太原街头&lt;/p&gt;
&lt;p&gt;胡同里飘出来的芬芳醋香&lt;/p&gt;
&lt;p&gt;平遥夜色&lt;/p&gt;
&lt;p&gt;王家大院&lt;/p&gt;
&lt;p&gt;壶口奇遇&lt;/p&gt;
&lt;p&gt;红色延安&lt;/p&gt;
&lt;p&gt;不变的革命老区&lt;/p&gt;
&lt;p&gt;古色西安&lt;/p&gt;
&lt;p&gt;壮观的秦皇兵俑&lt;/p&gt;
&lt;p&gt;钟鼓相望&lt;/p&gt;
&lt;p&gt;老友相伴&lt;/p&gt;
&lt;p&gt;“劝君更进一杯酒，西出阳关无故人”&lt;/p&gt;
&lt;p&gt;丹霞&lt;/p&gt;
&lt;p&gt;五彩斑斓&lt;/p&gt;
&lt;p&gt;天下奇观&lt;/p&gt;
&lt;p&gt;冰沟&lt;/p&gt;
&lt;p&gt;踏上观景台的那一刻&lt;/p&gt;
&lt;p&gt;蓝天&lt;/p&gt;
&lt;p&gt;白云&lt;/p&gt;
&lt;p&gt;雪山&lt;/p&gt;
&lt;p&gt;两个傻孩子&lt;/p&gt;
&lt;p&gt;在大西北的空旷浩远面前&lt;/p&gt;
&lt;p&gt;忘乎所以&lt;/p&gt;
&lt;p&gt;敦煌&lt;/p&gt;
&lt;p&gt;莫高窟&lt;/p&gt;
&lt;p&gt;鸣沙月泉&lt;/p&gt;
&lt;p&gt;大漠孤烟&lt;/p&gt;
&lt;p&gt;铁马秋风&lt;/p&gt;
&lt;p&gt;楼般夜雪&lt;/p&gt;
&lt;p&gt;此行将尽&lt;/p&gt;
&lt;p&gt;尽在嘉峪关头&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2 id="离京回杭"&gt;离京回杭&lt;/h2&gt;
&lt;p&gt;西北归来，两个人马上着手离京回杭事宜。在京北漂三年，事情完成的不多，行李却积攒不少。两个人花了整整三天的时间才将所有行李打包完毕，最终花了 1000 大洋，寄了 600kg 的行李到杭州。而彼时我们还没有到杭州找房子，因此想了个折衷的办法，先把行李寄到同事家，再转运到租住的地方。当然，这次我们希望物流可以慢一些，最好等我们找好房子后直接转送到新的住处。所幸，我们最终也是这么做的。&lt;/p&gt;
&lt;p&gt;北漂三年，一事无成。韶华已逝，岁月蹉跎，彷徨岁月，且行且思。&lt;/p&gt;
&lt;p&gt;在京三年，全职工作不到两年，闲散飘荡一年有余，刚好赚够了养家糊口的钱，离京时已所剩不多；经历了运维测试研发各种工作，也接触到了大小不一风格迥异的团队；学会了 functional programming 的基本思想；学会了基本的 web 开发；精通 git 和 github，有了自己的 open source 项目并维护至今；读书，各种书籍大约 200 余本；帮助家里处理了各种各样的杂事。&lt;/p&gt;
&lt;p&gt;在京三年，由于妞的缘故，基本上生活还是没有脱离学校的圈子。想起来，吃北大的食堂，看讲堂的电影，走未名的小路，泡北大的研究妞，还是蛮幸福的，哈。&lt;/p&gt;
&lt;p&gt;无可否认，就互联网行业的资源和机会而言，北京确实是首屈一指；但是我和妞就是不喜欢北京那股围绕户口所建立起来的各种壁垒和优越感；就是不喜欢北京那种以牺牲周边地区利益换取自身发展的模式；就是不喜欢北京冬天那看不清扫不尽的雾霾；就是不喜欢北京那脏兮兮的马路牙子；就是不喜欢北京那不相配套的基础设施服务。&lt;/p&gt;
&lt;p&gt;我想我们应该不会再回到北京。世界这么大，没有必要为了所谓户口将自己的大好青春耗在一个城市。&lt;/p&gt;
&lt;p&gt;14 年 7 月 1 日，我和妞告别了北大的师长同学，高铁 5 个小时到达阴雨绵绵的杭州。次日，在某家星级酒店的顶层餐厅，俯瞰钱塘吃好早餐后，妞就去上班了。&lt;/p&gt;
&lt;p&gt;她直接被分配到杭州郊区的工地，发了安全帽和安全鞋。&lt;/p&gt;
&lt;p&gt;这让我们产生了极强的虚空感。&lt;/p&gt;
&lt;p&gt;“再见，北京”。&lt;/p&gt;
&lt;p&gt;&lt;a href="/static/image/2012/beijing-zhiwuyuan.jpg"&gt;&lt;img src="/static/image/2012/beijing-zhiwuyuan.jpg" /&gt;&lt;/a&gt;&lt;/p&gt;
&lt;h2 id="健身"&gt;健身&lt;/h2&gt;
&lt;p&gt;大概是从 13 年底，我开始被持续不断的肩颈背痛所困扰。酸痛倒是其次，主要是影响自己的工作学习效率，让我颇为恼火。因此离京回杭后下定决心开始锻炼，理论和实践双管齐下，坚持半年有余，总算有所控制。&lt;/p&gt;
&lt;p&gt;想来还是北京三年过于闷宅，锻炼有限，得此报应。好在事情尚未进展到不可逆转的地步。不过慢性病的特点在于发病慢，恢复也慢。因此要想完全恢复，怕是要打场持久战。&lt;/p&gt;
&lt;p&gt;工科男做事的方法就是工程化——调研、规划、对比，方方面面考虑周全。为了控制病痛恢复健康，14 年下半年主要在如下方面做了很多努力：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;系统性地学习基础健身知识，阅读完成了 3 本入门的健身书籍&lt;/li&gt;
&lt;li&gt;7 - 9 月份系统性地进行家中无器械健身训练，循序渐进，对比效果&lt;/li&gt;
&lt;li&gt;10 - 12 月份工作期间，购置 &lt;a href="http://www.amazon.com/Logitech-910-001799-M570-Wireless-Trackball/dp/B0043T7FXE"&gt;Dahon SP8&lt;/a&gt; 折叠车，每天骑行，双程 25km，通勤锻炼。&lt;/li&gt;
&lt;li&gt;购置 &lt;a href="http://ergohuman.com/ergohuman-chair-me7erg-high-back-with-headrest-and-mesh/"&gt;Ergohuman&lt;/a&gt; 人体工学座椅， &lt;a href="http://item.jd.com/1242699109.html"&gt;ThinkWise s100&lt;/a&gt; 显示器支架&lt;/li&gt;
&lt;li&gt;购置 &lt;a href="http://www.logitech.com/en-us/product/wireless-trackball-m570"&gt;Logitech M570&lt;/a&gt; 轨迹球鼠标，缓解鼠标手&lt;/li&gt;
&lt;li&gt;购置简易升降桌，尝试站立式办公&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;在这种全方位立体化多角度的打击下，我的肩颈背痛总算有所收敛。在此奉劝各位程序员朋友，工作失去随时找，健康失去不再来。有时间我会再写一篇《程序员健康指南》，记录下我在这方面的心得。&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Imagine life as a game in which you are juggling some five balls in the air. You name them—work, family, health, friends and spirit—and you’re keeping all of these in the air. You will soon understand that work is a rubber ball. If you drop it, it will bounce back. But the other four balls—family, health, friends and spirit—are made of glass. If you drop one of these, they will be irrevocably scuffed, marked, nicked, damaged or even shattered. They will never be the same. You must understand that and strive for balance in your life.&lt;/p&gt;
&lt;p&gt;— &lt;a href="https://en.wikipedia.org/wiki/Brian_Dyson"&gt;Brian Dyson&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2 id="养猫"&gt;养猫&lt;/h2&gt;
&lt;p&gt;14 年 9 月份，趁妞出差之际，我领养了两只两个月大的三花小母猫，成了一名光荣的铲屎大将军。不出所料，它们带给了我很多乐趣，陪我度过了一个个灯下漫笔的“寂寞”时光，谓之为程序员的好伴侣，一点也不为过。我和妞给它们取了名字，分别叫“小木”和“小鱼”，此乃大名，而生活中我们则直接呼之为“大臭臭”和“小臭臭”。&lt;/p&gt;
&lt;p&gt;说实话，两只土猫长得并不好看，远逊于纯种猫；其中那只小臭猫，长得尤其丑，又丑、又臭、又馋、又笨、又胆小，并且还总是莫名其妙地受伤。最开始我们一点也不喜欢它。可是看它那臭笨滑稽楚楚可怜的样子看得多了以后，也就默默认可了它。&lt;/p&gt;
&lt;p&gt;妞本来是反对我养猫的，嫌麻烦。但是精诚所致金石为开，当我负担了所有的铲屎工作和卫生清洁后，妞也就默许了。再后来生活日久，感情日深，一家人总算其乐融融。每个寂静的夜，读书写码，一妞二喵相伴，常让我有“生活惬意如此，夫复何求”的感慨。每天晨光初现，两只喵就会在你耳边，徘徊盘旋，逮住机会就亲你一口，呼呼呼呼地把你弄醒——当然，我睡得沉，经常毫无知觉，而妞则经常被亲醒，无可奈何。&lt;/p&gt;
&lt;p&gt;我自称为猫“爸爸”，称妞为猫“妈妈”，有时“爸爸妈妈”地叫得频繁，妞就问我是不是真想“封山育林，播种造人”了，我但莞尔。半年多来，我负责它们饮食起居，给它们洗澡上药，逗它们开心，也喝止它们惹祸，细想起来，还真和养个孩子差不多呢。&lt;/p&gt;
&lt;p&gt;&lt;a href="/static/image/2014-cat.jpg"&gt;&lt;img src="/static/image/2014-cat.jpg" /&gt;&lt;/a&gt;&lt;/p&gt;
&lt;h2 id="散财"&gt;散财&lt;/h2&gt;
&lt;p&gt;这一年依然保持着不间断的 donation 习惯。&lt;/p&gt;
&lt;p&gt;13 年的时候我曾经每个月向我喜欢的 Free/Open Source 软件捐钱（每次 100rmb 左右），这样大概捐助了 Emacs/Vim/KDE 等，捐了七、八次后发现可捐的软件不多，因此今年年中开始向 Wikipedia 捐钱，每个月 5 美金，折合每天 1rmb。除此之外，每月定向捐助 100rmb。&lt;/p&gt;
&lt;p&gt;Money comes and goes.&lt;/p&gt;
&lt;h2 id="买车"&gt;买车&lt;/h2&gt;
&lt;p&gt;14 年 8 月，由于妞的工作需要，我们购置了一辆 Ford Focus。这是意料之外的事情。很惭愧，我们手头的钱远远不够，因此最终还是在借了家里的赞助。老实说，我和妞都不愿意向家里开口。即便是婚礼，我们也是自己负担了大部分的礼服、摄影等费用。&lt;/p&gt;
&lt;p&gt;说到底，我们只是不想因为金钱的缘故在自由方面向长辈妥协。我们的父母眼界过于狭窄，总是想着要把子女留在自己身边，努力赚钱为子女准备房车、铺好一条在他们看来金光闪闪的人生大道，同时也把自己后半生的幸福全部压在子女身上。&lt;/p&gt;
&lt;p&gt;而这无形之中带给了我们相当大的心理压力。因此不到万不得已，我们不会向父母开口。&lt;/p&gt;
&lt;p&gt;这次买车是刚需。一方面，妞的工作性质决定每天上下班要 30km，并且经常要到处出差，另一方面，买车之后公司提供的补助也足够我们负担养车的所有费用并能有点结余。&lt;/p&gt;
&lt;p&gt;Anyway, 有车之后望着天窗听雨打在车顶上的声音，感觉还是很不错的。跨年夜，当我们开着车在夜黑风高空无一车的高速公路上急驰时，我们未曾意识到， &lt;strong&gt;彼时此刻，不经意间，我们都已长大成人，要开始新的征程了&lt;/strong&gt; 。&lt;/p&gt;
</content>
  </entry>
  <entry>
    <id>tag:xiaohanyu.me,2014-07-25:/posts/2014-07-25-build-static-site-with-nanoc-2/</id>
    <title type="html">Build Static Site with Nanoc (II)</title>
    <published>2014-07-25T14:19:17Z</published>
    <updated>2017-04-29T08:08:52Z</updated>
    <link rel="alternate" href="http://xiaohanyu.me/posts/2014-07-25-build-static-site-with-nanoc-2/"/>
    <content type="html">&lt;p&gt;&lt;a href="http://xiaohanyu.me/2014/05/04/build-static-site-with-nanoc-1/"&gt;上篇&lt;/a&gt;主要讲了用 nanoc 来构建一个 static site 的基本原理，这一篇专注于这个 blog 本身的一些设计。&lt;/p&gt;
&lt;h2 id="bootstrap"&gt;Bootstrap&lt;/h2&gt;
&lt;p&gt;&lt;a href="http://getbootstrap.com/"&gt;Bootstrap&lt;/a&gt; 现在大概已经成为像我一样的半吊子前端写网站的标配了吧，简单，明了，快捷，简直是为我这种人量身定做的。最开始我也是想一切自己动手，奈何还是没有禁住 Bootstrap 各种漂亮主题及插件的诱惑，最终还是不能免俗，从了 Bootstrap。&lt;/p&gt;
&lt;p&gt;其实类似于 Bootstrap 的前端框架还是有一些的，比如 &lt;a href="http://foundation.zurb.com/"&gt;Foundation&lt;/a&gt; 和 &lt;a href="http://semantic-ui.com/"&gt;Semantic UI&lt;/a&gt; 。Semantic UI 甚至在其官方主页上指出了 Bootstrap 命名规则的混乱。不过 Bootstrap 最大的优势在于它的普及(&lt;del&gt;烂大街&lt;/del&gt;)，这种普及甚至使得 Bootstrap 成了一个平台。&lt;/p&gt;
&lt;p&gt;较好的 Bootstrap 主题和模板：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="http://startbootstrap.com/" class="uri"&gt;http://startbootstrap.com/&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://wrapbootstrap.com/" class="uri"&gt;https://wrapbootstrap.com/&lt;/a&gt; ，很多收费&lt;/li&gt;
&lt;li&gt;&lt;a href="http://www.blacktie.co/" class="uri"&gt;http://www.blacktie.co/&lt;/a&gt; ，似乎是由个人设计师设计维护的 Bootstrap 主题站，质量都很不错&lt;/li&gt;
&lt;li&gt;&lt;a href="http://bootswatch.com/" class="uri"&gt;http://bootswatch.com/&lt;/a&gt; ，免费的 CSS 主题文件，使用简单，替换原有 Bootstrap 的 CSS 文件即可。&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;另外， &lt;a href="http://bootsnipp.com/"&gt;Bootsnipp&lt;/a&gt; 提供了非常全面的各种有用的基于 Bootstrap 的 code snippets 和设计元素。本 blog 的 timeline 类型的 Archives 页面就来源于此。&lt;/p&gt;
&lt;h2 id="jscss-compress"&gt;JS/CSS compress&lt;/h2&gt;
&lt;p&gt;JS/CSS compress/minify 应该是前端开发的基本常识了。nanoc 中提供了 &lt;a href="http://nanoc.ws/docs/api/Nanoc/Filters/Rainpress.html"&gt;rainpress&lt;/a&gt; 和 &lt;a href="http://nanoc.ws/docs/api/Nanoc/Filters/UglifyJS.html"&gt;uglify_js&lt;/a&gt; 两个 filter，分别用于 CSS 和 JS 文件的压缩。但实际中，我们往往会有多个 JS/CSS 文件，而我们希望能将其压缩成单个 JS/CSS 文件。这方面 nanoc 没有提供内置的解决方案。好在 Google 是万能的，完美的&lt;a href="http://jakoblaegdsmand.com/blog/2012/12/minifying-js-and-css-in-nanoc/"&gt;解决方案&lt;/a&gt;也是存在的，感谢 &lt;a href="http://jakoblaegdsmand.com/"&gt;Jakob&lt;/a&gt; 。&lt;/p&gt;
&lt;p&gt;Jakob 的 blog 写得浅显易懂，其主要的优点是可以通过 &lt;code&gt;nanoc.yml&lt;/code&gt; 中的 &lt;code&gt;debug&lt;/code&gt; 选项来启停 JS/CSS 的压缩。具体的原理和代码我就不再这里重复了，看博文吧。&lt;/p&gt;
&lt;h2 id="nanoc-cachebuster"&gt;nanoc-cachebuster&lt;/h2&gt;
&lt;p&gt;我们已经解决了 JS/CSS 的压缩问题，还差一步，就可以形成 nanoc static site frontend 的完美解决方案，那就是我们离不开的 cache。这个 cache 主要是浏览器端的 cache。Cache 是个好东西，只是有时会给开发人员造成一些小麻烦。比如我们修改 JS/CSS 文件并且 push 到“线上”的时候，在一定时间段内浏览器并不会请求最新的 JS/CSS 文件，而是会使用已有的尚未过期的 cache 中的 JS/CSS 文件，这就使得我们没有办法实时地看到 JS/CSS 修改后的前端效果。解决方案就是在开发时绕过 cache，让浏览器每次都请求最新的 JS/CSS 文件。这有两种办法，一是在浏览器端，可以强制刷新或者直接禁用浏览器的 cache，但是这种方案的局限性在于，每种浏览器都有自己的设置方法，并且做为开发人员，你没有办法保证你的用户都禁用 cache；第二种办法就是在服务器端做一些手脚，这就是 &lt;a href="http://webassets.readthedocs.org/en/latest/expiring.html"&gt;cache busting&lt;/a&gt; 。&lt;/p&gt;
&lt;p&gt;Cache busting 的原理是每次修改 JS/CSS 文件后，通过在 JS/CSS 的文件名上加入一个版本号或者类似的手段，来保证浏览器请求的都是最新的 JS/CSS 文件，这样就能确保 JS/CSS 的效果能够实时地起到作用。Nanoc 有一个 &lt;a href="http://avdgaag.github.io/nanoc-cachebuster/"&gt;nanoc-cachebuster&lt;/a&gt; ，其作者写了一篇详细的 &lt;a href="http://arjanvandergaag.nl/blog/nanoc-cachebuster.html"&gt;post&lt;/a&gt; 来阐述 nanoc-cachebuster 的实现原理，我就不再多言了。&lt;/p&gt;
&lt;h2 id="font-selection"&gt;Font Selection&lt;/h2&gt;
&lt;p&gt;就观感上来讲，除了基本的版面设计，字体选择是第二重要的因素。你至少要知道&lt;a href="http://zh.wikipedia.org/wiki/%25E8%25A1%25AC%25E7%25BA%25BF%25E4%25BD%2593"&gt;衬线字体&lt;/a&gt;和&lt;a href="http://zh.wikipedia.org/wiki/%25E6%2597%25A0%25E8%25A1%25AC%25E7%25BA%25BF%25E4%25BD%2593"&gt;无衬线字体&lt;/a&gt;的基本概念。而在 Web 上应用这些概念，你还需要了解一些有关以 &lt;a href="http://en.wikipedia.org/wiki/Web_typography"&gt;web font&lt;/a&gt; 的一些知识。关于这点我就不展开写了，任何一本不错的 CSS 书籍都会用一章的内容来详细讲解字体以及 web font 的概念。我个人的选择是 &lt;a href="https://www.google.com/fonts/specimen/Lora"&gt;Lora&lt;/a&gt; ，灵感来自于 &lt;a href="http://bootswatch.com/readable/"&gt;bootswatch readable theme&lt;/a&gt; 。&lt;/p&gt;
&lt;p&gt;这里还有两个小技巧，和大家分享。一是在 CSS 中，字体的样式是依照 &lt;code&gt;font-family&lt;/code&gt; 的值以及相应的字体本身的特性决定的。比如：&lt;/p&gt;
&lt;div class="sourceCode"&gt;&lt;pre class="sourceCode css"&gt;&lt;code class="sourceCode css"&gt;body &lt;span class="kw"&gt;{&lt;/span&gt;
  &lt;span class="kw"&gt;background-color:&lt;/span&gt; &lt;span class="dt"&gt;#ffffff&lt;/span&gt;&lt;span class="kw"&gt;;&lt;/span&gt;
  &lt;span class="kw"&gt;font-family:&lt;/span&gt; &lt;span class="st"&gt;&amp;#39;Lora&amp;#39;&lt;/span&gt;, Georgia, &lt;span class="st"&gt;&amp;#39;Times New Roman&amp;#39;&lt;/span&gt;, &lt;span class="st"&gt;&amp;#39;SimSun&amp;#39;&lt;/span&gt;, &lt;span class="st"&gt;&amp;#39;Microsoft YaHei&amp;#39;&lt;/span&gt;, &lt;span class="dt"&gt;serif&lt;/span&gt;&lt;span class="kw"&gt;;&lt;/span&gt;
&lt;span class="kw"&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;这里指定 &lt;code&gt;&amp;lt;body&amp;gt;&lt;/code&gt; 的字体为 Lora，但是 Lora 本身是一款英文字体，对于汉字是“无能为力”的，因此如果 &lt;code&gt;&amp;lt;body&amp;gt;&lt;/code&gt; 中有汉字的话，浏览器会按照 &lt;code&gt;font-family&lt;/code&gt; 所指定的值依次找下去，直到找到一款从 web 上加载的或者系统中已经存在的汉字字体。另外，在 Chrome 和 Firefox 的 Developer Tools 中可以看到浏览器渲染页面时所使用的字体的细节，具体参考 &lt;a href="http://stackoverflow.com/questions/884177/how-can-i-determine-what-font-a-browser-is-actually-using-to-render-some-text"&gt;StackOverflow&lt;/a&gt;。&lt;/p&gt;
&lt;h2 id="third-party-plugins"&gt;Third-party Plugins&lt;/h2&gt;
&lt;p&gt;由于静态站点本身并没有数据库之类的标配的本地存储，因此像评论、站内搜索，以及统计这类功能需要借助第三方的服务。站内搜索比较简单，直接调用 Google 的 &lt;code&gt;site:xiaohanyu.me&lt;/code&gt; 搜索即可：&lt;/p&gt;
&lt;div class="sourceCode"&gt;&lt;pre class="sourceCode html"&gt;&lt;code class="sourceCode html"&gt;&lt;span class="kw"&gt;&amp;lt;form&lt;/span&gt;&lt;span class="ot"&gt; class=&lt;/span&gt;&lt;span class="st"&gt;&amp;quot;form-inline&amp;quot;&lt;/span&gt;&lt;span class="ot"&gt; target=&lt;/span&gt;&lt;span class="st"&gt;&amp;quot;_blank&amp;quot;&lt;/span&gt;&lt;span class="ot"&gt; method=&lt;/span&gt;&lt;span class="st"&gt;&amp;quot;get&amp;quot;&lt;/span&gt;&lt;span class="ot"&gt; action=&lt;/span&gt;&lt;span class="st"&gt;&amp;quot;http://google.com/search&amp;quot;&lt;/span&gt;&lt;span class="kw"&gt;&amp;gt;&lt;/span&gt;
  &lt;span class="kw"&gt;&amp;lt;input&lt;/span&gt;&lt;span class="ot"&gt; type=&lt;/span&gt;&lt;span class="st"&gt;&amp;quot;hidden&amp;quot;&lt;/span&gt;&lt;span class="ot"&gt; value=&lt;/span&gt;&lt;span class="st"&gt;&amp;quot;site:xiaohanyu.me&amp;quot;&lt;/span&gt;&lt;span class="ot"&gt; name=&lt;/span&gt;&lt;span class="st"&gt;&amp;quot;q&amp;quot;&lt;/span&gt;&lt;span class="kw"&gt;&amp;gt;&lt;/span&gt;
  &lt;span class="kw"&gt;&amp;lt;input&lt;/span&gt;&lt;span class="ot"&gt; type=&lt;/span&gt;&lt;span class="st"&gt;&amp;quot;text&amp;quot;&lt;/span&gt;&lt;span class="ot"&gt; class=&lt;/span&gt;&lt;span class="st"&gt;&amp;quot;form-control pull-left&amp;quot;&lt;/span&gt;&lt;span class="ot"&gt; placeholder=&lt;/span&gt;&lt;span class="st"&gt;&amp;quot;Search&amp;quot;&lt;/span&gt;&lt;span class="ot"&gt; name=&lt;/span&gt;&lt;span class="st"&gt;&amp;quot;q&amp;quot;&lt;/span&gt;&lt;span class="kw"&gt;&amp;gt;&lt;/span&gt;
&lt;span class="kw"&gt;&amp;lt;/form&amp;gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;至于评论系统，我用的也就是现今最流行的第三方评论系统 &lt;a href="https://disqus.com/"&gt;Disqus&lt;/a&gt; 了。其安装设置非常简单，不再赘述。使用体验也不错。但是由于国内网络的原因，Disqus 加载的时候还是需要 2-4 秒的时间，因此我写了个 JS 函数，来按需加载 Disqus 评论。与此同时，我还在每篇 post 的 metadata 里面设置了新的属性： &lt;code&gt;disable_disqus&lt;/code&gt; ，这样如果 &lt;code&gt;disable_disqus&lt;/code&gt; 为真，那么相应的 post 就是禁用评论的。&lt;/p&gt;
&lt;p&gt;最后就是站点统计，最简单的就是传统 Blog 上的网站访问计数。这个我用的是 &lt;a href="http://www.google.com/analytics/"&gt;Google Analytics&lt;/a&gt; ，很强大，安装配置也很简单，同样不再赘述。&lt;/p&gt;
&lt;h2 id="atomsitemaprobots.txt"&gt;Atom/Sitemap/Robots.txt&lt;/h2&gt;
&lt;p&gt;除了以上，一个有节操有品味的网站还应该配备 atom/sitemap/robots.txt。在 nanoc 中，这三种的解决方案是差不多的。以 atom 为例，nanoc3 内置的 &lt;a href="http://nanoc.ws/docs/api/Nanoc/Helpers/Blogging.html"&gt;Blogging&lt;/a&gt; 辅助模块提供了基本的 atom 生成函数 &lt;a href="http://nanoc.ws/docs/api/Nanoc/Helpers/Blogging.html#atom_feed-instance_method"&gt;atom_feed&lt;/a&gt; ，我们需要做的就是动态创建一个 nanoc item，而这个 item 的任务就是生成实际的 &lt;code&gt;atom.xml&lt;/code&gt; 文件。nanoc 支持 &lt;a href="http://nanoc.ws/docs/basics/"&gt;preprocess&lt;/a&gt; ，我们可以在 nanoc compile 之前做一些准备工作：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;Rules&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;div class="sourceCode"&gt;&lt;pre class="sourceCode ruby"&gt;&lt;code class="sourceCode ruby"&gt;preprocess &lt;span class="kw"&gt;do&lt;/span&gt;
  create_github_cname
  create_robots_txt
  create_sitemap
  create_atom
&lt;span class="kw"&gt;end&lt;/span&gt;

compile &lt;span class="ot"&gt;%r{/sitemap/|/atom/|/robots/}&lt;/span&gt; &lt;span class="kw"&gt;do&lt;/span&gt;
  filter &lt;span class="st"&gt;:erb&lt;/span&gt;
&lt;span class="kw"&gt;end&lt;/span&gt;

route &lt;span class="ot"&gt;%r{/sitemap/|/atom/}&lt;/span&gt; &lt;span class="kw"&gt;do&lt;/span&gt;
  item.identifier.chop + &lt;span class="st"&gt;&amp;#39;.xml&amp;#39;&lt;/span&gt;
&lt;span class="kw"&gt;end&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;在 &lt;code&gt;create_atom&lt;/code&gt; 函数中，我们动态创建一个 &lt;a href="http://nanoc.ws/docs/api/Nanoc/Item.html"&gt;nanoc item&lt;/a&gt; （所谓动态创建的 item 就是这个 item 在实际的文件系统中没有相对应的文件）。这样的 preprocess 之后，nanoc compile 会按照指定的规则来处理生成 atom 的 item，最终生成所需的 &lt;code&gt;atom.xml&lt;/code&gt; 。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;lib/preprocessors.rb&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;div class="sourceCode"&gt;&lt;pre class="sourceCode ruby"&gt;&lt;code class="sourceCode ruby"&gt;&lt;span class="kw"&gt;def&lt;/span&gt; create_atom
  content = &amp;lt;&amp;lt;&lt;span class="kw"&gt;EOS&lt;/span&gt;
&lt;span class="ot"&gt;&amp;lt;%= atom_feed \&lt;/span&gt;
&lt;span class="ot"&gt;:title =&amp;gt; &amp;#39;#{@site&lt;/span&gt;.config[&lt;span class="st"&gt;:meta_data&lt;/span&gt;][&lt;span class="st"&gt;:title&lt;/span&gt;]&lt;span class="ot"&gt;}&amp;#39;,&lt;/span&gt;
&lt;span class="ot"&gt;:author_name =&amp;gt; &amp;#39;#{@site&lt;/span&gt;.config[&lt;span class="st"&gt;:meta_data&lt;/span&gt;][&lt;span class="st"&gt;:author&lt;/span&gt;]&lt;span class="ot"&gt;}&amp;#39;,&lt;/span&gt;
&lt;span class="ot"&gt;:author_uri =&amp;gt; &amp;#39;#{@site&lt;/span&gt;.config[&lt;span class="st"&gt;:base_url&lt;/span&gt;]&lt;span class="ot"&gt;}&amp;#39;,&lt;/span&gt;
&lt;span class="ot"&gt;:limit =&amp;gt; 10 %&amp;gt;&lt;/span&gt;
&lt;span class="ot"&gt;EOS&lt;/span&gt;

&lt;span class="ot"&gt;  @items &amp;lt;&amp;lt; Nanoc3::Item.new(content,&lt;/span&gt;
&lt;span class="ot"&gt;                             {:extension =&amp;gt; &amp;#39;xml&amp;#39;, :is_hidden =&amp;gt; true},&lt;/span&gt;
&lt;span class="ot"&gt;                             &amp;#39;/atom/&amp;#39;)&lt;/span&gt;
&lt;span class="ot"&gt;end&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h2 id="cute-things"&gt;Cute Things&lt;/h2&gt;
&lt;p&gt;除此之外，我还设计了一些有趣的小东西，当然，如果您是资深的前端工程师，那么可以直接忽略这一节，我怕班门弄斧，贻笑大方。&lt;/p&gt;
&lt;p&gt;一是我给每篇 post 加上了 next 和 previous 的 link button， &lt;del&gt;当然如果有一天我的文章写的足够好能让人流连忘返的话&lt;/del&gt; ，这两个 button 或许是有用的。具体的技术细节可以参考&lt;a href="https://ecarmi.org/writing/next-previous-links-nanoc/"&gt;这里&lt;/a&gt;。&lt;/p&gt;
&lt;p&gt;二是我在页面上加了一个 &lt;strong&gt;back-to-top&lt;/strong&gt; 的 button，这样在页面滚了一点进度时，back-to-top button 会出现在右下角，然后你可以点击这个 button 回到页面的最顶端。&lt;/p&gt;
&lt;p&gt;三是我参考一些成型的设计，给自己的 blog 设计了一个还算满意的 &lt;a href="http://xiaohanyu.me/does-not-exist"&gt;404 page&lt;/a&gt;。&lt;/p&gt;
&lt;p&gt;最后，我在 &lt;a href="http://wxiaohanyu.me/about/index.html"&gt;about page&lt;/a&gt; 中加入了一些 random quotes 的小把戏，这样每次访问/刷新 about page 的时候，你看到的 quotes 都是随机的。至于原理，暂且不表 ^_^。&lt;/p&gt;
&lt;h2 id="总结"&gt;总结&lt;/h2&gt;
&lt;p&gt;以上，大概记录了我个人建站的基本过程，从基本的技术选型，到版式字体的设计，以及一些 nanoc 的小技巧，希望对您有用。&lt;/p&gt;
</content>
  </entry>
  <entry>
    <id>tag:xiaohanyu.me,2014-05-04:/posts/2014-05-04-build-static-site-with-nanoc-1/</id>
    <title type="html">Build Static Site with Nanoc (I)</title>
    <published>2014-05-04T10:19:30Z</published>
    <updated>2017-04-29T08:08:52Z</updated>
    <link rel="alternate" href="http://xiaohanyu.me/posts/2014-05-04-build-static-site-with-nanoc-1/"/>
    <content type="html">&lt;p&gt;07 年我开始学会上网，那时候写 blog 应该还是一件相当时髦的事情。而我个人，作为一枚外表木讷闷骚，内心感情丰富的三好有为青年，自然对 blog 保持着强烈的好奇心，从一路转载，到絮叨自嗨，四五年坚持下来，总算找到了一点 blog 的感觉。所谓“工欲善其行，必先利其器”，头上顶了“书写是为了更好的思考”这面响当当的思想大旗，手头自然也希望能升级下一直以来残破不勘凑合能用的写作工具。于是祭出几年前刚开始折腾 Linux 时的那份耐性，断续折腾一年有余，总算略有小成。本文（及后续文章）尝试记录下这个 blog 的一些技术细节，希望对后来人有所启发。&lt;/p&gt;
&lt;h2 id="why-static"&gt;Why Static?&lt;/h2&gt;
&lt;p&gt;最原始的 blog 应该就是纯静态的个人主页，后来 blog 开始火的时候，各种线上平台一统天下，而对于有点折腾能力的人来说， &lt;a href="https://wordpress.org/"&gt;WordPress&lt;/a&gt; 则一支独秀。现如今，在 GitHub 当道的年代，由 &lt;a href="https://pages.github.com/"&gt;GitHub Pages&lt;/a&gt; 及其工具链 &lt;a href="http://jekyllrb.com/"&gt;Jekyll&lt;/a&gt;/&lt;a href="http://octopress.org/"&gt;Octopress&lt;/a&gt; 所组成的生态系统，则在程序员的圈子里吸引了足够的眼球和人气，也宣告着所谓 &lt;a href="http://staticsitegenerators.net/"&gt;static site generator&lt;/a&gt;（本文简称为 SSG）在某种程度上的回归。&lt;/p&gt;
&lt;p&gt;So, why static?&lt;/p&gt;
&lt;p&gt;从技术上来讲，传统的 blog 就是一个简化的 &lt;a href="http://en.wikipedia.org/wiki/Content_management_system"&gt;CMS&lt;/a&gt; 系统。相较于 CMS，blog 更多的是个人开放给外界的一个展示窗口，并不需要太多的交互和额外的用户注册管理系统（如各种 bbs/forum/group 等）， 其主要技术特性是：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;面向个人&lt;/li&gt;
&lt;li&gt;页面排版较为简单&lt;/li&gt;
&lt;li&gt;内容管理相对单一，基本上以 post 为主&lt;/li&gt;
&lt;li&gt;需求模块较少，基本上就是 Comments, Categories, Tags, Archives&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;显然，动用各种 dynamic 语言和各种高大上的 SQL 数据库来实现这么几条简单的 blog 平台需求，有些牛刀杀鸡之嫌。在这方面，SSG 所遵循的 fast, lightweight, easy-deployment 是很有优势的。最简单的 blog 完全可以只是一个 post list 页面。但是纯静态的 blog 又太简陋了，因此需要通过一些 hack 的手段，在 static 的页面上加入一些 dynamic 的东西， 这个 hack 的手段，就是各种 SSG 中所谓的 compile 步骤。&lt;/p&gt;
&lt;p&gt;compile 步骤是所有 SSG 的核心，它的设计好坏决定了一个 SSG 的品质。大体上讲，SSG 的工作方式如下：&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;格式转换：&lt;/strong&gt; 扫描所有 post， 进行初步 compile（这步 compile 主要作用是进行格式转换，比如 markdown/textile -&amp;gt; html）。&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;汇总 metadata：&lt;/strong&gt; 汇总所有 post 的 metadata（比如 tag/category 可以用来做反向映射，datetime 可以用来给 post 进行排序），这些 metadata 信息可以在 template 渲染的时候访问。&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;渲染模板：&lt;/strong&gt; 根据相应的 layout 规则，将 compile 后的 content 以及已有的 metadata 信息渲染成相应的页面 （比如每篇 post 都需要有 navbar 和 footbar， 这可以设定一下基础的页面 layout，包含公用的页面元素，然后通过模板继承或组合的方式，将 post 的内容以及相应的 metadata 信息渲染到这个 layout 中合适的位置，这就形成了你最终看到的 static page）。&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;SSG 最终会生成一坨静态的 html/css/js 文件，只要将其上传托管起来，所谓的 static site 就算大功告成了。不需要配置数据库，也不需要装什么 php/python(wsgi)/WordPress，怎么样，够简单吧？ 与 static site 部署简单相对的就是本地写作环境搭建的复杂，多数情况下，你需要至少掌握一门编程语言的工具链，从头到尾搭建一套完整的写作环境；你需要自己设计前端，页面排版（layout）；你还需要找到自己钟意的 Editor 和自己喜欢的 &lt;a href="http://en.wikipedia.org/wiki/Comparison_of_document_markup_languages"&gt;document markup language&lt;/a&gt; 。选择意味着纠结，也意味着灵活。 &lt;strong&gt;没有了浏览器的牵绊，你可以在自己钟爱的 Editor 里运指如飞，畅写欲言。&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;不同的 SSG 有不同的设计侧重点，有的提供内建的 out-of-box 的主题（&lt;a href="http://octopress.org/"&gt;Octopress&lt;/a&gt; 基本上千篇一律），有的只提供机制（&lt;a href="http://nanoc.ws/"&gt;Nanoc&lt;/a&gt;）;有的只支持一种模板语言（&lt;a href="http://ruhoh.com/"&gt;Ruhoh&lt;/a&gt; 默认支持 &lt;a href="http://mustache.github.io/"&gt;mustache&lt;/a&gt;），有的只提供机制（&lt;a href="http://nanoc.ws/"&gt;Nanoc&lt;/a&gt;）;有的只支持一种标记语言（多数默认支持 &lt;a href="http://en.wikipedia.org/wiki/Markdown"&gt;Markdown&lt;/a&gt;），有的只提供机制（&lt;a href="http://nanoc.ws/"&gt;Nanoc&lt;/a&gt;）;&lt;/p&gt;
&lt;p&gt;相较于广大人民群众，程序员群体对于 blog 平台往往还有一些特别的需求：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;没有代码高亮是不能忍的&lt;/li&gt;
&lt;li&gt;能支持数学公式的话就很高大上&lt;/li&gt;
&lt;li&gt;没有版本控制你叫我怎么活？&lt;/li&gt;
&lt;li&gt;不能一键 deploy，自动 compile/refresh，还叫程序员吗？&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;SSG 的先天不足在于，传统 blog 平台所必须的一些模块，如 Comments, Search 等必须借助第三方的服务来实现。比如 Comments 可以用 &lt;a href="https://disqus.com/"&gt;Disqus&lt;/a&gt; ， 而 Search 可以用 google site search。&lt;/p&gt;
&lt;p&gt;总得来说，SSG 的门槛还是比较高的。高效灵活的背后，是耐心和时间。这或许就是 hack 的乐趣所在吧。&lt;/p&gt;
&lt;h2 id="org-mode"&gt;Org-mode&lt;/h2&gt;
&lt;p&gt;我选择 SSG 的第一个标准就是必须支持 &lt;a href="http://orgmode.org/"&gt;org-mode&lt;/a&gt; 。&lt;/p&gt;
&lt;p&gt;Why org-mode?&lt;/p&gt;
&lt;p&gt;其实 &lt;a href="http://en.wikipedia.org/wiki/Markdown"&gt;Markdown&lt;/a&gt; 是相当好的文档标记语言，绝大多数 SSG 对 Markdown 都有良好的支持。多数线上服务如 GitHub、Stackoverflow 也是以 Markdown 为默认文档标记语言。Markdown 的生态圈也相当繁荣， 有很多优秀的线上线下的 Editor&lt;a href="#fn1" class="footnoteRef" id="fnref1"&gt;&lt;sup&gt;1&lt;/sup&gt;&lt;/a&gt;。不过 Markdown 的先天不足在于， 其设计初衷导致 Markdown 的标准过于简单，功能不够，而各方英雄为了一已之私，不得不提出各种 Markdown 扩展来满足自己的日常需求。这样看来，Markdown 生态圈一片繁荣百花争春的背后，实则是一片混乱，没有一个统一的标准，容易“厂商锁定”。所有的扩展 Markdown 语言之中， &lt;a href="https://help.github.com/articles/github-flavored-markdown"&gt;GitHub Flavored Markdown&lt;/a&gt; 和 &lt;a href="http://johnmacfarlane.net/pandoc/README.html#pandocs-markdown"&gt;Pandoc’s markdown&lt;/a&gt; 是比较不错的。特别是 Pandoc’s Markdown，功能完善、规范、强大，如果你不是我这样的 org-mode 死忠，那么我强烈推荐你用 Pandoc’s Markdown。&lt;/p&gt;
&lt;p&gt;而我之所以离不开 org-mode，其一在于我个人患有严重的 Emacs 依赖症，其二是 &lt;a href="http://orgmode.org/worg/org-contrib/babel/"&gt;org-babel&lt;/a&gt; ，一个你用上了就再也离不开的东西。org-babel 让简单静态的文档变成了完整的 live 的 workflow，关于这点，学术界甚至有一些专门的 &lt;a href="http://orgmode.org/worg/org-papers.html"&gt;Papers&lt;/a&gt; 论述。限于篇幅，不在这里展开讨论。Emacs 配上 org-mode，更如香车搭上美女，快感连连，高潮不断也。&lt;/p&gt;
&lt;p&gt;但是很不幸，对 org-mode 的坚持让我被迫放弃了一大半的 SSG。事实上，在我刚开始着手调研 SSG 的时候，没有一个 SSG 提供对 org-mode 的良好支持。org-mode 本身有一个非常原始并且极其难用的 &lt;a href="http://orgmode.org/manual/Publishing.html"&gt;org-publish&lt;/a&gt; ，稍加配置也可以当成一个原始的 SSG 来用。还有一些 &lt;a href="http://orgmode.org/worg/org-blog-wiki.html"&gt;Emacs packages&lt;/a&gt; ，基于 org-publish， 可以用来生成 static site，但是大多数都非常难用。 &lt;a href="http://renard.github.io/o-blog/"&gt;o-blog&lt;/a&gt; 看上去很漂亮，但是我始终没有搞明白怎么用。后来又尝试了下 &lt;a href="https://github.com/kelvinh/org-page"&gt;org-page&lt;/a&gt; ，还提了几个 patch，但终究也不是很满意。于是就只能自己操刀，开始写 &lt;a href="https://github.com/xiaohanyu/org-site"&gt;org-site&lt;/a&gt; 。断续写了一个月，出来一个原型，但最终还是放弃：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Elisp 写起来并不是很 happy，没有 namespace 是一大硬伤。&lt;/li&gt;
&lt;li&gt;Org-mode 的代码设计并没有为开放式的 API 做过考虑。理论上，我可以把 Emacs org-mode 当成一个文档格式转换器，将 org-mode 转换成 html/pdf，但是由于 Emacs 的特殊性，很多 Elisp API 都是以 Emacs &lt;a href="https://www.gnu.org/software/emacs/manual/html_node/emacs/Buffers.html"&gt;buffer&lt;/a&gt; 而不是 file 为操作对象，这就让我必须写很多的 wrapper 代码，然后通过类似于 &lt;code&gt;(with-temp-buffer (do-some-thing))&lt;/code&gt; 的手段来绕过这个限制。&lt;/li&gt;
&lt;li&gt;org-publish API 依赖很多全局变量，写起来很别扭，经常要去翻原代码才能搞明白某个变量的意思。&lt;/li&gt;
&lt;li&gt;org-mode 7.x 和 8.x 之间变动很大，代码兼容性维护任重道远。&lt;/li&gt;
&lt;li&gt;org-mode 生成的 html 模块性太差，需要用各种 regexp 提取有用的 body/&lt;a href="http://en.wikipedia.org/wiki/Table_of_contents"&gt;TOC&lt;/a&gt; 并过滤掉不需要的 header/footer，不美。&lt;/li&gt;
&lt;li&gt;一个优秀的 SSG，除了格式转换，还需要很多配套的模块，比如自动检测文件改动、自动编译、灵活的路由规则等，而这些用 Elisp 实现起来都很麻烦。&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;至此，自动动手丰衣足食的计划宣告破产，被迫寻找并尝试 hack 一些成型的 SSG，来支持 org-mode 写作。我最终的选择是 &lt;a href="http://nanoc.ws/"&gt;Nanoc&lt;/a&gt; 。&lt;/p&gt;
&lt;h2 id="nanoc"&gt;Nanoc&lt;/h2&gt;
&lt;p&gt;&lt;a href="http://nanoc.ws/"&gt;Nanoc&lt;/a&gt; 是我用过的所有 SSG 中最为灵活，也是使用门槛最高的一个。Nanoc 官方的入门 &lt;a href="http://nanoc.ws/docs/tutorial/"&gt;Tutorial&lt;/a&gt; 中明确说明，你必须 “have a basic understanding of Ruby and command line”， 才有可能玩得通 Nanoc。在我个人看来，Nanoc 的设计基本上严格遵循了 Unix 中 “Provide mechanism, not policy” 的哲学。用软件工程的术语来说，Nanoc 提供的是 library，而非一套成型的 SSG 软件。Nanoc 既不限定你所用的文档标记语言 — 你可以用 Markdown/Textile/Org-mode，也不指定相应的编译规则，更不提供默认的 out-of-box 的主题样式。总之，一切要自己来，学习曲线颇为陡峭，但学成之后可以随心所欲。&lt;/p&gt;
&lt;p&gt;Nanoc 创造了自己的术语体系，每个概念相互独立又彼此联系。理解了这些术语也就理解了 nanoc 的工作原理：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;item: 是 nanoc 要处理的实体。一个 item 可以是 html/css/markdown 等文本文件，也可以是图片，还可以是你自己凭空创造出来的虚拟文件。&lt;/li&gt;
&lt;li&gt;rule: 决定 nanoc 处理 item 的步骤。rule 分为两种，compilation rule 和 routing rule。 其中 compilation rule 又分为 filter rule 和 layout rule。filter rule 一般用于文档格式转换，而 layout rule 则用于页面布局排版。routing rule 决定 item 在 compile 之后在 output 中的路径。&lt;/li&gt;
&lt;li&gt;helper: 一些辅助代码，用于扩展 nanoc。&lt;/li&gt;
&lt;li&gt;metadata: 元信息。nanoc 对于每个 item 可附加的 metadata 没有任何限制。典型的 metadata 可以是 tag/category/datatime。&lt;/li&gt;
&lt;li&gt;representation: 可以理解为输出格式。比如，同一个 item 可以同时 compile 为 html/pdf 两种格式。每种格式可以用自己独立的 rule。&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;可以说，nanoc 为 SSG 的领域制定了一套相当棒的 standard。事实上， 确实有人仿照着 nanoc 的 standard，用 Haskell 重新实现了 nanoc，这就是 &lt;a href="http://jaspervdj.be/hakyll/"&gt;hakyll&lt;/a&gt;&lt;a href="#fn2" class="footnoteRef" id="fnref2"&gt;&lt;sup&gt;2&lt;/sup&gt;&lt;/a&gt; 。我曾经短暂尝试过 hakyll，但最终放弃，回到了 nanoc 的怀抱。而这基本上要归功于 Ruby。&lt;/p&gt;
&lt;h2 id="ruby"&gt;Ruby&lt;/h2&gt;
&lt;p&gt;我并不是某一门编程语言的死忠。如果让我用一个字来形容 Ruby，那就是“舒服”。是的， &lt;a href="http://en.wikipedia.org/wiki/Yukihiro_Matsumoto"&gt;Matz&lt;/a&gt; 没有骗你，Ruby 是写起来相当舒服的一门语言。Ruby 的包管理机制 &lt;a href="http://bundler.io/"&gt;bundler&lt;/a&gt; + &lt;a href="https://rubygems.org/"&gt;gem&lt;/a&gt; 是我用过的所有包管理器中最先进最好用的， 比之于什么 Python 的 &lt;a href="http://www.virtualenv.org/en/latest/"&gt;virtualenv&lt;/a&gt; + &lt;a href="http://www.pip-installer.org/en/latest/"&gt;pip&lt;/a&gt; 之流要好用太多。至于 Haskell 的 &lt;a href="http://www.haskell.org/cabal/"&gt;cabal&lt;/a&gt; 基本上就是个奇葩的存在，连基本的 uninstall 功能都没有（是不是想起了 Python 的 &lt;code&gt;easy_install&lt;/code&gt; ？），更不用提类似于 virtualenv/sandbox 这类先进功能了。不过这些都还可以忍受，Haskell 的 cabal 最蛋疼最奇葩的一点就是，好好的用着 &lt;code&gt;cabal install&lt;/code&gt; ，说不定哪一天就会蹦出来各种莫名其妙的依赖问题， &lt;a href="http://en.wikipedia.org/wiki/Dependency_hell"&gt;dependency hell&lt;/a&gt; ， 唯一的解决办法就是 &lt;code&gt;rm -rf $HOME/.cabal&lt;/code&gt; ， 然后重装然后祈祷……而 Haskell 又是一门编译型的静态语言，这就使得装 package 的时间很长，令人不快。&lt;/p&gt;
&lt;p&gt;语言层面，Ruby 中内置的 regexp（对比下 Python 的 &lt;code&gt;re.compile&lt;/code&gt; ） 强大易用；其完整的对 lambda/block 的支持（对比下 Python 中阉割的 lambda），能让每一个有点 Lisp 基础的人找到熟悉的感觉；Ruby 从 Unix Shell 以及 Perl 中借鉴而来的很多小聪明如 &lt;a href="http://en.wikipedia.org/wiki/Here_document"&gt;here document&lt;/a&gt;/&lt;a href="http://en.wikipedia.org/wiki/String_interpolation"&gt;string interpolation&lt;/a&gt;/command interpolation(Ruby backticks)， 使 Ruby 超越了 Python/Perl/Shell，成为写 quick and dirty 的 Unix Script 的上上之选；Ruby 社区一些极富创造力的一些 package 如 &lt;a href="http://rake.rubyforge.org/"&gt;rake&lt;/a&gt;/&lt;a href="https://github.com/guard/guard"&gt;guard&lt;/a&gt; ，则让你的 hack 之旅充满了快乐。&lt;/p&gt;
&lt;p&gt;尽管 Ruby 这样那样好，但是 Haskell 社区有一枚神器，让人欲罢不能，这就是文档格式转换的瑞士军刀 — &lt;a href="http://johnmacfarlane.net/pandoc/"&gt;Pandoc&lt;/a&gt; 。&lt;/p&gt;
&lt;h2 id="pandoc"&gt;Pandoc&lt;/h2&gt;
&lt;p&gt;文档格式转换一直是一大难题，究其原因，是在于不同的文档格式有不同的表现能力和设计侧重点。比如原始的 Markdown 格式没有 table（表格）的支持，你怎么把 html 转换成 Markdown ? 反过来，html 中的 form 转换成其它格式，又该如何表现？Microsoft Word 2003 及之前版本的文档格式都是二进制且没有公开的文档格式标准， 想要完整的支持这种格式需要做大量的反向工程（ &lt;a href="https://www.openoffice.org/"&gt;OpenOffice&lt;/a&gt; 和 &lt;a href="https://www.libreoffice.org/"&gt;LibreOffice&lt;/a&gt; 干的就是这事，可想这工作量）。&lt;/p&gt;
&lt;p&gt;文档格式转换的软件千千万万，但是多数都只是 ad-hoc 的办法，pandoc 的创新之处在于发明了一种中间格式（&lt;a href="http://johnmacfarlane.net/pandoc/scripting.html"&gt;json-formatted AST&lt;/a&gt;），即先将原始文档格式先解析并转换成这种中间格式，然后经过系列处理转换成目标文档格式，从而提供了大一统的解决方案。&lt;/p&gt;
&lt;pre class="example"&gt;&lt;code&gt;   source format
        ↓
     (pandoc)
        ↓
JSON-formatted AST
        ↓
     (filter)
        ↓
JSON-formatted AST
        ↓
     (pandoc)
        ↓
  target format
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Pandoc 对于每种支持的输入格式，都提供了完整的 parser（pandoc 中叫做 reader），通过 parser 将输入文档转换成结构化 json 格式的 &lt;a href="http://en.wikipedia.org/wiki/Abstract_syntax_tree"&gt;AST&lt;/a&gt; 。然后我们可以根据自己的需求，写一些脚本来操作 pandoc AST，再转换成最终的输出目标格式（Pandoc 中叫做 writer）。Pandoc 把这个操作 AST 的程序脚本叫做 &lt;a href="http://johnmacfarlane.net/pandoc/scripting.html#json-filters"&gt;filter&lt;/a&gt; ，借助 filter，理论上可以实现非常丰富的功能。至于调用 filter 的方法，最简单的是通过 Unix 管道操作，比如：&lt;/p&gt;
&lt;div class="sourceCode"&gt;&lt;pre class="sourceCode bash"&gt;&lt;code class="sourceCode bash"&gt;&lt;span class="ex"&gt;pandoc&lt;/span&gt; -f SOURCEFORMAT -t json &lt;span class="kw"&gt;|&lt;/span&gt; &lt;span class="ex"&gt;runhaskell&lt;/span&gt; filter.hs &lt;span class="kw"&gt;|&lt;/span&gt; &lt;span class="ex"&gt;pandoc&lt;/span&gt; -f json -t TARGETFORMAT&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Pandoc 的首选格式语言是 Markdown。为了弥补 Markdown 的先天不足，pandoc 在原始 Markdown 的基础上增加了许多有用的扩展。通过这些扩展， &lt;a href="http://johnmacfarlane.net/pandoc/README.html#pandocs-markdown"&gt;Pandoc’s markdown&lt;/a&gt; 自成一套完备、规范、通用、强大的文档标记语言。&lt;/p&gt;
&lt;p&gt;Pandoc 在 1.12.3.2 版本之前是不支持 org-mode 作为输入格式的。这也让我头疼了许久。我最原始的想法是将 Emacs 当成一个 org-mode 的文档格式转换器，定制 emacs org-mode filter 集成到 nanoc：&lt;/p&gt;
&lt;div class="sourceCode"&gt;&lt;pre class="sourceCode ruby"&gt;&lt;code class="sourceCode ruby"&gt;&lt;span class="kw"&gt;module&lt;/span&gt; &lt;span class="dt"&gt;Nanoc&lt;/span&gt;::&lt;span class="dt"&gt;Filters&lt;/span&gt;

  &lt;span class="kw"&gt;class&lt;/span&gt; &lt;span class="dt"&gt;OrgModeHtml&lt;/span&gt; &amp;lt; &lt;span class="dt"&gt;Nanoc&lt;/span&gt;::&lt;span class="dt"&gt;Filter&lt;/span&gt;
    identifier &lt;span class="st"&gt;:org_mode_html&lt;/span&gt;
    type &lt;span class="st"&gt;:text&lt;/span&gt; =&amp;gt; &lt;span class="st"&gt;:text&lt;/span&gt;

    require &lt;span class="st"&gt;&amp;#39;systemu&amp;#39;&lt;/span&gt;
    require &lt;span class="st"&gt;&amp;#39;tempfile&amp;#39;&lt;/span&gt;

    &lt;span class="kw"&gt;def&lt;/span&gt; run(content, params = {})
      &lt;span class="co"&gt;# Run command&lt;/span&gt;

      tmp_org_file = &lt;span class="dt"&gt;Tempfile&lt;/span&gt;.new(&lt;span class="st"&gt;&amp;#39;nanoc_tmp_org_file&amp;#39;&lt;/span&gt;, &lt;span class="st"&gt;&amp;#39;/tmp&amp;#39;&lt;/span&gt;)
      tmp_org_file &amp;lt;&amp;lt; content
      tmp_org_file.close(&lt;span class="dv"&gt;nil&lt;/span&gt;)

      elisp_code =&lt;span class="ot"&gt; %{&lt;/span&gt;
&lt;span class="st"&gt;(progn&lt;/span&gt;
&lt;span class="st"&gt;  (require &amp;#39;org)&lt;/span&gt;
&lt;span class="st"&gt;  (find-file-read-only &amp;quot;&lt;/span&gt;&lt;span class="ot"&gt;#{&lt;/span&gt;tmp_org_file.path&lt;span class="ot"&gt;}&lt;/span&gt;&lt;span class="st"&gt;&amp;quot;)&lt;/span&gt;
&lt;span class="st"&gt;  (org-mode)&lt;/span&gt;
&lt;span class="st"&gt;  (if (version&amp;lt; org-version &amp;quot;8.0&amp;quot;)&lt;/span&gt;
&lt;span class="st"&gt;      (progn&lt;/span&gt;
&lt;span class="st"&gt;        (setq org-export-html-postamble nil)&lt;/span&gt;
&lt;span class="st"&gt;        (org-export-as-html 3))&lt;/span&gt;
&lt;span class="st"&gt;    (progn&lt;/span&gt;
&lt;span class="st"&gt;      (setq org-html-postamble nil)&lt;/span&gt;
&lt;span class="st"&gt;      (org-html-export-as-html)))&lt;/span&gt;
&lt;span class="st"&gt;  (message &amp;quot;%s&amp;quot; (buffer-string)))&lt;/span&gt;
&lt;span class="ot"&gt;}&lt;/span&gt;

      cmd = [&lt;span class="st"&gt;&amp;#39;emacs&amp;#39;&lt;/span&gt;, &lt;span class="st"&gt;&amp;#39;-Q&amp;#39;&lt;/span&gt;, &lt;span class="st"&gt;&amp;#39;--batch&amp;#39;&lt;/span&gt;,
             &lt;span class="st"&gt;&amp;#39;--eval&amp;#39;&lt;/span&gt;, elisp_code]

      stdout = &lt;span class="st"&gt;&amp;#39;&amp;#39;&lt;/span&gt;
      stderr = &lt;span class="st"&gt;&amp;#39;&amp;#39;&lt;/span&gt;
      status = systemu(cmd,
                       &lt;span class="st"&gt;&amp;#39;stdout&amp;#39;&lt;/span&gt; =&amp;gt; stdout,
                       &lt;span class="st"&gt;&amp;#39;stderr&amp;#39;&lt;/span&gt; =&amp;gt; stderr)

      &lt;span class="co"&gt;# Show errors&lt;/span&gt;
      &lt;span class="kw"&gt;unless&lt;/span&gt; status.success?
        &lt;span class="dt"&gt;$stderr&lt;/span&gt;.puts stderr
        raise &lt;span class="st"&gt;&amp;quot;Emacs org-mode filter failed with status &lt;/span&gt;&lt;span class="ot"&gt;#{&lt;/span&gt;status&lt;span class="ot"&gt;}&lt;/span&gt;&lt;span class="st"&gt;&amp;quot;&lt;/span&gt;
      &lt;span class="kw"&gt;end&lt;/span&gt;

      &lt;span class="co"&gt;# Get result&lt;/span&gt;
      body = &lt;span class="ot"&gt;/&amp;lt;body&amp;gt;.*&amp;lt;\/body&amp;gt;/m&lt;/span&gt;.match(stderr)
      body[&lt;span class="dv"&gt;0&lt;/span&gt;]
    &lt;span class="kw"&gt;end&lt;/span&gt;

  &lt;span class="kw"&gt;end&lt;/span&gt;

&lt;span class="kw"&gt;end&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;这段代码的大体思路是将 emacs 当成 elisp 的解释器，喂给其一段 elisp 代码，调用 org-mode 的 export 功能 （org-mode 7.x 版本中调用 &lt;code&gt;(org-export-as-html)&lt;/code&gt; ，8.x 版本中调用 &lt;code&gt;(org-html-export-as-html)&lt;/code&gt; ），然后再通过 regexp 正则匹配的方式提取出 html 中的 body 部分作为 nanoc filter 的返回值。显而易见，这段代码冗长，乏味，别扭，不美。&lt;/p&gt;
&lt;p&gt;好在我生逢其时，英雄出世， &lt;a href="http://zeitlens.com/"&gt;Albert Krewinkel&lt;/a&gt; 大手笔横空祭出几个 patch，给 pandoc 提供了一个完备的 org-reader，把我感动得一塌糊涂，我还特别写了封邮件感谢人家。一番 &lt;code&gt;cabal install&lt;/code&gt; 之后，pandoc 总算能支持 org-mode 作为其输入格式了，很完美。&lt;/p&gt;
&lt;p&gt;最后要解决的问题就是 pandoc 和 nanoc 的集成。nanoc 本身有一个内建的 &lt;code&gt;Nanoc::Filters::Pandoc&lt;/code&gt; ，调用的是 &lt;a href="https://github.com/alphabetum/pandoc-ruby"&gt;PandocRuby&lt;/a&gt; 。但是 nanoc 本身的 API 和 PandocRuby API 并不是很匹配，无法传递一些参数来启用 pandoc 的某些高级特性 （参考 &lt;a href="http://stackoverflow.com/questions/14646741/nanoc-how-can-i-pass-options-to-pandoc-ruby"&gt;stackoverflow&lt;/a&gt; ）。万般无奈之下，只能自己动手，重写一个 nanoc pandoc filter，完整代码参考 &lt;a href="https://gist.github.com/xiaohanyu/9866531"&gt;github gist&lt;/a&gt; 。&lt;/p&gt;
&lt;div class="sourceCode"&gt;&lt;pre class="sourceCode ruby"&gt;&lt;code class="sourceCode ruby"&gt;&lt;span class="kw"&gt;module&lt;/span&gt; &lt;span class="dt"&gt;Nanoc&lt;/span&gt;::&lt;span class="dt"&gt;Filters&lt;/span&gt;

  &lt;span class="kw"&gt;class&lt;/span&gt; &lt;span class="dt"&gt;PandocHtml&lt;/span&gt; &amp;lt; &lt;span class="dt"&gt;Nanoc&lt;/span&gt;::&lt;span class="dt"&gt;Filter&lt;/span&gt;
    identifier &lt;span class="st"&gt;:pandoc_html&lt;/span&gt;
    type &lt;span class="st"&gt;:text&lt;/span&gt; =&amp;gt; &lt;span class="st"&gt;:text&lt;/span&gt;

    &lt;span class="kw"&gt;def&lt;/span&gt; run(content, params = {})
      input_format = &lt;span class="kw"&gt;case&lt;/span&gt; item[&lt;span class="st"&gt;:extension&lt;/span&gt;]
                     &lt;span class="kw"&gt;when&lt;/span&gt; &lt;span class="st"&gt;&amp;#39;org&amp;#39;&lt;/span&gt;
                       &lt;span class="st"&gt;&amp;#39;org&amp;#39;&lt;/span&gt;
                     &lt;span class="kw"&gt;when&lt;/span&gt; &lt;span class="st"&gt;&amp;#39;md&amp;#39;&lt;/span&gt;, &lt;span class="st"&gt;&amp;#39;markdown&amp;#39;&lt;/span&gt;
                       &lt;span class="st"&gt;&amp;#39;markdown&amp;#39;&lt;/span&gt;
                     &lt;span class="kw"&gt;end&lt;/span&gt;

      &lt;span class="st"&gt;`pandoc --mathjax -f &lt;/span&gt;&lt;span class="ot"&gt;#{&lt;/span&gt;input_format&lt;span class="ot"&gt;}&lt;/span&gt;&lt;span class="st"&gt; -t html5 &amp;lt; &lt;/span&gt;&lt;span class="ot"&gt;#{&lt;/span&gt;item.raw_filename&lt;span class="ot"&gt;}&lt;/span&gt;&lt;span class="st"&gt;`&lt;/span&gt;
    &lt;span class="kw"&gt;end&lt;/span&gt;

  &lt;span class="kw"&gt;end&lt;/span&gt;

&lt;span class="kw"&gt;end&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;代码思路很简单，就是通过 Ruby backticks 直接调用 pandoc，然后将 pandoc 命令的 stdout 作为 nanoc filter 的返回值。通过进一步配置，nanoc 可以调用 pandoc 同时生成 html 和 pdf，这样一来，同样的文章，即可以线上浏览，也可以打印下载，得益于 pandoc 的优秀设计，html 和 pdf 版本的文章具有一致出色的排版效果。&lt;/p&gt;
&lt;p&gt;至此，核心的技术问题已经基本解决，剩下的就是前端设计了，这是我的弱项，为了能让这个 blog 有一个“不那么难看”的样式，我特别花时间学习系统地学习了下 HTML5 和 CSS3。这部分内容冗长乏味，非核心所在，下篇再表。&lt;/p&gt;
&lt;h2 id="reference"&gt;Reference&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;«&lt;a href="http://freemind.pluskid.org/technology/the-unbearable-madness-of-static-blog-generators/"&gt;The Unbearable Madness of Static Blog Generators&lt;/a&gt;»，pluskid 的 blog，重点介绍了 ruhoh。&lt;/li&gt;
&lt;li&gt;«&lt;a href="http://clarkdave.net/2012/02/building-a-static-blog-with-nanoc/"&gt;Building a static blog with nanoc&lt;/a&gt;»，nanoc 入门教程，简洁明了 。&lt;/li&gt;
&lt;li&gt;nanoc powered 的网站包括：
&lt;ul&gt;
&lt;li&gt;&lt;a href="https://developer.github.com/"&gt;GitHub Developer Site&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="http://guides.spreecommerce.com/api/"&gt;Spree Commerce API site&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;li&gt;SSG 名录大全：http://staticsitegenerators.net/&lt;/li&gt;
&lt;li&gt;«&lt;a href="http://kelvinh.github.io/blog/2012/11/27/growth-process-of-org-page/"&gt;Org-page 的成长史&lt;/a&gt;»，介绍了基于 org-mode 的 SSG。&lt;/li&gt;
&lt;/ul&gt;
&lt;section class="footnotes"&gt;
&lt;hr /&gt;
&lt;ol&gt;
&lt;li id="fn1"&gt;&lt;p&gt;线上 Editor： &lt;a href="http://dillinger.io/"&gt;Dillinger&lt;/a&gt;/&lt;a href="https://stackedit.io/"&gt;StackEdit&lt;/a&gt; ；线下 Editor： &lt;a href="http://mouapp.com/"&gt;Mou&lt;/a&gt; 。&lt;a href="#fnref1"&gt;↩&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;
&lt;li id="fn2"&gt;&lt;p&gt;这其中有个八卦，hakyll 的作者 &lt;a href="http://jaspervdj.be/"&gt;Jasper&lt;/a&gt; 和 nanoc 的作者 &lt;a href="http://stoneship.org/"&gt;Denis Defreyne&lt;/a&gt; 在生活中是好朋友。而在某一年的 April fools’ day，Denis 写了篇 &amp;lt;&lt;a href="http://nanoc.ws/the-road-to-nanoc-4-0/"&gt;The road to nanoc 4.0&lt;/a&gt;&amp;gt; ， 大意是要用 haskell 重写 nanoc。&lt;a href="#fnref2"&gt;↩&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;/section&gt;
</content>
  </entry>
  <entry>
    <id>tag:xiaohanyu.me,2014-04-16:/posts/2014-04-16-new-blog-new-start/</id>
    <title type="html">New Blog, New Start</title>
    <published>2014-04-16T15:29:37Z</published>
    <updated>2017-04-29T08:08:52Z</updated>
    <link rel="alternate" href="http://xiaohanyu.me/posts/2014-04-16-new-blog-new-start/"/>
    <content type="html">&lt;blockquote&gt;
&lt;p&gt;书写是为了更好的思考。&lt;/p&gt;
&lt;p&gt;— 刘未鹏&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;刚上大学的时候，我给高中同桌发短信咨询 QQ 该怎么用，他回了一条“计算机的教育要从娃娃抓起”……那时候我刚刚学会如何从控制面板里面卸载软件，刚刚学会收发 Email，写 blog 对我来说是一件相当时髦的事情啊。&lt;/p&gt;
&lt;p&gt;最开始用的是线上服务，什么 Dreamhost/DNS/WordPress 对于当时的我来说是难以逾越的技术难题。大概有一年多的时间，我在百度空间，和讯博客，博客园， &lt;a href="http://en.wikipedia.org/wiki/Windows_Live_Spaces"&gt;Windows Live Spaces&lt;/a&gt; 等各种 blog 平台上写（ &lt;del&gt;转载&lt;/del&gt; ）文章，玩（ &lt;del&gt;自嗨&lt;/del&gt; ）得不亦乐乎。后来咱不是会写点小程序了嘛，就希望能找个支持代码高亮，并且广告要少些的博客平台。无意间找到了 &lt;a href="http://www.is-programmer.com/"&gt;is-programmer&lt;/a&gt; ，试用了下，很不错，就在那里安了家，迄已五年。&lt;/p&gt;
&lt;p&gt;&lt;a href="http://cnlox.is-programmer.com/"&gt;行者无疆始于足下&lt;/a&gt;，这个 blog 基本上忠实地记录了我个人学习计算机的历程。最开始是学习 Linux/LaTeX，后来忙于学业 （OpenGL/Assembly），再后来开始实习（终于学会了 SSH/SCP/Shell Script，掩面），疲于奔命，总算天幸顺利毕业，进入百度，后来偷得浮生，后来一夜之间……五年时间，不长不短，对于 &lt;a href="http://blog.watashi.ws/"&gt;天才选手&lt;/a&gt; ，五年可以从无到有，站到世界之颠。对于我辈俗人，五年时间，也许刚刚够敲开计算机世界的大门吧。 五年来如果说有什么成就，就是始终没有离开 Open Source。这种坚持终于让我在去年收获了 200+ 个 github star，也让我进了 OpenStack 的贡献者名单。想想自己写的代码能够跑在别人的机器上，make the world a better place，还是很开心的。是谁说过，«&lt;a href="http://book.douban.com/subject/4006425/"&gt;我是一只 IT 小小鸟&lt;/a&gt;»。&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;认真的写作有如雕刻。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;工作以后，blog 更新的频率大幅下降， 每篇 blog 的长度却大幅提高，随之而来的就是每篇 blog 写作时间的水涨船高。一方面美其名曰“工作忙（ &lt;del&gt;其实是懒&lt;/del&gt; ）”，另一方面，自己偶尔回翻下自己以前的文章，个中观点语句，常感羞愧难当。因此每次写作，总是有些诚惶诚恐，咬文嚼字，条分缕析，大耗体力，唯恐贻笑大方。&lt;/p&gt;
&lt;p&gt;写作有如登山，一日风睛，柳暗花明，辛苦求索的背后，是对自己生活的反思和锤炼。我常常在认真的写作中发现自己的思想盲点，正如行者登山，辛苦自不必说，孤独也是常态，只是这辛苦孤独之外，常常会伴随着山重水复般的壮丽风景。&lt;/p&gt;
&lt;p&gt;大概在一年前，我开始着手寻找新的 blog 平台， &lt;a href="http://www.is-programmer.com/"&gt;is-programmer&lt;/a&gt; 对新手程序员而言是相当好的 blog 的平台，但是已经越来越无法满足我的需求，因此我将我的注意力转到了所谓的 static blog/site generator 上。这个折腾的过程一波三折，高潮不断，快感连连，折腾的结果就是你现在看到的新的 &lt;a href="http://xiaohanyu.me"&gt;行者无疆始于足下&lt;/a&gt; 。其中的技术细节繁复冗长，我会再写一篇文章加以详述。&lt;/p&gt;
&lt;p&gt;行走，思考，在路上。New blog, new start。“身体与心灵，总要有一个在路上”，自勉。&lt;/p&gt;
</content>
  </entry>
  <entry>
    <id>tag:xiaohanyu.me,2014-03-02:/posts/2014-03-03-2013-summary/</id>
    <title type="html">2013，青春绝版</title>
    <published>2014-03-02T17:13:20Z</published>
    <updated>2017-04-29T09:29:38Z</updated>
    <link rel="alternate" href="http://xiaohanyu.me/posts/2014-03-03-2013-summary/"/>
    <content type="html">&lt;p&gt;年岁大了，人也变得愈发慵懒，前一分钟还梦见那些“偷得浮生半年闲”的美好午后时光，回过头来，2014 已经过去了六分之一，而我还欠着自己一篇 2013 的年终总结。写文章，总得要有个名字吧。2012 是“静水深流”，那 2013 就叫“波涛汹涌”吧。可是我仔细回想了下 2013，想了两个月，终于发现，这一年，没有波涛，更谈不上汹涌。唯一攒下的，似乎就是自己肚腩上那因久坐长宅而堆起来的摇摇欲坠的一圈肥肉。这仿佛是岁月老人在提醒自己， 生命的年轮又多了一圈，而你却多了一圈肥肉……&lt;/p&gt;
&lt;p&gt;没有“波涛”，自然也无法“汹涌”，倒是年初无心写下的一篇&lt;a href="http://xiaohanyu.me/posts/2013-01-25-thoughts-on-baidu/"&gt;博文&lt;/a&gt;，让我平静的生活泛起了一大圈涟漪。一夜之间，我成了中国互联网的名人。我的博文先后被转载到网易科技和水木论坛并成为当日的十大第一，微博上有小一万的转发量，至于博客上，光这一篇文章的访问量就占了所有博客文章的五分之一。博文的转载方式和标题也是五花八门，什么“离职名录， 屌丝逆袭”，什么“百度前‘小资’员工的控诉牛文”，什么“前员工追忆百度乱象：上下异心狼性压制人性”，更有甚者，说这是什么 360 的水军写文专门黑百度的。而我也收到了各种邮件，有百度学长发来压惊的，有出版人夸赞文笔不错询向约稿的，有单独约谈要交朋友的， 有猎头询向跳槽的，有手握百度 offer 但是看了我的文章后犹豫不决过来征询意见的，还有一位仁兄口口声声要“拜我为师”，让我肝颤不已。无意之间，我经历了一场不大不小的互联网舆论风暴，而我就躲在风暴中心的某个角落里，静静地观察着整个事件的演绎发展，除了偶尔在博客上现身回复下评论外，不做过多的辩解和争论。虽是如此，这篇文章的受众之广还是远超我的预料，以致于三月份我去参加 &lt;a href="http://lisp.org.cn/wiki/lisp/event/2013-meetup"&gt;lisp-cn meetup&lt;/a&gt; 时，朋友见面介绍都说“这位就是某某文章的作者”……&lt;/p&gt;
&lt;p&gt;风暴总会过去，记忆难免淡忘。回过头来，当我数次想起，打开博客，以一个读者的身份去审视这篇文章时，我在想，这篇文章是不是真得如人所评，带有很强烈的个人情绪和主观色彩？反过来，如果我没有被百度 fire，而是在百度得到了晋升，我还会写下这样大段的“真知灼见”吗？坦白的讲，应该不会。不过这些都不重要了，倒是那个躁动长夜中随手写下的一句箴言让我反反复复，久久凝视，无法忘怀：&lt;/p&gt;
&lt;p&gt;“即使缤纷落尽，繁华消亡，青春绝版，也不要被生活磨平了棱角。”&lt;/p&gt;
&lt;p&gt;2013，青春绝版。&lt;/p&gt;
&lt;p&gt;这一年，我 25 周岁，自 16 岁离家求学，已逾九载。生活依旧是不紧不慢地过，青春无悔在一点一滴地磨，岁月不在它整圈整轮地长，思绪万千要半丝半缕地理。&lt;/p&gt;
&lt;p&gt;这一年疏于写作，惰于阅读，唯一值得一提的进步就是 Open Source。这一年我开始广泛地参与 Open Source 项目。Emacs 方面，我花了近 3 个月的时间，阅读了不下 50 个emacs package 的文档，总结了自己多年来的经验，发布了 &lt;a href="https://github.com/xiaohanyu/oh-my-emacs"&gt;oh-my-emacs&lt;/a&gt;。毫不夸张地说， oh-my-emacs 目前是世界上最好的 dotemacs 项目。今年我会进一步，做一个精致的 oh-my-emacs 网站，并提供集中化的可下载的“一键式安装包”。在开发 oh-my-emacs 的同时，我给很多 Emacs package 贡献了 patch，包括 &lt;a href="https://github.com/dimitri/el-get"&gt;el-get&lt;/a&gt;、&lt;a href="https://github.com/Fuco1/smartparens"&gt;smartparens&lt;/a&gt;、&lt;a href="https://gitorious.org/evil"&gt;evil&lt;/a&gt;、 &lt;a href="https://github.com/swank-js/swank-js"&gt;swank-js&lt;/a&gt;、&lt;a href="https://github.com/senny/emacs-eclim"&gt;emacs-eclim&lt;/a&gt; 等。除此之外，我花了半天的时间照猫画虎写了 &lt;a href="https://github.com/xiaohanyu/ac-geiser"&gt;ac-geiser&lt;/a&gt;，解决了 Emacs 中 Scheme 编程的 auto-complete 问题。另外还有一个尚处于原型状态下的基于 Org-mode 的静态站点生成器 &lt;a href="https://github.com/xiaohanyu/org-site"&gt;org-site&lt;/a&gt;。OpenStack 方面，贡献了几个微不足道的 patch， 因此蹭得 OpenStack HK Summit 的门票一张（但是没有去成），建立了 openstack git.oschina &lt;a href="https://git.oschina.net/openstack"&gt;镜像&lt;/a&gt;，和朋友一道在车库咖啡组织了一次 &lt;a href="https://groups.google.com/forum/#!msg/china-openstack-user-group/fAij4U2-PMg/IyyxQTBk2OQJ"&gt;OpenStack Beijing Hackathon&lt;/a&gt;， 大家玩得开心，聊得尽兴。Python方面，给 &lt;a href="https://github.com/testing-cabal/testtools"&gt;testtools&lt;/a&gt; 贡献了 2 个 patch，了解了下 &lt;a href="http://flask.pocoo.org/"&gt;Flask&lt;/a&gt;。&lt;/p&gt;
&lt;p&gt;这一年我开始更认真地审视时间的价值。确切地讲，是因为我发现我的时间开始值点钱了。 青春年少的时候，可以整日整月疯疯颠颠山山水水地跑，待到养家糊口的年岁，才发现，同样的时间，你可以用来读书充电，可以用来工作赚钱，也可以用来娱乐享受。所以在九月份的时候，我再度选择了裸辞，重新回到了“偷得浮生半年闲”的状态。上半年我在公司靠着一个人的推动，建立了一套完整的基于 Jenkins 的自动化测试/构建/发布的体系，奈何公司糟糕的开源策略，以及一些不是那么聪明的人，让我到后来有浪费时间之感。从百度到易云， 从一个中国互联网的顶尖平台，到一个千万创业大军中的普通公司，两年的经历思考，让我初步想明白了互联网创业是怎么一回事。创业公司该招怎样的人？哪里可以省钱哪里不要吝啬？市场优先还是技术优先？为什么要拥抱开源？品牌推广一定要靠广告吗？年底的时候， 经朋友介绍，正式开始了一段远程 soho 生活，和几个老外合作几周下来，发现自己的英文还算不错，交流工作毫无障碍，很是出乎意料。同时我也接触了一些清华的创业团队，人生百态，创业艰辛，不一而足。行文至此，我又想起来我刚到北京时一心一意要在百度干三年的那个“最初的梦想”，提提神，醒醒脑，刚上大学的时候，我还想当一名“精通数理化，英语呱呱叫”的学霸来着。每天早晚照镜刷牙的时候，看着自己那张布满青春美丽痘坑的脸庞， 我就想送自己两个字：“呵呵”。不忘初心，方得始终，我等凡夫俗子，万事反复，骑驴看本， 只是切莫在旅途中，忘记出发时那最初的梦想，正所谓念念不忘，必有回响。&lt;/p&gt;
&lt;p&gt;这一年大概读了 40+ 的书，遗忘的多，记住的少，用来吹牛推荐的，屈指可数也。人文方面，被柴静的《&lt;a href="http://book.douban.com/subject/20427187/"&gt;看见&lt;/a&gt;》感动的一塌糊涂，有段时间简直是爱上这个姑娘了，又把柴静主持的央视的《&lt;a href="http://cctv.cntv.cn/lm/kanjian/"&gt;看见&lt;/a&gt;》从头到尾翻看了一遍。“不要因为走得太远而忘记为什么出发”，学会看见， 学会感触，学会不要遗忘。政史方面，被《&lt;a href="http://book.douban.com/subject/20424526/"&gt;邓小平时代&lt;/a&gt;》震撼的一塌糊涂，配合着又读了 《&lt;a href="http://book.douban.com/subject/19920715/"&gt;论中国&lt;/a&gt;》、《&lt;a href="http://book.douban.com/subject/10797092/"&gt;蒋介石与现代中国&lt;/a&gt;》、《&lt;a href="http://book.douban.com/subject/5288371/"&gt;蒋经国传&lt;/a&gt;》，深感自己见识浅薄，慎言多思才是生活之道也。技术方面，被《&lt;a href="http://man7.org/tlpi/"&gt;The Linux Programming Interface&lt;/a&gt;》震撼 + 感动地一塌糊涂， 特别花 500 大洋买了人生第一本进口原版。《&lt;a href="http://book.douban.com/subject/1440226/"&gt;HTTP The Definitive Guide&lt;/a&gt;》也是一本极好的书，每一个 Web 开发的技术人员，无论是前端还是后端，都应该常备常翻。茶余饭后， 会挤点时间看看《&lt;a href="http://movie.douban.com/subject/10606004/"&gt;舌尖上的中国&lt;/a&gt;》、《&lt;a href="http://movie.douban.com/subject/5045822/"&gt;我的抗战&lt;/a&gt;》、《&lt;a href="http://movie.douban.com/subject/1871906/"&gt;地球脉动&lt;/a&gt;》，算是弥补下一日之计晨光日照下慵懒颓废而被浪费掉的被窝时光。偶尔也会有心烦气燥的时候，有如女人月事，每个季度来那么一两次。我不会打游戏，北京空气又不做美，只好窝在家中没日没夜的美剧动漫度日。&lt;/p&gt;
&lt;p&gt;这一年，生活上依旧是一穷二白，月光如洗。月入钱财，免去房租口粮读书之用，特别提款百元，报备领导，用于捐助我所喜欢的软件，自名为“每月一捐”。去年一年大概坚持了七八个月，捐助了 Emacs/Vim/KDE/Wikipedia/Smartparens 等我所喜欢并正在使用中的 Open Source 软件。除此之外，给妞升级了电子装备，还了家中 7000 大洋，买了 Linode 一年 VPS，参加好友婚礼两次，耗金数千。得了一次胃病，与医院纠缠小半年，耗金两千。捐助雅安地震 100 大洋，捐助北大元培学生 100 大洋。小算下来，来京两年半，各种捐助，盖有 5000 大洋左右，很是痛快，吃嘛嘛香。&lt;/p&gt;
&lt;p&gt;这一年，我开始更加深刻地领悟到了宿命这两个字的含义。一梦如是，多年以来，我第一次和父母爆发了一大一小两次冲突。一个人无法选择自己的出身，也很难改变他人的认知，怜其不幸怒其不争的同时，也不要忘记“这个世界上没有任何人能对你的痛苦感同身受”。作为中国改革开放大环境下千万入城大军中的一员，我知道这是我必须承担的代价。&lt;/p&gt;
&lt;p&gt;差不多了。凡夫俗子的文章，总是难免罗嗦又琐碎。最后再琐碎一点，去年总结的时候我写到“五笔输入法的学习也初见成色，再咬牙坚持半年应该可以作为日常输入法使用”，我做到了，这篇文章就是用五笔敲的。速度几于拼音持平，再过半年应该会有更大的提升。&lt;/p&gt;
&lt;p&gt;孔曰逝者如斯，不舍昼夜。我云青春绝版，初心未泯。与君共勉！&lt;/p&gt;
</content>
  </entry>
  <entry>
    <id>tag:xiaohanyu.me,2013-12-30:/posts/2013-12-30-announcing-oh-my-emacs-v0.3/</id>
    <title type="html">Announcing oh-my-emacs v0.3</title>
    <published>2013-12-30T14:00:32Z</published>
    <updated>2017-04-29T09:29:39Z</updated>
    <link rel="alternate" href="http://xiaohanyu.me/posts/2013-12-30-announcing-oh-my-emacs-v0.3/"/>
    <content type="html">&lt;p&gt;Today I’m happy to announce &lt;a href="https://github.com/xiaohanyu/oh-my-emacs"&gt;oh-my-emacs&lt;/a&gt; v0.3.&lt;/p&gt;
&lt;p&gt;It has been three months since I first released oh-my-emacs from my homebrew messy dotemacs project to public. To my suprise, oh-my-emacs has attracted many interests from all over the world.&lt;/p&gt;
&lt;p&gt;The v0.3 version of oh-my-emacs contains various improvements, check its &lt;a href="https://github.com/xiaohanyu/oh-my-emacs/blob/master/CHANGELOG.org#v03"&gt;CHANGELOG&lt;/a&gt; for a condensed feature list.&lt;/p&gt;
&lt;p&gt;Several features worth mentioning (v0.1-&amp;gt;v0.3):&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;code refactoring:
&lt;ul&gt;
&lt;li&gt;oh-my-emacs splits all its modules into two levels: &lt;code&gt;core&lt;/code&gt; and &lt;code&gt;modules&lt;/code&gt;. Files in &lt;code&gt;core&lt;/code&gt; are required by default, while files in &lt;code&gt;modules&lt;/code&gt; are optional. You can load necessary module when you really need it&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;ome-org&lt;/code&gt; module:
&lt;ul&gt;
&lt;li&gt;Upgrade &lt;code&gt;org-mode&lt;/code&gt; to latest 8.x branch. This brings us a more powerful export engine&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;ome-cc&lt;/code&gt; module:
&lt;ul&gt;
&lt;li&gt;oh-my-emacs support auto-complete for C/C++ macros! Combined with &lt;code&gt;pkg-config&lt;/code&gt;, oh-my-emacs cc module can be used as a perfect C/C++ working environment with perfect semantic completion for functions and macros for any installed libs recognizable by &lt;code&gt;pkg-config&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;ome-java&lt;/code&gt; module:
&lt;ul&gt;
&lt;li&gt;oh-my-emacs provide semantic completion for Java projects via emacs-eclim. Though not perfect (and a little heavy), this is a workable solution now&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;ome-lisp&lt;/code&gt; module:
&lt;ul&gt;
&lt;li&gt;The original ubiquitous ome-lisp module has been split to four modules:
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;ome-emacs-lisp&lt;/code&gt; module&lt;/li&gt;
&lt;li&gt;&lt;code&gt;ome-common-lisp&lt;/code&gt; module&lt;/li&gt;
&lt;li&gt;&lt;code&gt;ome-clojure&lt;/code&gt; module&lt;/li&gt;
&lt;li&gt;&lt;code&gt;ome-scheme&lt;/code&gt; module&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;li&gt;documentation:
&lt;ul&gt;
&lt;li&gt;Add a table to specify the system requirments and el-get packages. Thus you can install necessary system tools to make oh-my-emacs modules work as expected&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;li&gt;compatibility:
&lt;ul&gt;
&lt;li&gt;Improve compatibility for Mac OS X&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;li&gt;completion:
&lt;ul&gt;
&lt;li&gt;Add semantic completion for scheme (via &lt;a href="https://github.com/xiaohanyu/ac-geiser"&gt;ac-geiser&lt;/a&gt;)&lt;/li&gt;
&lt;li&gt;Add completion table to show you the currrent semantic completion support for various programming languages&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;li&gt;miscs:
&lt;ul&gt;
&lt;li&gt;Basic support for JavaScript, Ruby, OCaml&lt;/li&gt;
&lt;li&gt;Move some unstale packages to ome-experimental module, load as you need&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Five months of spare time work, 200 git commits, 120 github stars and 35 github issues, all of the above work forms a less than 50MB tarball, which contains 50 &lt;code&gt;el-get&lt;/code&gt; packages, 1000 lines of emacs-lisp code, 4000 lines of documentation, hundreds of reference web links, just &lt;a href="https://s.yunio.com/xYpK_z"&gt;download&lt;/a&gt; and extract this tarball, you’ll get a tuned Emacs OS, and it works almost everywhere.&lt;/p&gt;
&lt;p&gt;It’s time for new year, and I hope you enjoy this gift. Any feedback will be appreciated. Thanks!&lt;/p&gt;
</content>
  </entry>
</feed>

